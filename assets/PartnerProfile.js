import{m as z,e as h,l as M,o as t,Y as B,Q as p}from"./index.js";import{b as H,c as Q,ac as x,as as K}from"./App.js";import{D as O}from"./DropDownSelectCheckout.js";import{T as o}from"./TextInputCheckout.js";import{I as j}from"./InputContainerCheckout.js";import{C as W}from"./CountryWithCodeSelect.js";import{P as Y}from"./PhoneNumberSelect.js";import"./SingleSelect.js";const re=()=>{var f;const{site_title:u}=z.useState(),[a,r]=h.useState({isInitialized:!1,legal_name:"",partner_profile_code:"",contact_person_name:"",isd_code:"",contact_number:"",contact_email:"",status:"",country_isd_code:"",mobile_min_length:"",company_type:"",company_reg_number:"",city:"",state:"",postal_code:"",address:"",country:"",registration_date:null}),{axiosInstance:_}=H(),{user_data:{login_key:c,member_id:d}}=M.useState(),{data:m={},isLoading:N,error:y,refetch:P}=Q({queryKey:["PARTNER_PROFILE",c,d],queryFn:async()=>{var s,l;const e=await _.post("/settings/partner-profile",{login_key:c,member_id:d});if(((s=e==null?void 0:e.data)==null?void 0:s.status)==="success"){const{legal_name:i,partner_profile_code:n,contact_person_name:C,isd_code:F,contact_number:I,contact_email:E,status:L,country_isd_code:v,mobile_min_length:V,company_type:w,company_reg_number:R,city:U,state:D,postal_code:k,address:A,country:T,registration_date:q}=e.data.partner_profile;return r({...a,isInitialized:!0,legal_name:i||"",partner_profile_code:n||"",contact_person_name:C||"",isd_code:F||"",contact_number:I||"",contact_email:E||"",status:L||"",country_isd_code:v||"",mobile_min_length:V||"",company_type:w||"",company_reg_number:R||"",city:U||"",state:D||"",postal_code:k||"",address:A||"",country:T||"",registration_date:q||null}),e.data}else throw{...e,message:((l=e.data)==null?void 0:l.reason)||"Request failed!"}}}),[g,b]=h.useState(!1),S=async e=>{var s,l;e.preventDefault(),b(!0);try{const i={...a,login_key:c,member_id:d},n=await _.post("/settings/partner-profile-update",i);((s=n==null?void 0:n.data)==null?void 0:s.status)==="success"?(p("success","Success!",n.data.reason),r({...a,legal_name:"",partner_profile_code:"",contact_person_name:"",isd_code:"",contact_number:"",contact_email:"",status:"",country_isd_code:"",mobile_min_length:"",company_type:"",company_reg_number:"",city:"",state:"",postal_code:"",address:"",country:"",registration_date:null}),P()):p("error","Update Failed",((l=n==null?void 0:n.data)==null?void 0:l.reason)||"Something went wrong")}catch(i){p("error","Update Failed",i.message)}finally{b(!1)}};if(y)throw y;return t.jsxs(t.Fragment,{children:[t.jsx(B,{children:t.jsxs("title",{children:["Partner Profile",u?" - "+u:""]})}),t.jsx("div",{className:"mb-8 sm:col-span-3 lg:col-span-4",children:!N&&a.isInitialized?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"py-3 mb-1",children:[t.jsx("h5",{className:"text-lg font-medium",children:(f=m==null?void 0:m.partner_profile)==null?void 0:f.legal_name}),t.jsx("p",{className:"text-sm text-neutral",children:"Partner Profile"})]}),t.jsxs("form",{onSubmit:S,className:"mb-8",children:[t.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[t.jsx(o,{label:"Address",defaultValue:a.address,action:e=>r({...a,address:e.target.value}),placeholder:"Enter Address"}),t.jsx(o,{label:"City",defaultValue:a.city,action:e=>r({...a,city:e.target.value}),placeholder:"Enter City"}),t.jsx(o,{label:"State",defaultValue:a.state,action:e=>r({...a,state:e.target.value}),placeholder:"Enter State"}),t.jsx(o,{label:"Contact Person Full Name",defaultValue:a.contact_person_name,action:e=>r({...a,contact_person_name:e.target.value}),placeholder:"Enter Full Name"}),t.jsx(j,{label:"Country",defaultValue:a.country,action:e=>{var s;return r({...a,country:((s=e[0])==null?void 0:s.value)||""})},placeholder:"Select Country",Input:W}),t.jsx(j,{label:"Mobile Number",defaultValue:String(a.isd_code||"")+String(a.contact_number||""),action:e=>r({...a,isd_code:(e==null?void 0:e.isd_code)||"",contact_number:(e==null?void 0:e.mobile)||""}),placeholder:"Enter Mobile Number",Input:Y}),t.jsx(O,{label:"Select Company Type",options:[{label:"Sole proprietorship",value:"Sole proprietorship"},{label:"Partnership",value:"Partnership"},{label:"Limited company",value:"Limited company"},{label:"Limited liability company (LLC)",value:"Limited liability company (LLC)"}],action:e=>{var s;return r({...a,company_type:((s=e[0])==null?void 0:s.value)||""})},defaultValue:a.company_type,placeholder:"Select"}),t.jsx(o,{label:"Partner Code",defaultValue:a.partner_profile_code,action:e=>r({...a,partner_profile_code:e.target.value}),placeholder:"Enter Partner Code"}),t.jsx(o,{label:"Business Registration Number",defaultValue:a.company_reg_number,action:e=>r({...a,company_reg_number:e.target.value}),placeholder:"Enter Business Registration Number"})]}),t.jsx("button",{type:"submit",className:`h-10 min-h-0 mt-4 normal-case border-transparent rounded-md btn bg-primary/70 btn-primary ${g?"pointer-events-none":""}`,children:g?t.jsxs(t.Fragment,{children:[t.jsx(x,{className:"mr-2 animate-spin"})," Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(K,{})," Update"]})})]})]}):t.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl",children:[t.jsx(x,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]})})]})};export{re as default};
