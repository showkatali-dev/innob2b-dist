import{m as E,l as I,e as o,u as C,o as e,a6 as T,U as j,bb as U}from"./index-f242fedc.js";import{aW as L,a as R,w as k,b as H,x as P,n as q,ap as Q}from"./App-89f3291c.js";import{s as M}from"./index.esm-72bbcee1.js";import{F as K}from"./FileInputBoxForSettings-05c4328b.js";const J=()=>{var h;const{site_title:b,component_version:v}=E.useState(),{general:u}=v||{},{banner_id:x}=L(),{axiosInstance:d}=R(),{login_key:m,member_id:r}=((h=I.useState())==null?void 0:h.user_data)||{},[N,g]=o.useState(!1),{data:c,isLoading:y}=k({queryKey:["PARTNER_ADDS_LIST",m,r],queryFn:async()=>{var n;const a=await d.post("/secure?pathName=/partner/partner-ads-list",{login_key:m,member_id:r});if(((n=a.data)==null?void 0:n.status)==="success")return a.data.data}}),[s,i]=o.useState({});o.useEffect(()=>{i(c==null?void 0:c.find(a=>(a==null?void 0:a.banner_id)===x))},[c,x]);const[_,f]=o.useState(null),F=async a=>{var l;const n=await U(a);if(n){const t=await d.post("/secure?pathName=/tools/upload-cdn",{...n,member_id:r,category:"partner-banner"});if(((l=t.data)==null?void 0:l.status)==="success")return t.data.ObjectURL}},S=C(),w=H(),B=async a=>{var n,l;a.preventDefault(),g(!0);try{const t=await F(_),A={...s,login_key:m,member_id:r,ads_image_url:t||(s==null?void 0:s.ads_image_url),link:t||(s==null?void 0:s.ads_image_url)},p=await d.post("/secure?pathName=/partner/partner-ads-update",A);if(((n=p.data)==null?void 0:n.status)==="success")j("success","Success!",p.data.reason),S.invalidateQueries(["PARTNER_ADDS_LIST"]),w("/settings/manage-banner");else throw new Error((l=p.data)==null?void 0:l.reason)}catch(t){console.error(t),j("error","Failed!",t.message)}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsxs("title",{children:["Manage Banner",b?" - "+b:""]})}),e.jsx("div",{className:"mb-8 sm:col-span-3 lg:col-span-4",children:y?e.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl min-h-[400px]",children:[e.jsx(Q,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]}):e.jsx(e.Fragment,{children:s?e.jsxs("form",{onSubmit:B,className:P("mb-8 sm:col-span-3 lg:col-span-4",(u==null?void 0:u.team)==="3"&&"bg-base-200 p-5"),children:[e.jsx("div",{className:"flex flex-col justify-between gap-4 mb-2 md:items-center md:flex-row",children:e.jsx("div",{className:"py-3 mb-1",children:e.jsx("h5",{className:"text-lg font-medium",children:"Update Banner Image"})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Banner Type"}),e.jsxs("select",{className:"sb-input",value:s==null?void 0:s.banner_position,onChange:a=>i({...s,banner_position:a.target.value}),children:[e.jsx("option",{value:"banner-slide",children:"Banner Slide"}),e.jsx("option",{value:"banner-big",children:"Big Banner"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Banner Title"}),e.jsx("input",{className:"sb-input",value:s==null?void 0:s.title,onChange:a=>i({...s,title:a.target.value}),placeholder:"Enter Banner Title"})]}),e.jsx(K,{label:"Banner Image",action:a=>f(a.target.files[0]),isLinkActive:!0,link:s==null?void 0:s.ads_image_url,accept:"image/*"}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Status"}),e.jsxs("select",{className:"sb-input",value:s==null?void 0:s.status,onChange:a=>i({...s,status:a.target.value}),children:[e.jsx("option",{value:"disable",children:"Disable"}),e.jsx("option",{value:"active",children:"Active"})]})]}),e.jsxs("div",{className:"col-span-3 sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Summary Description"}),e.jsx("textarea",{className:"sb-input !min-h-16",value:s==null?void 0:s.summery,onChange:a=>i({...s,summery:a.target.value}),placeholder:"Enter Summary Description"})]})]}),e.jsx("button",{type:"submit",className:"h-10 min-h-0 rounded btn btn-primary h10 w-36 btn-outline",children:N?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"animate-spin"})," Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{})," Update"]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:"No banner found"})})})]})};export{J as default};
