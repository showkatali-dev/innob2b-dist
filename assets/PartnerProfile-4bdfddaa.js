import{m as B,e as x,l as H,o as t,a6 as K,U as u}from"./index-f242fedc.js";import{a as O,w as Q,x as W,ap as j,aL as $}from"./App-89f3291c.js";import{D as G}from"./DropDownSelectCheckout-9d4a1fde.js";import{T as o}from"./TextInputCheckout-140d81fc.js";import{I as N}from"./InputContainerCheckout-564c806c.js";import{C as J}from"./CountryWithCodeSelect-b68c8ddb.js";import{P as X}from"./PhoneNumberSelect-8527307e.js";import"./SingleSelect-9930e593.js";const oe=()=>{var h;const{site_title:_,component_version:P}=B.useState(),{general:c}=P||{},[a,r]=x.useState({isInitialized:!1,legal_name:"",partner_profile_code:"",contact_person_name:"",isd_code:"",contact_number:"",contact_email:"",status:"",country_isd_code:"",mobile_min_length:"",company_type:"",company_reg_number:"",city:"",state:"",postal_code:"",address:"",country:"",registration_date:null}),{axiosInstance:y}=O(),{user_data:{login_key:d,member_id:m}}=H.useState(),{data:p={},isLoading:S,error:g,refetch:C}=Q({queryKey:["PARTNER_PROFILE",d,m],queryFn:async()=>{var s,l;const e=await y.post("/settings/partner-profile",{login_key:d,member_id:m});if(((s=e==null?void 0:e.data)==null?void 0:s.status)==="success"){const{legal_name:i,partner_profile_code:n,contact_person_name:I,isd_code:L,contact_number:E,contact_email:v,status:w,country_isd_code:V,mobile_min_length:R,company_type:U,company_reg_number:D,city:k,state:A,postal_code:T,address:q,country:z,registration_date:M}=e.data.partner_profile;return r({...a,isInitialized:!0,legal_name:i||"",partner_profile_code:n||"",contact_person_name:I||"",isd_code:L||"",contact_number:E||"",contact_email:v||"",status:w||"",country_isd_code:V||"",mobile_min_length:R||"",company_type:U||"",company_reg_number:D||"",city:k||"",state:A||"",postal_code:T||"",address:q||"",country:z||"",registration_date:M||null}),e.data}else throw{...e,message:((l=e.data)==null?void 0:l.reason)||"Request failed!"}}}),[b,f]=x.useState(!1),F=async e=>{var s,l;e.preventDefault(),f(!0);try{const i={...a,login_key:d,member_id:m},n=await y.post("/settings/partner-profile-update",i);((s=n==null?void 0:n.data)==null?void 0:s.status)==="success"?(u("success","Success!",n.data.reason),r({...a,legal_name:"",partner_profile_code:"",contact_person_name:"",isd_code:"",contact_number:"",contact_email:"",status:"",country_isd_code:"",mobile_min_length:"",company_type:"",company_reg_number:"",city:"",state:"",postal_code:"",address:"",country:"",registration_date:null}),C()):u("error","Update Failed",((l=n==null?void 0:n.data)==null?void 0:l.reason)||"Something went wrong")}catch(i){u("error","Update Failed",i.message)}finally{f(!1)}};if(g)throw g;return t.jsxs(t.Fragment,{children:[t.jsx(K,{children:t.jsxs("title",{children:["Partner Profile",_?" - "+_:""]})}),t.jsx("div",{className:W("mb-8 sm:col-span-3 lg:col-span-4",(c==null?void 0:c.team)==="3"&&"bg-base-200 p-5"),children:!S&&a.isInitialized?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"py-3 mb-1",children:[t.jsx("h5",{className:"text-lg font-medium",children:(h=p==null?void 0:p.partner_profile)==null?void 0:h.legal_name}),t.jsx("p",{className:"text-sm text-neutral",children:"Partner Profile"})]}),t.jsxs("form",{onSubmit:F,className:"mb-8",children:[t.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[t.jsx(o,{label:"Address",defaultValue:a.address,action:e=>r({...a,address:e.target.value}),placeholder:"Enter Address"}),t.jsx(o,{label:"City",defaultValue:a.city,action:e=>r({...a,city:e.target.value}),placeholder:"Enter City"}),t.jsx(o,{label:"State",defaultValue:a.state,action:e=>r({...a,state:e.target.value}),placeholder:"Enter State"}),t.jsx(o,{label:"Contact Person Full Name",defaultValue:a.contact_person_name,action:e=>r({...a,contact_person_name:e.target.value}),placeholder:"Enter Full Name"}),t.jsx(N,{label:"Country",defaultValue:a.country,action:e=>{var s;return r({...a,country:((s=e[0])==null?void 0:s.value)||""})},placeholder:"Select Country",Input:J}),t.jsx(N,{label:"Mobile Number",defaultValue:String(a.isd_code||"")+String(a.contact_number||""),action:e=>r({...a,isd_code:(e==null?void 0:e.isd_code)||"",contact_number:(e==null?void 0:e.mobile)||""}),placeholder:"Enter Mobile Number",Input:X}),t.jsx(G,{label:"Select Company Type",options:[{label:"Sole proprietorship",value:"Sole proprietorship"},{label:"Partnership",value:"Partnership"},{label:"Limited company",value:"Limited company"},{label:"Limited liability company (LLC)",value:"Limited liability company (LLC)"}],action:e=>{var s;return r({...a,company_type:((s=e[0])==null?void 0:s.value)||""})},defaultValue:a.company_type,placeholder:"Select"}),t.jsx(o,{label:"Partner Code",defaultValue:a.partner_profile_code,action:e=>r({...a,partner_profile_code:e.target.value}),placeholder:"Enter Partner Code"}),t.jsx(o,{label:"Business Registration Number",defaultValue:a.company_reg_number,action:e=>r({...a,company_reg_number:e.target.value}),placeholder:"Enter Business Registration Number"})]}),t.jsx("button",{type:"submit",className:`h-10 min-h-0 mt-4 normal-case border-transparent rounded-md btn bg-primary/70 btn-primary ${b?"pointer-events-none":""}`,children:b?t.jsxs(t.Fragment,{children:[t.jsx(j,{className:"mr-2 animate-spin"})," Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx($,{})," Update"]})})]})]}):t.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl min-h-[400px]",children:[t.jsx(j,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]})})]})};export{oe as default};
