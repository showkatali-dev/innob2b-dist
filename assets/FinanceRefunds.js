import{s as _,J as g,r as v,d as y,e as R,g as S,j as e,H as q,bj as P}from"./index.js";import{I as w}from"./InputDateRange.js";import"./shortcut-buttons-flatpickr.min.js";const D=()=>{const{site_title:o}=_.useState(),[n,b]=g(),[l,f]=v.useState(null),r=n.get("refund_status")||"any",d=n.get("refund_trx_id")||"",u=n.get("refund_request_date")||"",i=n.get("booking_reference_id")||"",c=n.get("limit_data")||10,{axiosInstance:j}=y(),{user_data:{login_key:m,member_id:x}}=R.useState(),{data:s=[],isLoading:h}=S({queryKey:["REFUNDS_HISTORY",r,d,u,i,c,x,m],queryFn:async()=>{var a;const t=await j.post("/secure?pathName=/finance/history-refunds",{refund_status:r,refund_trx_id:d,refund_request_date:u,booking_reference_id:i,limit_data:c,member_id:x,login_key:m});if(((a=t.data)==null?void 0:a.status)==="success")return t.data.data}}),p=t=>{t.preventDefault();const a=t.target,N={refund_request_date:(l==null?void 0:l.length)>1?l.join(" to "):null,limit_data:a.limit_data.value,booking_reference_id:a.reference_id.value,refund_status:a.refund_status.value,refund_trx_id:a.refund_trx_id.value};b(N)};return e.jsxs("main",{className:"container min-h-screen pt-20",children:[e.jsx(q,{children:e.jsxs("title",{children:["Home",o?" - "+o:""]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("form",{onSubmit:p,className:"relative p-4 mb-16 shadow-md sm:px-6 bg-base-200 rounded-b-2xl rounded-2xl",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Refund Request List"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 mb-5 sm:mb-8 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"refund-request-date",className:"sb-label",children:"Refund Requested Date"}),e.jsx(w,{className:"sb-input",placeholder:"Select Refund Requested Date",defaultValue:l,action:f})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"refund-trx-id",className:"sb-label",children:"Refund Trx Id"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",name:"refund_trx_id",defaultValue:d,placeholder:"Enter Refund Trx Id"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"booking-reference-id",className:"sb-label",children:"Booking Reference Id"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",name:"reference_id",defaultValue:i,placeholder:"Enter Booking Reference Id"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"refund-status",className:"sb-label",children:"Refund Status"}),e.jsxs("select",{id:"refund-status",className:"sb-input",name:"refund_status",defaultValue:r,children:[e.jsx("option",{value:"All",selected:!0,children:"All"}),e.jsx("option",{value:"Requested",children:"Requested"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"invoice-status",className:"sb-label",children:"Show Data Limit"}),e.jsxs("select",{id:"invoice-status",className:"sb-input",name:"limit_data",defaultValue:c,children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"500",children:"500"}),e.jsx("option",{value:"1000",children:"1000"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-lg min-h-0 h-12 btn-primary sm:absolute static top-full left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:active:!-translate-x-1/2 sm:active:!-translate-y-1/2 sm:active:scale-95 !animate-none normal-case flex-nowrap font-normal max-sm:w-full",children:h?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 animate-spin"})," Processing..."]}):e.jsx(e.Fragment,{children:"Search"})})]}),e.jsxs("div",{className:"w-full mb-8 overflow-x-auto",children:[!h&&(s==null?void 0:s.length)===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("h5",{className:"text-lg font-semibold",children:"No results"}),e.jsx("p",{className:"text-sm text-neutral",children:"Please use the search box for your desired data range"})]}),(s==null?void 0:s.length)>0&&e.jsxs("table",{className:"table text-sm booking-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm border",children:"Payment Trx Id"}),e.jsx("th",{className:"text-sm border",children:"Payment Type"}),e.jsx("th",{className:"text-sm border",children:"Payment Date"}),e.jsx("th",{className:"text-sm border",children:"Payment Ref"}),e.jsx("th",{className:"text-sm border",children:"Status"}),e.jsx("th",{className:"text-sm border",children:"Payment Amount"}),e.jsx("th",{className:"text-sm border",children:"Reference Notes"}),e.jsx("th",{className:"text-sm border",children:"Download"})]})}),e.jsx("tbody",{children:s==null?void 0:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"border",children:"TEST-320168522585753206VGU1H"}),e.jsx("td",{className:"border text-primary",children:"CASH"}),e.jsx("td",{className:"border",children:"2023-05-28"}),e.jsx("td",{className:"text-xs border",children:"234"}),e.jsx("td",{className:"text-xs border",children:e.jsx("span",{className:"text-xs text-white badge badge-warning",children:"Request"})}),e.jsx("td",{className:"text-xs border",children:"s$1914.83"}),e.jsx("td",{className:"text-xs border",children:"t"}),e.jsx("td",{className:"text-xs border",children:e.jsx("a",{href:"#",className:"no-underline link link-primary",children:"Download"})})]},t==null?void 0:t.Id))})]})]})]})]})};export{D as default};
