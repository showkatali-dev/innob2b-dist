import{l as L,m as C,e as b,o as e,X as E,Y as H,Q as j}from"./index.js";import{U as Y,a as z,r as M,q,cv as A,T as B,a5 as D}from"./App.js";import"./autoplay.js";import{e as w,c as G}from"./index.esm.js";const X=()=>{const{isLoading:N,user_data:t}=L.useState(),{site_title:a,intro_video:i,intro_banner:y,logo:v}=C.useState(),{state:r}=Y(),P=(r==null?void 0:r.pathname)||"/",[d,m]=b.useState(!1),{axiosInstance:S}=z(),k=M(),[n,_]=b.useState(!1),[u]=q(),x=u.get("reset_token"),p=u.get("token_expire"),F=async s=>{var h,f,g;if(s.preventDefault(),d||!x||!p)return;m(!0);const o=s.target,I=o.password.value,R=o.cpassword.value;try{const l={reset_token:x,token_expire:p,password:I,cpassword:R},c=await S.post("/user/password-reset-do",l);if(((h=c.data)==null?void 0:h.status)==="success")j("success","Success",(f=c.data)==null?void 0:f.reason),o.reset(),k("/login");else throw new Error(((g=c.data)==null?void 0:g.reason)||"Something went wrong")}catch(l){j("error","Failed!",l.message)}finally{m(!1)}};return N?e.jsx(E,{}):t!=null&&t.login_key?e.jsx(A,{to:P}):e.jsxs("div",{style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))",backgroundSize:"cover",backgroundBlendMode:"multiply"},children:[e.jsx(H,{children:e.jsxs("title",{children:["Forgot Password",a?" - "+a:""]})}),i&&e.jsx("video",{id:"background-video",src:i,poster:y,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:"Your browser does not support the video tag."}),e.jsx("main",{className:"flex items-center justify-center min-h-screen gap-4 px-5",children:e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs("div",{className:"relative w-full p-8 mb-4 shadow-lg rounded-2xl bg-base-200",children:[e.jsx("div",{className:"absolute top-0 z-10 flex items-center justify-center p-1 mb-2 overflow-hidden -translate-x-1/2 -translate-y-1/2 border rounded-lg h-14 border-neutral/10 left-1/2 bg-base-200",children:e.jsx("img",{src:v,alt:"logo",className:"object-cover object-center w-full h-full"})}),e.jsx("div",{className:"flex flex-col items-center pt-4 mt-2 mb-3",children:e.jsxs("h1",{className:"text-xl font-semibold",children:["Let's Get Started ",a]})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-8 text-sm text-center text-neutral/80",children:"Reset Your Password"}),e.jsxs("form",{onSubmit:F,className:"flex flex-col w-full gap-y-4",children:[e.jsxs("label",{className:"gap-2 form-control",children:[e.jsx("span",{className:"text-[13px] text-neutral",children:"Password"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{autoComplete:"off",type:n?"text":"password",name:"password","data-type":"password",className:"flex-1 h-10 pr-10 text-sm border rounded-full input input-bordered border-base-content/10 bg-base-200 focus:outline-0 min-h-8 focus:border-primary",placeholder:"Enter New Password"}),e.jsx("span",{className:"absolute flex items-center justify-center w-8 h-8 text-lg rounded-full right-1.5 bg-base-100 text-neutral",children:e.jsx(w,{})})]})]}),e.jsxs("label",{className:"gap-2 form-control",children:[e.jsx("span",{className:"text-[13px] text-neutral",children:"Confirm Password"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{autoComplete:"off",type:n?"text":"password",name:"cpassword","data-type":"password",className:"flex-1 h-10 pr-10 text-sm border rounded-full input input-bordered border-base-content/10 bg-base-200 focus:outline-0 min-h-8 focus:border-primary",placeholder:"Re-enter New Password"}),e.jsx("span",{className:"absolute flex items-center justify-center w-8 h-8 text-lg rounded-full right-1.5 bg-base-100 text-neutral",children:e.jsx(w,{})})]})]}),e.jsx("div",{className:"flex justify-between mt-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer text-neutral",children:[e.jsx("input",{type:"checkbox",className:"toggle toggle-xs border-neutral bg-neutral",checked:n,onChange:s=>_(s.target.checked)}),e.jsx("span",{children:"Show Password"})]})}),e.jsx("button",{type:"submit",className:"h-10 min-h-0 font-normal normal-case transition-all duration-300 rounded-full shadow-lg btn btn-primary shadow-primary/50 hover:shadow-none",children:d?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"animate-spin"})," Processing..."]}):e.jsxs(e.Fragment,{children:["Reset ",e.jsx(G,{})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[e.jsx("span",{className:"text-neutral",children:"Remember It?"}),e.jsx(D,{to:"/login",className:"text-sm text-primary",children:"Sign in here"})]})]})]})]})})})]})};export{X as default};
