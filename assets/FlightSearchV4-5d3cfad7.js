import{e as y,q as e,bk as dt,am as A,o as Ye,H as X,al as ve,b7 as Ze,m as ra,b6 as kt,P as le,av as ze,T as pt,ac as St,a0 as sa,an as aa,bl as ce,a5 as Ct,au as Ft}from"./index-d20e4767.js";import{a as At}from"./index.esm-0dc5ee46.js";import{c as te,cF as $t,dA as Ot,dB as Et,dC as Bt,dD as Tt,dE as Mt,dF as zt,P as He,dG as It,dH as Dt,b as na,c2 as Ht,cI as Yt,cG as Lt,c4 as Pt,cH as qt,cE as Rt,aW as Wt,cx as Vt,d as ia,cy as Ut,aK as Gt,cz as Qt,dI as Kt,dJ as Jt,u as Xt,e as xt,j as Zt,b8 as je,b9 as be,a7 as ge,ba as ye,n as es,o as as,aa as ts,dK as ss}from"./App-e22994df.js";import{n as ht,B as ft,D as _t,P as jt,F as rs,G as ns,a as is,b as ls,c as os,d as cs,S as ds,e as ps,f as ms,A as us,g as xs,h as hs,j as fs,i as _s,k as js,l as bs,m as gs}from"./Searchbox3-2623e430.js";import{C as xe}from"./Checkbox-26c9aafd.js";import{y as ys,z as vs,o as mt,b as Ns,d as ws}from"./index.esm-eea12382.js";import{d as ks}from"./RangeSliderInput-b754c393.js";import{a as Ss}from"./index.esm-3f9d9474.js";import{S as Cs,F as Fs,a as As}from"./SearchboxSkeleton-87078745.js";import{f as $s}from"./SuppliersSelection2-134e7605.js";import{F as Os}from"./FlightItineraryData-8b607c04.js";import{c as Es,F as Bs,Q as Ts}from"./index-2322b991.js";import"./MultipleFlight2-af60c11c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./sweetalert2-react-content.es-3af9e28c.js";import"./SearchOption-56f0c822.js";import"./SingleSelect-7a7320ea.js";import"./InputDate-dcd104c5.js";import"./index-968316a2.js";import"./PrimaryTabsWithIcon-93c65834.js";import"./index.esm-112054fd.js";const ut=({min:n,max:s,defaultValue:c,value:l,action:p})=>{const[x,h]=y.useState({min:0,max:0});return y.useEffect(()=>{h({min:l[0]||n,max:l[1]||s})},[l,n,s]),e.jsxs("div",{className:"p-1 pt-2",children:[e.jsx("div",{className:"relative min-h-[30px] slider-container",children:e.jsx(ks,{min:n,max:s,defaultValue:c,onInput:function(b){this.value=b,h({min:b[0],max:b[1]})},rangeSlideDisabled:!0,onThumbDragEnd:function(){p(this.value)},className:"h-1"})}),e.jsxs("div",{className:"flex items-center justify-between text-sm slider-value",children:[e.jsxs("span",{children:["Fri ",dt(x.min)]}),e.jsx("span",{children:dt(x.max)})]})]})},bt=({departureAirport:n,arrivalAirport:s})=>{const[c,l]=y.useState("takeoff"),{take_off:p,landing:x}=A.useState(h=>h.time);return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2",children:[e.jsx("div",{onClick:()=>l("takeoff"),className:te("cursor-pointer flex items-center justify-center text-sm py-1 rounded border",c==="takeoff"&&"bg-primary text-primary-content border-primary"),children:"Take off"}),e.jsx("div",{onClick:()=>l("landing"),className:te("cursor-pointer flex items-center justify-center text-sm py-1 rounded border",c==="landing"&&"bg-primary text-primary-content border-primary"),children:"Landing"})]}),c==="takeoff"&&e.jsxs("div",{className:"space-y-2 v3",children:[e.jsxs("h2",{className:"text-sm",children:["Take-off from ",e.jsx("strong",{children:n})]}),e.jsx(ut,{min:0,max:86399,defaultValue:[p.min_time,p.max_time],value:[p.min_time,p.max_time],action:h=>A.update(b=>{b.time.take_off={min_time:h[0],max_time:h[1]}})})]}),c==="landing"&&e.jsxs("div",{className:"space-y-2 v3",children:[e.jsxs("h2",{className:"text-sm",children:["Landing to ",e.jsx("strong",{children:s})]}),e.jsx(ut,{min:0,max:86399,defaultValue:[x.min_time,x.max_time],value:[x.min_time,x.max_time],action:h=>A.update(b=>{b.time.landing={min_time:h[0],max_time:h[1]}})})]})]})},Ms=({departureAirport:n,arrivalAirport:s})=>e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx($t,{}),"Time"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx(bt,{departureAirport:n,arrivalAirport:s})})]}),gt=({refundable:n,non_refundable:s})=>e.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[e.jsx(xe,{label:"Refundable",defaultChecked:n,action:c=>A.update(l=>{l.fare_type.refundable=c})}),e.jsx(xe,{label:"Non Refundable",defaultChecked:s,action:c=>A.update(l=>{l.fare_type.non_refundable=c})})]}),zs=()=>{const{refundable:n,non_refundable:s}=A.useState(c=>c.fare_type);return e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Ot,{}),"Fare Type"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx(gt,{refundable:n,non_refundable:s})})]})},Is=()=>e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Et,{}),"Fare Assistant"]})}),e.jsxs("div",{className:"px-0 mt-3 collapse-content",children:[e.jsxs("label",{className:"gap-2 mb-2 form-control",children:[e.jsx("h2",{className:"text-sm",children:"Payment Method"}),e.jsxs("select",{className:"w-full rounded select select-sm focus:outline-0",children:[e.jsx("option",{value:"",disabled:!0,defaultChecked:!0,children:"Choose an option"}),e.jsx("option",{value:"1",children:"Option 1"}),e.jsx("option",{value:"2",children:"Option 2"})]})]}),e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("h2",{className:"text-sm",children:"Credit Card Fee"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",className:"rounded-sm checkbox checkbox-xs checkbox-primary"}),e.jsx("span",{children:"Yes"})]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",className:"rounded-sm checkbox checkbox-xs checkbox-primary"}),e.jsx("span",{children:"No"})]})]})]})]})]}),Ds=({suppliers:n,priceBySuppliers:s,currency:c})=>{const{supplier_option:l}=Ye.useState(),{provider:p}=A.useState();if((l==null?void 0:l.status)==="YES")return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Bt,{}),"Providers"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx("div",{className:"flex flex-col gap-2 text-xs",children:Object.entries(p).sort().map(([x,h])=>{const{title:b,logo:g}=n.find(T=>T.supplier_code===x)||{};return e.jsx(xe,{label:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:g,alt:"",className:"w-5 h-5 p-0.5 rounded-full border"}),e.jsx("span",{className:"line-clamp-1",children:b}),e.jsxs("span",{className:"font-medium whitespace-nowrap text-[10px] ml-auto",children:[X(c)," ",s[x]]})]}),defaultChecked:h,action:T=>A.update(I=>{I.provider[x]=T})},x)})})})]}),e.jsx("hr",{className:"mb-2 -mt-1"})]})},Hs=()=>e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Tt,{}),"Flexible Flight Tickets"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx("div",{className:"flex flex-col gap-2 text-xs",children:e.jsx(xe,{label:"No Change Fees",defaultChecked:!1,action:n=>console.log(n)})})})]}),yt=()=>e.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[e.jsx(xe,{label:"Vienna (VIE)",defaultChecked:!1,action:n=>console.log(n)}),e.jsx(xe,{label:"Manama (BAH)",defaultChecked:!1,action:n=>console.log(n)}),e.jsx(xe,{label:"Brussels (BRU)",defaultChecked:!1,action:n=>console.log(n)})]}),Ys=()=>e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0"}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Mt,{}),"Connecting Airports"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx(yt,{})})]}),Ls=({filterOptions:n,updateFilterOptions:s})=>{const[c,l]=y.useState(!1),[p,x]=y.useState(null),h=(_,N)=>{x(N),_.dataTransfer.setData("text/plain","")},b=()=>{x(null)},g=_=>{_.preventDefault()},T=(_,N)=>{if(!p)return;const D=n.indexOf(p),i=n.indexOf(N);if(D!==-1&&i!==-1){const O=[...n];O.splice(D,1),O.splice(i,0,p),s(O)}},I=y.useRef();return y.useEffect(()=>{const _=N=>{I.current&&!I.current.contains(N.target)&&l(!1)};return document.addEventListener("click",_),()=>document.removeEventListener("mousedown",_)},[]),e.jsxs("div",{className:"relative",ref:I,children:[e.jsx("button",{onClick:()=>l(!c),className:"duration-200 rounded-md btn-xs btn-warning btn btn-square hover:scale-125",children:e.jsx(zt,{className:"animate-spin",style:{animation:"spin 2.5s linear infinite"}})}),e.jsx("div",{className:te("absolute top-full mt-1 w-fit -translate-x-1/2 bg-base-200 rounded shadow-lg shadow-black/20",c?"block":"hidden"),children:e.jsx("ul",{className:"rounded join join-vertical border-x",children:n.map(_=>e.jsxs("li",{draggable:!0,onDragStart:N=>h(N,_),onDragEnd:b,onDragOver:g,onDrop:N=>T(N,_),style:{opacity:p===_?.5:1},className:"justify-between font-normal capitalize btn-xs btn join-item border-y-base-content/20 min-w-44",children:[_," ",e.jsx(Ss,{className:"text-neutral"})]},_))})})]})},vt=({no_stop_summery:n,currency:s,priceByStops:c})=>e.jsx("div",{className:"flex gap-2 text-xs",children:Object.entries(n).sort().map(([l,p])=>e.jsxs("label",{className:"flex flex-col items-center justify-center",children:[e.jsx("input",{type:"checkbox",className:"hidden peer",checked:p,onChange:x=>{A.update(h=>{h.no_stop_summery[l]=x.target.checked})}}),e.jsx("span",{className:"flex items-center justify-center w-8 h-6 text-sm border rounded-sm peer-checked:bg-primary peer-checked:text-primary-content peer-checked:border-primary",children:l}),e.jsxs("span",{className:"text-[8px] text-center tracking-tight",children:[X(s)," ",c[l]]})]},l))}),ta=["price","stops","time","fare type","duration","fare assistant","flexible flight ticket","providers","baggage","airlines","cabin","aircraft","connecting airports"],Nt=({filterData:n,additionalData:s})=>{const{flight_search_sidebar:{mobile:{isActive:c}}}=ve.useState(),{price:l,duration:p,no_stop_summery:x,baggage_summery:h,operating:b,cabin_class:g,aircraft_names:T}=A.useState(v=>v),{min_price:I,max_price:_,priceByStops:N,priceBySuppliers:D,priceByAirlines:i,currency:O,departureAirport:S,arrivalAirport:C}=n,{min_duration:H,max_duration:P}=n,{supplier_option:d}=Ye.useState(),F=y.useMemo(()=>{var v;return((v=d==null?void 0:d.data)==null?void 0:v.filter(M=>(M==null?void 0:M.supplier_type)==="FLIGHT"&&((s==null?void 0:s.supplier_uid)==="all"||(M==null?void 0:M.supplier_uid)===(s==null?void 0:s.supplier_uid))))||[]},[d==null?void 0:d.data,s==null?void 0:s.supplier_uid]);y.useEffect(()=>{const{min_price:v,max_price:M,min_duration:m,max_duration:z,cabin_class:U,aircraft_names:Q,no_stop_summery:K,baggage_summery:de,departure:pe,arrival:re,carrier:ee,priceBySuppliers:L}=n;A.update(w=>{w.price={min_price:v-5,max_price:M+5},w.duration={min_duration:m-5,max_duration:z+5},Object.keys(L||{}).forEach(f=>{w.provider[f]=!1}),Object.values(K).forEach(f=>{w.no_stop_summery[f!=null&&f.includes("1")?1:f!=null&&f.includes("2")?2:f!=null&&f.includes("3")?3:0]=!1}),Object.values(U).forEach(f=>{w.cabin_class[f]=!1}),Object.values(Q).forEach(f=>{w.aircraft_names[f]=!1}),Object.values(de).forEach(f=>{w.baggage_summery[f]=!1}),Object.values(pe.timing_slot).forEach(f=>{w.departure[f]&&(w.departure[f].value=!1)}),Object.values(re.timing_slot).forEach(f=>{w.arrival[f]&&(w.arrival[f].value=!1)}),Object.values(ee.operating).forEach(f=>{w.operating[f]=!1})})},[n]);const[V,se]=y.useState(!1),[q,Z]=y.useState(!0),[G,t]=y.useState(!0),[j,Y]=y.useState(ta);y.useEffect(()=>{try{const v=localStorage.getItem("__ff"),M=atob(v),m=JSON.parse(M);Y(m||ta)}catch{Y(ta)}},[]);const E=v=>{Y(v)};return e.jsxs(e.Fragment,{children:[!G&&e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center h-10 gap-4 pl-2 pr-3 text-sm border rounded-md border-primary w-fit",style:{background:"linear-gradient(73deg, hsl(var(--p)/1) 27%, #fff 29%)"},children:[e.jsx(It,{className:"text-lg text-warning"})," ",e.jsx("span",{children:"Search Filter"})]}),e.jsxs("aside",{className:te("filter-section fixed lg:translate-x-0 max-w-xs lg:max-w-full max-lg:top-0 max-lg:left-0 max-lg:bottom-0 overflow-visible duration-500 z-30 lg:z-0 bg-base-200 lg:bg-transparent lg:sticky lg:top-20 h-fit lg:rounded-lg lg:shadow-custom2 lg:mb-16 mx-auto",c?"translate-x-0":"translate-x-[-400px]",q?"w-full":"w-[80%]",G?"block":"hidden"),children:[e.jsxs("div",{className:"absolute top-0 left-0 z-10 flex justify-center w-full gap-1 -translate-y-1/2 max-sm:hidden",children:[e.jsx("button",{onClick:()=>Z(!q),className:"duration-200 rounded-md btn-xs btn-warning btn btn-square hover:scale-125",children:q?e.jsx(ys,{}):e.jsx(vs,{})}),e.jsx("button",{onClick:()=>t(!1),className:"duration-200 rounded-md btn-xs btn-warning btn btn-square hover:scale-125",children:e.jsx(Dt,{})}),e.jsx(Ls,{filterOptions:j,updateFilterOptions:E})]}),e.jsxs("div",{className:"py-4 rounded-lg lg:shadow-lg lg:bg-base-200 max-h-screen lg:max-h-[calc(100vh-80px)] overflow-auto custom-scrollbar px-4 pt-5",children:[e.jsx("button",{onClick:()=>ve.update(v=>{v.flight_search_sidebar.mobile.isActive=!1}),className:"absolute z-30 flex ml-auto btn btn-sm btn-ghost btn-circle bg-red-500/20 hover:bg-red-500 hover:text-white lg:hidden top-1 right-1",children:e.jsx(na,{})}),j.map((v,M)=>{let m=null;switch(v){case"price":{m=e.jsxs("div",{className:"-mt-1 rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Wt,{className:"mr-1"}),"Price Range"]})}),e.jsx("div",{className:"px-0 mt-2 collapse-content v3",children:e.jsx(jt,{min_price:I,max_price:_,price:l})})]});break}case"stops":{m=e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Rt,{className:"mr-1"}),"Stops"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx(vt,{no_stop_summery:x,currency:O,priceByStops:N})})]});break}case"time":{m=e.jsx(Ms,{departureAirport:S,arrivalAirport:C});break}case"duration":{m=e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(qt,{className:"mr-1"}),"Duration"]})}),e.jsx("div",{className:"px-0 mt-2 collapse-content v3",children:e.jsx(_t,{duration:p,min_duration:H,max_duration:P})})]});break}case"fare type":{m=e.jsx(zs,{});break}case"fare assistant":{m=e.jsx(Is,{});break}case"flexible flight tickets":{m=e.jsx(Hs,{});break}case"providers":{m=e.jsx(Ds,{suppliers:F,priceBySuppliers:D,currency:O});break}case"baggage":{m=e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Pt,{className:"mr-1"}),"Baggage"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx(ft,{baggage_summery:h})})]});break}case"airlines":{m=e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Lt,{}),"Airlines"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx(ht,{airlines:n.airlines,currency:O,operating:b,priceByAirlines:i})})]});break}case"cabin":{m=e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0",defaultChecked:!0}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Yt,{className:"mr-1"}),"Cabin"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsx("div",{className:"flex flex-col gap-2 text-xs",children:Object.entries(g).sort().map(([z,U])=>e.jsx(xe,{label:z,defaultChecked:U,action:Q=>A.update(K=>{K.cabin_class[z]=Q})},z))})})]});break}case"aircraft":{m=e.jsxs("div",{className:"rounded-none collapse collapse-arrow",children:[e.jsx("input",{type:"checkbox",className:"min-h-0"}),e.jsx("div",{className:"min-h-0 p-0 h-fit collapse-title after:!right-1.5 after:text-neutral/70",children:e.jsxs("h6",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(Ht,{className:"mr-1"}),"Aircraft"]})}),e.jsx("div",{className:"px-0 mt-3 collapse-content",children:e.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[Object.entries(T).sort().slice(0,V?void 0:4).map(([z,U])=>e.jsx(xe,{label:z,defaultChecked:U,action:Q=>A.update(K=>{K.aircraft_names[z]=Q})},z)),!V&&Object.entries(T).length>4&&e.jsxs("button",{onClick:()=>se(!0),className:"font-medium text-left text-primary",children:["+",Object.entries(T).length-4," ","Aircraft"]})]})})]});break}case"connecting airports":{m=e.jsx(Ys,{});break}}return e.jsxs(y.Fragment,{children:[m,M!==j.length-1&&e.jsx("hr",{className:"mb-2 -mt-1"})]},v)})]})]}),c&&e.jsx("div",{onClick:()=>ve.update(v=>{v.flight_search_sidebar.mobile.isActive=!1}),className:"fixed top-0 bottom-0 left-0 right-0 z-20 lg:hidden bg-black/10 backdrop-blur-[2px]"})]})};Nt.propTypes={filterData:He.object.isRequired,additionalData:He.object.isRequired};const Ps=()=>{const{active:n}=ve.useState(d=>d.modal),{data:s}=Ze.useState(),[c,l]=y.useState(!1),[p,x]=y.useState(!1),[h,b]=y.useState(!1),{user_data:g}=ra.useState(),{member_id:T,partner_from_email_full_name:I,partner_from_email_address:_}=g||{},[N,D]=Vt(),i=y.useRef(),{axiosInstance:O}=ia(),{system_config:S}=Ye.useState(),C=()=>{kt(),x(!1)},H=async d=>{var F,V,se;if(d.preventDefault(),!c){l(!0);try{const q=d.target,Z=q.name.value,G=q.email.value,t=q.message.value,j=await O.post("/tools/send-email",{email_subject:"Multiple Flight Sharing with you",email_body:`<!DOCTYPE html>
        <html lang="en">
        
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <style>
                * {
                    padding: 0;
                    margin: 0;
                    box-sizing: border-box;
                    font-size: inherit;
        
                }
        
                body {
                    font-size: 16px;
                    line-height: 20px;
                }
            </style>
        
        </head>
        
        <body>
        
        
            <div
                style="min-height: 100vh; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; color: #60636b; font-size: 15px;">
        
                <div style="width: 100%; border-radius: 5px; background-color: #fff; font-weight: 500; overflow: hidden;">
        
                    <div style="margin-bottom: 14px; padding: 1rem 1rem 0 1rem;">
                        <h5 style="font-weight: bold; margin-bottom: 10px; font-size: 16px;">Hi, ${Z}</h5>
                        <p style="font-size: 14px;">${t}</p>
                    </div>
        
                    <div style="padding: 1rem;">
                        ${s.map(({flight_group:Y,price_breakdown:E})=>{var v,M;return`
                        <div style="padding: 12px; border-radius: 8px; border: 1px solid #f0f0f0;">
        
                            <div style="border: 1px solid #E5E7EB; border-radius: 8px; margin-bottom: 30px;">
                                ${Y.map(m=>`
                                <div>
                                    <div style="padding: 12px; border-bottom: 1px solid #E5E7EB;">
                                        <h6 style="font-weight: 500;">${m.routes[0].origin_airport.city} to
                                            ${m.routes.at(-1).destination_airport.city},
                                            ${le(m.routes[0].departure_time).format(S.default_date_format_print)}</h6>
                                    </div>
                                    <div style="padding: 12px;">
                                        ${m.routes.map(z=>{var Le,Pe,qe,Re,We,Ve,Ue,Ge,Qe,Ke;const{lay_over:U,operating:{carrier_name:Q,carrier:K,flight_number:de,carrier_logo:pe},aircraft:{name:re},departure_time:ee,origin_airport:{name:L},origin_terminal:w,arrival_time:f,destination_airport:{name:Ne,destination_terminal:he},flight_time:Ie,baggages:$,booking_class:ae}=z;return`
                                        <div>
        
                                            ${U!=="not-applicable"?`
                                            <div
                                                style="background-color: #f4f4f4; border-radius: 8px; padding: 4px 8px; margin-top: 30px; margin-bottom: 30px; width: fit-content; margin-left: auto; margin-right: auto;">
                                                <p style="text-align: center; font-size: 12px;"><span
                                                        style="color: #dfa33a; font-weight: 700;">Change
                                                        of Airport</span> • Change of planes • ${ze(U)} layover in ${L}</p>
                                            </div>
                                            `:""}
        
                                            <div style="display: flex; margin-bottom: 16px;">
                                                <img style="border: 1px solid #f0f0f0; width: 2.4rem; height: 2.4rem; border-radius: 50%; margin-right: 12px;"
                                                    src="https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${pe}"
                                                    alt="" />
                                                <h6 style="font-weight: 500;">${Q} <span
                                                        style="color: #9BA0B2;">${K} | ${de}</span></h6>
                                            </div>
                                            <table style="width: 100%; margin-bottom: 16px;">
                                                <tr>
                                                    <td>
                                                        <div style="text-align: center;">
                                                            <h4 style="font-size: 24px; font-weight: 600px;">${le(ee).format("HH:mm")}</h4>
                                                            <p style="font-size: 12px; color: #7a7a7a;">${le(ee).format(S.default_date_format_print)}</p>
                                                            <p style="font-size: 12px; color: #7a7a7a;">
                                                                ${L}
                                                            </p>
                                                            ${w?`
                                                            <p style="font-size: 10px; color: #b6b6b6;">Terminal
                                                                ${w}</p>
                                                            `:""}
        
                                                        </div>
        
        
                                                    </td>
                                                    <td>
                                                        <div style="flex-shrink: 0; text-align: center;">
                                                            <h6
                                                                style="margin-left: auto; margin-right: auto; font-size: 12px; font-weight: 500; width: fit-content;">
                                                                ${ze(Ie)}</h6>
        
                                                            <div
                                                                style="width: 56px; height: 2px; margin-left: auto; margin-right: auto; margin-top: 8px; margin-bottom: 8px; display: flex; background-color: #f97316;">
        
                                                            </div>
        
        
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div style="text-align: center;">
                                                            <h4 style="font-size: 24px; font-weight: 600px;">${le(f).format("HH:mm")}</h4>
                                                            <p style="font-size: 12px; color: #7a7a7a;">${le(f).format(S.default_date_format_print)}</p>
                                                            <p style="font-size: 12px; color: #7a7a7a;">
                                                                ${Ne}</p>
        
                                                            ${he?`
                                                            <p style="font-size: 10px; color: #b6b6b6;">Terminal
                                                                ${he}</p>
                                                            `:""}
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table style="width: 100%;">
                                                <tr>
                                                    <td style="width: 100%;">
                                                        <div>
                                                            <div
                                                                style="display: flex; gap: 8px; font-size: 12px; color: #0FA976;">
                                                                <p style="font-weight: 500; margin-right: 2px;">
                                                                    Baggage:
                                                                </p>
                                                                <p>
                                                                    ${(Pe=(Le=$==null?void 0:$.checked)==null?void 0:Le.ADT)!=null&&Pe.title?$.checked.ADT.title:"0 pieces"} for ADT
                                                                </p>
        
                                                                ${(Re=(qe=$==null?void 0:$.checked)==null?void 0:qe.CNN)!=null&&Re.title?`
                                                                <p>
                                                                    ${$.checked.CNN.title}{" "}
                                                                    for CNN
                                                                </p>
                                                                `:""}
        
                                                                ${(Ve=(We=$==null?void 0:$.checked)==null?void 0:We.INF)!=null&&Ve.title?`
                                                                <p>
                                                                    ${$.checked.INF.title}{" "}
                                                                    for INF
                                                                </p>
                                                                `:""}
                                                            </div>
                                                            <div
                                                                style="display: flex; gap: 8px; font-size: 12px; color: #078db6;">
                                                                <p style="font-weight: 500; margin-right: 2px;">Hand
                                                                    Baggage: ${(Ge=(Ue=$==null?void 0:$.carry_on)==null?void 0:Ue.ADT)!=null&&Ge.title?$.carry_on.ADT.title:"7 kg*"} for ADT</p>
        
                                                              
                                                                <p style="font-weight: 500; margin-right: 2px;">
                                                                    ${((Ke=(Qe=$==null?void 0:$.carry_on)==null?void 0:Qe.CNN)==null?void 0:Ke.title)||"7 kg*"}{" "}
                                                                    for
                                                                    CNN
                                                                </p>
                                                            </div>
                                                        </div>
        
                                                    </td>
                                                    <td style="width: fit-content; white-space: nowrap;">
                                                        <div>
                                                            <div style="display: flex; font-size: 12px; color: #eab308;">
                                                                <p style="font-weight: 500; margin-right: 8px;">Cabin Class:
                                                                    <span class="capitalize">${ae!=null&&ae.cabin_class?ae==null?void 0:ae.cabin_class:"N/A"}</span>
                                                                </p>
                                                            </div>
                                                            <div style="display: flex; font-size: 12px; color: #078db6;">
                                                                <p
                                                                    style="margin-right: 8px; font-weight: 500; display: flex; align-items: center;">
                                                                    Aircraft: ${re||"N/A"}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        `}).join(`
`)}
        
                                    </div>
                                </div>
                                `).join(`
`)}
        
                            </div>
        
        
                            ${h?`
                            <div style="border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 30px;">
                                <div style="padding: 12px; border-bottom: 1px solid #e0e0e0;">
                                    <h6 style="font-weight: 500;">Fare breakdown</h6>
                                </div>
                                <div style="width: 100%; padding: 12px; overflow-x: auto;">
                                    <table style="font-size: 14px; border-collapse: collapse; text-align: center; width: 100%;">
                                        <thead>
                                            <tr>
                                                <th style="padding: 8px; border: 1px solid #e0e0e0;">Fare Summary</th>
                                                <th style="padding: 8px; border: 1px solid #e0e0e0;">Base Fare</th>
                                                <th style="padding: 8px; border: 1px solid #e0e0e0;">Taxes + Fees</th>
                                                <th style="padding: 8px; border: 1px solid #e0e0e0;">Per Passenger</th>
                                                <th style="padding: 8px; border: 1px solid #e0e0e0;">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${E==null?void 0:E.map(m=>`
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;">${m.passenger_type}
                                                </td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;">
                                                    ${X(m.base_fare.currency)}
                                                    ${m.base_fare.amount}</td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;">
                                                    ${X(m.tax.currency)} ${m.tax.amount}
                                                </td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;">
                                                    ${X(m.total.currency)} (
                                                    ${m.total.amount/m.passenger_total} x
                                                    ${m.passenger_total})</td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;">
                                                    ${X(m.total.currency)} ${m.total.amount}</td>
                                            </tr>
                                            `).join(`
`)}
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th
                                                    style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;text-align: start;">
                                                    Total (
                                                    ${E.map(m=>m.passenger_total).reduce((m,z)=>m+z,0)}
                                                    Travelers)</th>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;"></td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;"></td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;"></td>
                                                <td style="padding: 8px; border: 1px solid #e0e0e0; color: #7a7a7a;">
                                                    ${X((M=(v=E[0])==null?void 0:v.total)==null?void 0:M.currency)}
                                                    ${E.map(m=>m.total.amount).reduce((m,z)=>m+z,0)}</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            `:""}
        
                        </div>
        
        
                        `}).join(`
`)}
                    </div>
                </div>
            </div>
        
        </body>
        
        </html>`,email_to:{full_name:Z,email_addresss:G},email_from:{full_name:I,email_addresss:_}});if(C(),((F=j==null?void 0:j.data)==null?void 0:F.status)==="success")pt("success","Sent!",(V=j==null?void 0:j.data)==null?void 0:V.reason);else throw new Error((se=j==null?void 0:j.data)==null?void 0:se.reason)}catch(q){pt("error","Failed!",q.message)}finally{l(!1)}}},P=async()=>{var d;try{const F=N||await D(i.current),V=F==null?void 0:F.match(/^data:image\/([^;]+)/),se=V?V[1]:null,q=F.replace(/^data:image\/[^;]+;base64,/,""),Z=await O.post("/tools/upload-base64-file",{image_type:"data",category:"flight_details",fileExtension:se,documents_image_url:q,member_id:T});if(((d=Z.data)==null?void 0:d.status)==="success"){const{ObjectURL:G}=Z.data;navigator.clipboard.writeText(G),x(!0)}}catch(F){console.error(F)}};return e.jsx("div",{className:"modal",open:n==="multiple_flight_share",children:e.jsxs("form",{onSubmit:H,className:"max-w-5xl p-0 rounded-md modal-box bg-base-200",children:[e.jsxs("div",{className:"sticky top-0 flex items-start justify-between px-4 py-2 text-white rounded-t-md bg-primary-focus",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Flight Share"}),e.jsx("button",{onClick:C,type:"button",className:"btn btn-sm btn-circle btn-ghost",children:e.jsx(na,{})})]}),e.jsxs("div",{className:"p-5 max-h-[70vh] h-full overflow-auto",children:[e.jsx("div",{className:"grid gap-4",ref:i,children:s.map(d=>{const{flight_group:F,price_breakdown:V}=d;return e.jsxs("div",{className:"p-3 space-y-4 border rounded-lg",children:[e.jsx(Os,{flight_group:F}),h&&e.jsx(Es,{price_breakdown:V})]},d==null?void 0:d.flight_key)})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 mt-8",children:[e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("label",{children:"Name:"}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 min-h-0 bg-transparent rounded input input-bordered focus:outline-none focus:border-primary",name:"name",placeholder:"Name",required:!0})]}),e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{autoComplete:"off",type:"email",className:"h-10 min-h-0 bg-transparent rounded input input-bordered focus:outline-none focus:border-primary",name:"email",placeholder:"Email",required:!0})]}),e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("label",{children:"Price Include"}),e.jsxs("select",{className:"h-10 min-h-0 bg-transparent rounded select select-bordered focus:outline-none focus:border-primary",required:!0,value:h?"yes":"no",onChange:d=>b(d.target.value==="yes"),children:[e.jsx("option",{value:"no",children:"No"}),e.jsx("option",{value:"yes",children:"Yes"})]})]}),e.jsxs("div",{className:"col-span-3 gap-2 form-control",children:[e.jsx("label",{children:"Message:"}),e.jsx("textarea",{className:"py-2 bg-transparent rounded min-h-16 input input-bordered focus:outline-none focus:border-primary",name:"message",placeholder:"Message",required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 px-4 py-2 mt-2 border-t bg-base-300",children:[e.jsxs("div",{className:"dropdown dropdown-top dropdown-end",children:[e.jsxs("div",{tabIndex:0,role:"button",className:"min-h-0 normal-case btn btn-primary h-11",children:[e.jsx($s,{})," Share"]}),e.jsx("ul",{tabIndex:0,className:"dropdown-content mb-2 z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:e.jsx("li",{className:"flex items-center justify-center px-3 py-3",children:e.jsxs("button",{type:"button",tabIndex:-1,onClick:P,className:"flex flex-col items-center justify-center gap-2 text-center duration-100 hover:!bg-primary/10 focus:!bg-primary/10 active:scale-90",children:[e.jsx(Ut,{className:"text-xl text-primary"})," ",e.jsx("span",{className:"text-xs",children:p?"Copied":"Copy Link to Clipboard"})]})})})]}),e.jsx("button",{type:"submit",className:"min-h-0 normal-case btn btn-secondary h-11",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"animate-spin"})," Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{})," Send Email"]})})]})]})})},qs=()=>{const{sortBy:n}=A.useState(p=>p.sorting),[s,c]=y.useState(!1),l=y.useRef();return y.useEffect(()=>{const p=x=>{l.current&&!l.current.contains(x.target)&&c(!1)};return document.addEventListener("click",p),()=>document.removeEventListener("mousedown",p)},[]),e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("div",{onClick:()=>c(!s),className:"h-full p-1 rounded shadow cursor-pointer bg-error/30 shadow-error/30",children:e.jsxs("div",{className:"flex items-center justify-center h-full font-medium",children:[e.jsx(Kt,{className:"text-xl"})," Other sort"]})}),e.jsx("div",{className:te("absolute z-[1] top-full mt-1 w-fit right-0 bg-base-200 rounded shadow-lg shadow-black/20",s?"block":"hidden"),children:e.jsxs("ul",{className:"rounded join join-vertical border-x",children:[e.jsxs("li",{onClick:()=>A.update(p=>{p.sorting.sortBy="latest_takeof"}),className:"justify-between font-normal capitalize cursor-pointer btn-sm btn join-item border-y-base-content/20 min-w-40",children:["Latest take-off ",n==="latest_takeof"&&e.jsx(mt,{})]}),e.jsxs("li",{onClick:()=>A.update(p=>{p.sorting.sortBy="latest_landing"}),className:"justify-between font-normal capitalize cursor-pointer btn-sm btn join-item border-y-base-content/20 min-w-40",children:["Latest landing ",n==="latest_landing"&&e.jsx(mt,{})]})]})})]})},Rs=({filterData:n})=>{const{sortBy:s}=A.useState(g=>g.sorting),{lowestPrice:c,fastestFlight:l,earliestArrivalTime:p,earliestDepartureTime:x,highestPrice:h,currency:b}=n||{};return e.jsxs("div",{className:"grid grid-cols-6 gap-2 mb-5",children:[e.jsxs("div",{onClick:()=>A.update(g=>{g.sorting.sortBy="cheapest"}),className:te("p-1 border rounded shadow cursor-pointer bg-secondary/20 shadow-secondary/20 border-transparent",s==="cheapest"&&"border-secondary"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Low Price"}),e.jsx("img",{src:`https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${c==null?void 0:c.carrier_operating}.png`,alt:"Sabre HE9L - Sandbox",className:"w-4 h-4 border rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("h4",{className:"text-xs font-medium",children:[X(b)," ",c==null?void 0:c.total_price]}),e.jsx("span",{className:"text-[10px] text-neutral",children:"|"}),e.jsx("p",{className:"text-[10px] text-neutral",children:ze(c==null?void 0:c.duration)})]})]}),e.jsxs("div",{onClick:()=>A.update(g=>{g.sorting.sortBy="fastest"}),className:te("p-1 border rounded shadow cursor-pointer bg-success/20 shadow-success/20 border-transparent",s==="fastest"&&"border-success"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Quickest"}),e.jsx("img",{src:`https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${l==null?void 0:l.carrier_operating}.png`,alt:"Sabre HE9L - Sandbox",className:"w-4 h-4 border rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("h4",{className:"text-xs font-medium",children:[X(b)," ",l==null?void 0:l.total_price]}),e.jsx("span",{className:"text-[10px] text-neutral",children:"|"}),e.jsx("p",{className:"text-[10px] text-neutral",children:ze(l==null?void 0:l.duration)})]})]}),e.jsxs("div",{onClick:()=>A.update(g=>{g.sorting.sortBy="arrival_time"}),className:te("p-1 border rounded shadow cursor-pointer bg-warning/20 shadow-warning/20 border-transparent",s==="arrival_time"&&"border-warning"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Arrival Time"}),e.jsx("img",{src:`https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${p==null?void 0:p.carrier_operating}.png`,alt:"Sabre HE9L - Sandbox",className:"w-4 h-4 border rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("h4",{className:"text-xs font-medium",children:[X(b)," ",p==null?void 0:p.total_price]}),e.jsx("span",{className:"text-[10px] text-neutral",children:"|"}),e.jsx("p",{className:"text-[10px] text-neutral",children:ze(p==null?void 0:p.duration)})]})]}),e.jsxs("div",{onClick:()=>A.update(g=>{g.sorting.sortBy="departure_time"}),className:te("p-1 border rounded shadow cursor-pointer bg-info/20 shadow-info/20 border-transparent",s==="departure_time"&&"border-info"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Depart Time"}),e.jsx("img",{src:`https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${x==null?void 0:x.carrier_operating}.png`,alt:"Sabre HE9L - Sandbox",className:"w-4 h-4 border rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("h4",{className:"text-xs font-medium",children:[X(b)," ",x==null?void 0:x.total_price]}),e.jsx("span",{className:"text-[10px] text-neutral",children:"|"}),e.jsx("p",{className:"text-[10px] text-neutral",children:ze(x==null?void 0:x.duration)})]})]}),e.jsxs("div",{onClick:()=>A.update(g=>{g.sorting.sortBy="highest_price"}),className:te("p-1 border rounded shadow cursor-pointer bg-primary/20 shadow-primary/20 border-transparent",s==="highest_price"&&"border-primary"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Highest Price"}),e.jsx("img",{src:`https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${h==null?void 0:h.carrier_operating}.png`,alt:"Sabre HE9L - Sandbox",className:"w-4 h-4 border rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("h4",{className:"text-xs font-medium",children:[X(b)," ",h==null?void 0:h.total_price]}),e.jsx("span",{className:"text-[10px] text-neutral",children:"|"}),e.jsx("p",{className:"text-[10px] text-neutral",children:ze(h==null?void 0:h.duration)})]})]}),e.jsx(qs,{})]})},Ws=({departure_date:n,journey_type:s})=>e.jsxs("div",{className:`grid gap-x-[1px] ${s==="OneWay"?"grid-cols-7":"grid-cols-8"}`,children:[s==="RoundTrip"&&e.jsx("div",{className:"bg-neutral/10 font-medium py-0.5 flex flex-col justify-center items-center",children:e.jsx(Jt,{className:"text-2xl"})}),[...Array(7)].map((c,l)=>e.jsx("div",{className:"flex items-center justify-center h-full px-2 py-0.5 text-xs font-medium bg-neutral/10",children:e.jsx("p",{children:le(n).add(l,"days").format("ddd, DDMMM'YY")})},l))]}),wt=({data:n,journey_type:s,departure_date:c,arrival_date:l,best_fare:p,setFlight:x,flight:h,setCalendarSearch:b,calendarSearch:g})=>{const{first_best_fare:T,second_best_fare:I,third_best_fare:_}=p||{},{supplier_option:N}=Ye.useState(),D=N==null?void 0:N.data;return e.jsx("div",{className:`grid gap-y-[1px] gap-x-[1px] mt-[1px] ${s==="OneWay"?"grid-cols-7":"grid-cols-8"}`,children:n==null?void 0:n.map((i,O)=>{var S;if(i===null)return e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"flex w-full h-full py-1 rounded-lg bg-base-200"})},O);if((i==null?void 0:i.data_type)==="date")return i.date?e.jsx("div",{className:"flex items-center justify-center bg-neutral/10",children:e.jsx("div",{className:"py-1 text-xs font-medium",children:e.jsx("p",{children:i.date?le(i==null?void 0:i.date).format("ddd, DDMMM'YY"):"One Way"})})},O):null;{const C=D==null?void 0:D.find(P=>{var d,F;return(P==null?void 0:P.supplier_uid)===((F=(d=i==null?void 0:i.flight_key)==null?void 0:d.split("-"))==null?void 0:F.at(0))}),H=i.calendar_flight_date===(c==null?void 0:c.at(0))&&(i.calendar_arrival_date===l||s==="OneWay");return e.jsx("div",{children:e.jsx("div",{onClick:()=>{x(i),b(!0)},className:te("flex flex-col items-center justify-center w-full py-0.5 rounded-sm text-xs cursor-pointer border-2 hover:border-primary",H&&!g||g&&(h==null?void 0:h.flight_key)===(i==null?void 0:i.flight_key)?"border-primary":"border-transparent",(i==null?void 0:i.calendar_total_sell)===T?"bg-secondary/30":(i==null?void 0:i.calendar_total_sell)===I?"bg-success/30":(i==null?void 0:i.calendar_total_sell)===_?"bg-warning/30":"bg-base-100"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:C==null?void 0:C.logo,alt:C==null?void 0:C.title,className:"w-6 h-4"}),e.jsxs("h6",{children:[X(i==null?void 0:i.calendar_total_currency)," ",(S=i==null?void 0:i.calendar_total_sell)==null?void 0:S.toLocaleString()]}),e.jsx("img",{src:`https://gtrs-airlineimages.s3.ap-southeast-1.amazonaws.com/icon/${i.calendar_carrier}.png`,alt:"",className:"h-4"})]})})},O)}})})};wt.propTypes={data:He.array,journey_type:He.string,departure_date:He.string,arrival_date:He.string};const Vs=({setCalendarSearch:n=()=>{}})=>e.jsx("button",{onClick:()=>{ve.update(s=>{s.price_calendar.isActive=!1}),n(!1)},className:"absolute z-10 flex items-center justify-center text-sm text-white rounded-full w-7 h-7 bg-red-400/50 hover:bg-red-400 -top-2 -right-2",children:e.jsx(Ns,{})}),Us=({search_parameter:n,calendarSearch:s,setCalendarSearch:c,isCalenderSearch:l})=>{var Z,G,t;const{t:p}=Xt(),{system_config:x,supplier_option:h,price_view:{show_flight_fare_rules:b,show_fare_summery:g}={}}=Ye.useState(),{search_result_version:T}=x||{},{show_supplier_option:I}=h||{},{user_data:_}=ra.useState(),{departure_date:N,arrival_date:D,...i}=n||{},{isActive:O}=ve.useState(j=>j.price_calendar),[S,C]=y.useState(null),{axiosInstance:H}=ia(),{isLoading:P,data:d={}}=xt({queryKey:["CALENDER_SEARCH",i,N,D],enabled:!!N&&!!i,queryFn:async()=>{var Y,E,v,M,m,z,U,Q,K;const j=await H.post("/flight/search-calender",{member_id:"1",...i,departure_date:N,arrival_date:D,calendar_days:"7"});if(((Y=j.data)==null?void 0:Y.status)==="success"){const de=(M=(v=(E=j.data)==null?void 0:E.data)==null?void 0:v.at(0))==null?void 0:M.calendar_flight_date,pe=(U=(z=(m=j.data)==null?void 0:m.data)==null?void 0:z.at(0))==null?void 0:U.calendar_arrival_date,{journey_type:re}=j.data,ee=[...Array(re==="RoundTrip"?56:8)].map((w,f)=>{var Ne,he;if((f+1)%8===1)return{data_type:"date",date:re==="RoundTrip"?le(pe).add(f/8+f%8,"days").format("YYYY-MM-DD"):null};{const Ie=le(de).add((f-1)%8,"days").format("YYYY-MM-DD"),$=le(pe).add(Math.floor((f-1)/8),"days").format("YYYY-MM-DD");return((he=(Ne=j.data)==null?void 0:Ne.data)==null?void 0:he.find(ae=>ae.calendar_flight_date===Ie&&(ae.calendar_arrival_date===$||re==="OneWay")))||null}}),L=[...new Set((K=(Q=ee==null?void 0:ee.map(w=>w==null?void 0:w.calendar_total_sell))==null?void 0:Q.filter(w=>!!w))==null?void 0:K.sort((w,f)=>w-f))];return{departure_date:de,new_data:ee,first_best_fare:(L==null?void 0:L.at(0))||0,second_best_fare:(L==null?void 0:L.at(1))||0,third_best_fare:(L==null?void 0:L.at(2))||0}}}});y.useEffect(()=>{var Y;const j=(Y=d==null?void 0:d.new_data)==null?void 0:Y.find(E=>(E==null?void 0:E.calendar_total_sell)===(d==null?void 0:d.first_best_fare));C(j)},[d]);const{first_best_fare:F,second_best_fare:V,third_best_fare:se}=d||{};if(y.useEffect(()=>{var j;O&&!P&&!(((j=d==null?void 0:d.new_data)==null?void 0:j.length)>0)&&(St.error("No data found"),ve.update(Y=>{Y.price_calendar.isActive=!1}))},[P,O,(Z=d==null?void 0:d.new_data)==null?void 0:Z.length]),!P&&!(((G=d==null?void 0:d.new_data)==null?void 0:G.length)>0))return null;const q=async j=>{var Y;await sa.update(E=>{E.segment[0].departure_date=j.calendar_flight_date,E.segment[0].arrival_date=j.calendar_arrival_date,E.search_option="standard"}),(Y=document.getElementById("flight_search_button"))==null||Y.click()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mb-1 -mt-6 rounded-2xl max-sm:hidden ${O||s?"block":"hidden"}`,children:e.jsxs("div",{className:"relative border rounded-lg shadow-md bg-base-200",children:[!l&&e.jsx(Vs,{setCalendarSearch:c}),((t=d==null?void 0:d.new_data)==null?void 0:t.length)>0&&e.jsxs("div",{className:"p-0.5",children:[e.jsxs("div",{className:"flex items-center justify-end gap-1 mb-1",children:[e.jsx("div",{className:"flex items-center justify-center py-1 rounded text-xs cursor-pointer min-h-[28px] w-fit font-medium",children:p("Legend")}),e.jsx("div",{className:"flex items-center justify-center py-1 text-xs cursor-pointer min-h-[28px] w-fit font-medium px-4 rounded-sm bg-secondary/30",children:p("first_best_fare")}),e.jsx("div",{className:"flex items-center justify-center py-1 text-xs cursor-pointer min-h-[28px] w-fit font-medium px-4 rounded-sm bg-success/30",children:p("second_best_fare")}),e.jsx("div",{className:"flex items-center justify-center py-1 text-xs cursor-pointer min-h-[28px] w-fit font-medium px-4 rounded-sm bg-warning/30",children:p("third_best_fare")})]}),e.jsxs("div",{className:"grid overflow-hidden text-center",children:[e.jsx(Ws,{departure_date:d==null?void 0:d.departure_date,journey_type:i==null?void 0:i.journey_type}),e.jsx(wt,{data:(d==null?void 0:d.new_data)||[],journey_type:i==null?void 0:i.journey_type,departure_date:N,arrival_date:D,calendarSearch:s,setFlight:C,setCalendarSearch:c,flight:S,best_fare:{first_best_fare:F,second_best_fare:V,third_best_fare:se}})]})]}),P&&e.jsx(rs,{})]})}),S&&s&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"font-semibold text-primary",children:le(S==null?void 0:S.calendar_flight_date).format("ddd, MMM DD YYYY")}),e.jsxs("button",{onClick:()=>q(S),className:"normal-case rounded shadow-sm h-7 btn-primary btn-xs shadow-primary/50",children:["View All Flights ",e.jsx(Zt,{})]})]}),(S==null?void 0:S.result_type)==="group"?e.jsx(ns,{flight:S},S.flight_key):e.jsx(is,{flight:S},S.flight_key),["1","4","5","7"].includes(T)&&e.jsx(ls,{}),e.jsx(os,{}),g==="YES"&&e.jsx(cs,{}),b==="YES"&&e.jsx(Bs,{}),(_==null?void 0:_.login_key)&&e.jsx(Ts,{}),e.jsx(ds,{}),e.jsx(ps,{}),e.jsx(ms,{}),e.jsx(us,{}),["supernsn","administrator"].includes(_==null?void 0:_.user_access_level)&&I==="YES"&&e.jsx(xs,{})]})]})},Gs=({filterData:n})=>{const{price:s,duration:c,no_stop_summery:l,baggage_summery:p,operating:x}=A.useState(C=>C),{min_price:h,max_price:b,priceByStops:g,priceByAirlines:T,currency:I,departureAirport:_,arrivalAirport:N}=n,{min_duration:D,max_duration:i}=n,{refundable:O,non_refundable:S}=A.useState(C=>C.fare_type);return e.jsxs("div",{className:"flex items-center gap-1 mb-4",children:[e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Price ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Price Range"}),e.jsx(jt,{min_price:h,max_price:b,price:s})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Stops ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Stops"}),e.jsx(vt,{no_stop_summery:l,currency:I,priceByStops:g})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Fare ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Fare Type"}),e.jsx(gt,{refundable:O,non_refundable:S})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Baggage ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Baggage"}),e.jsx(ft,{baggage_summery:p})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 tracking-tight normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Connecting Airport ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Connecting Airport"}),e.jsx(yt,{})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Duration ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Duration"}),e.jsx(_t,{duration:c,min_duration:D,max_duration:i})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Airline ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Airlines"}),e.jsx(ht,{airlines:n.airlines,currency:I,operating:x,priceByAirlines:T})]})]}),e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("button",{className:"min-h-0 normal-case rounded-md btn btn-sm bg-neutral/10 h-7",children:["Time ",e.jsx(ge,{})]})}),e.jsxs(ye,{className:"pt-3 v3",children:[e.jsx("h1",{className:"mb-4 font-semibold",children:"Time"}),e.jsx(bt,{departureAirport:_,arrivalAirport:N})]})]})]})},fr=()=>{var z,U,Q,K,de,pe,re,ee,L,w,f,Ne,he,Ie,$,ae,Le,Pe,qe,Re,We,Ve,Ue,Ge,Qe,Ke,la,oa,ca,da,pa,ma,ua,xa,ha,fa,_a,ja,ba;const{axiosInstance:n}=ia(),{filteredData:s}=aa.useState(r=>r),{price:c,duration:l,baggage_summery:p,no_stop_summery:x,cabin_class:h,aircraft_names:b,departure:g,arrival:T,operating:I,sorting:_,provider:N,time:{take_off:D,landing:i}}=A.useState(r=>r),{site_title:O,login_required:S,system_config:C,component_version:H}=Ye.useState(),{user_data:P}=ra.useState(),[d]=es(),F=d.get("tracking_id"),V=as(),[se,q]=y.useState(null),[Z,G]=y.useState(!0),{data:t,isLoading:j,error:Y}=xt(["SEARCH_RESULT",F,P==null?void 0:P.login_key],async()=>{var o,u,B,J,me,we,fe,ke,_e,ue,Se,Ce,Fe,Ae,$e,Oe,Ee;const r=await n.get(`/flight_logs?tracking_id=${F}&base_url=${C!=null&&C.supplier_logs_file_base_url?C==null?void 0:C.supplier_logs_file_base_url:""}&login_required=${S}`);if(!F)return V("/"),null;if(((o=r==null?void 0:r.data)==null?void 0:o.status)==="success"){const Be=await n.get("/tools/airlines-data").then(a=>Object.entries(a.data.data).map(([Je,Xe])=>({value:Je,name:Xe.airline_name})));if(r.data.airlines_data=Be.map(a=>({label:`${a.name} (${a.value})`,value:a.value})),!((u=r.data)!=null&&u.filter_data))M(!0),r.data.isCalenderSearch=!0;else{const a=Object.values(r.data.filter_data.carrier.operating);r.data.filter_data.airlines=Be.filter(ie=>a.includes(ie.value))}const ea=await n.get("/tools/airport-autosuggetion-data").then(a=>a.data);r.data.airports=ea.reduce((a,ie)=>(a[ie.code]=ie,a),{}),ve.update(a=>{var ie;a.modal.data=(ie=r.data)==null?void 0:ie.data[0]}),q((B=r.data)==null?void 0:B.message);const k={},R={},oe={},W={},ne={},Te={},Me={},De={};return(J=r.data)==null||J.data.forEach(a=>{var Xe,ga,ya,va,Na,wa,ka,Sa,Ca,Fa,Aa,$a,Oa,Ea,Ba,Ta,Ma,za,Ia,Da,Ha,Ya,La,Pa,qa,Ra,Wa,Va,Ua,Ga,Qa,Ka,Ja,Xa,Za,et,at,tt,st,rt,nt,it,lt,ot,ct;(!k[(Xe=a==null?void 0:a.filter)==null?void 0:Xe.no_of_stops]||k[(ga=a==null?void 0:a.filter)==null?void 0:ga.no_of_stops]>((ya=a==null?void 0:a.filter)==null?void 0:ya.price))&&(k[(va=a==null?void 0:a.filter)==null?void 0:va.no_of_stops]=(Na=a==null?void 0:a.filter)==null?void 0:Na.price),(!R[(wa=a==null?void 0:a.supplier)==null?void 0:wa.supplier_code]||R[(ka=a==null?void 0:a.supplier)==null?void 0:ka.supplier_code]>((Sa=a==null?void 0:a.filter)==null?void 0:Sa.price))&&(R[(Ca=a==null?void 0:a.supplier)==null?void 0:Ca.supplier_code]=(Fa=a==null?void 0:a.filter)==null?void 0:Fa.price),(!oe[(Aa=a==null?void 0:a.filter)==null?void 0:Aa.carrier_operating]||oe[($a=a==null?void 0:a.filter)==null?void 0:$a.carrier_operating]>((Oa=a==null?void 0:a.filter)==null?void 0:Oa.price))&&(oe[(Ea=a==null?void 0:a.filter)==null?void 0:Ea.carrier_operating]=(Ba=a==null?void 0:a.filter)==null?void 0:Ba.price),(!W.total_price||W.total_price>((Ta=a==null?void 0:a.filter)==null?void 0:Ta.price))&&(W.total_price=(Ma=a==null?void 0:a.filter)==null?void 0:Ma.price,W.duration=(Ia=(za=a==null?void 0:a.filter)==null?void 0:za.journey)==null?void 0:Ia.duration,W.carrier_operating=(Da=a==null?void 0:a.filter)==null?void 0:Da.carrier_operating),(!De.total_price||De.total_price<((Ha=a==null?void 0:a.filter)==null?void 0:Ha.price))&&(De.total_price=(Ya=a==null?void 0:a.filter)==null?void 0:Ya.price,De.duration=(Pa=(La=a==null?void 0:a.filter)==null?void 0:La.journey)==null?void 0:Pa.duration,De.carrier_operating=(qa=a==null?void 0:a.filter)==null?void 0:qa.carrier_operating),(!ne.duration_seconds||ne.duration_seconds>((Wa=(Ra=a==null?void 0:a.filter)==null?void 0:Ra.journey)==null?void 0:Wa.duration_seconds))&&(ne.total_price=(Va=a==null?void 0:a.filter)==null?void 0:Va.price,ne.duration_seconds=(Ga=(Ua=a==null?void 0:a.filter)==null?void 0:Ua.journey)==null?void 0:Ga.duration_seconds,ne.duration=(Ka=(Qa=a==null?void 0:a.filter)==null?void 0:Qa.journey)==null?void 0:Ka.duration,ne.carrier_operating=(Ja=a==null?void 0:a.filter)==null?void 0:Ja.carrier_operating);const ie=new Date((Za=(Xa=a==null?void 0:a.filter)==null?void 0:Xa.arrival_departure_time)==null?void 0:Za.slice(0,16)).getTime();(!Te.time||Te.time>ie)&&(Te.time=ie,Te.total_price=(et=a==null?void 0:a.filter)==null?void 0:et.price,Te.duration=(tt=(at=a==null?void 0:a.filter)==null?void 0:at.journey)==null?void 0:tt.duration,Te.carrier_operating=(st=a==null?void 0:a.filter)==null?void 0:st.carrier_operating);const Je=new Date((nt=(rt=a==null?void 0:a.filter)==null?void 0:rt.departure_departure_time)==null?void 0:nt.slice(0,16)).getTime();(!Me.time||Me.time>Je)&&(Me.time=Je,Me.total_price=(it=a==null?void 0:a.filter)==null?void 0:it.price,Me.duration=(ot=(lt=a==null?void 0:a.filter)==null?void 0:lt.journey)==null?void 0:ot.duration,Me.carrier_operating=(ct=a==null?void 0:a.filter)==null?void 0:ct.carrier_operating)}),r.data.filter_data={...r.data.filter_data,priceByStops:k,priceBySuppliers:R,priceByAirlines:oe,currency:(ke=(fe=(we=(me=r.data)==null?void 0:me.data[0])==null?void 0:we.price)==null?void 0:fe.total)==null?void 0:ke.currency,departureAirport:(Ce=(Se=(ue=(_e=r.data)==null?void 0:_e.data[0])==null?void 0:ue.search_parameter)==null?void 0:Se.departure_airport)==null?void 0:Ce.at(0),arrivalAirport:(Oe=($e=(Ae=(Fe=r.data)==null?void 0:Fe.data[0])==null?void 0:Ae.search_parameter)==null?void 0:$e.arrival_airport)==null?void 0:Oe.at(-1),lowestPrice:W,highestPrice:De,fastestFlight:ne,earliestArrivalTime:Te,earliestDepartureTime:Me},r.data}else throw{...r,message:((Ee=r.data)==null?void 0:Ee.reason)||"Request failed!"}}),E=t==null?void 0:t.isCalenderSearch,[v,M]=y.useState(E);y.useEffect(()=>{if(!j){if(v){G(!1);return}if(t){if(Object.keys(c).length===0){aa.update(o=>{o.filteredData=t.data}),G(!1);return}let r=[...t.data];r=r.filter(o=>o.filter.price>c.min_price&&o.filter.price<c.max_price||!c.min_price||!c.max_price),r=r.filter(o=>!(l!=null&&l.min_duration)||o.filter.journey.duration_seconds>l.min_duration&&o.filter.journey.duration_seconds<l.max_duration),r=r.filter(o=>{var B;const u=ce((B=o.filter.departure_departure_time)==null?void 0:B.slice(11,16));return u?u>=D.min_time&&u<=D.max_time:!0}),r=r.filter(o=>{var B;const u=ce((B=o.filter.arrival_departure_time)==null?void 0:B.slice(11,16));return u?u>=i.min_time&&u<=i.max_time:!0}),r=r.filter(o=>Object.values(N).every(u=>u===!1)?!0:N[o.supplier.supplier_code]===!0),r=r.filter(o=>Object.values(p).every(u=>u===!1)?!0:p[o.filter.baggage_summery]===!0),r=r.filter(o=>{var u,B;return Object.values(x).every(J=>J===!1)?!0:x[o.filter.no_stop_summery.includes("1")?1:(u=o.filter.no_stop_summery)!=null&&u.includes("2")?2:(B=o.filter.no_stop_summery)!=null&&B.includes("3")?3:0]===!0}),r=r.filter(o=>{var u;return Object.values(g).every(B=>B.value===!1)?!0:((u=g[o.filter.departure_timing_slot])==null?void 0:u.value)===!0}),r=r.filter(o=>{var u;return Object.values(T).every(B=>B.value===!1)?!0:((u=T[o.filter.arrival_timing_slot])==null?void 0:u.value)===!0}),r=r.filter(o=>Object.values(I).every(u=>u===!1)?!0:I[o.filter.carrier_operating]===!0),r=r.filter(o=>Object.values(h).every(u=>u===!1)?!0:h[o.filter.cabin_class]===!0),r=r.filter(o=>Object.values(b).every(u=>u===!1)?!0:b[o.filter.aircraft_name]===!0),r=r.map(o=>{var B;return{...o,package_count:((B=[...r].filter(J=>(J==null?void 0:J.filter_unique_filter_code)===(o==null?void 0:o.filter_unique_filter_code)))==null?void 0:B.length)||1}}),r.sort((o,u)=>{var B,J,me,we,fe,ke,_e,ue,Se,Ce,Fe,Ae,$e,Oe,Ee,Be;return _.sortBy==="highest_price"?u.filter.price-o.filter.price:_.sortBy==="fastest"?o.filter.journey.duration_seconds-u.filter.journey.duration_seconds:_.sortBy==="arrival_time"?ce((J=(B=o==null?void 0:o.filter)==null?void 0:B.arrival_departure_time)==null?void 0:J.slice(11,16))-ce((we=(me=u==null?void 0:u.filter)==null?void 0:me.arrival_departure_time)==null?void 0:we.slice(11,16)):_.sortBy==="departure_time"?ce((ke=(fe=o==null?void 0:o.filter)==null?void 0:fe.departure_departure_time)==null?void 0:ke.slice(11,16))-ce((ue=(_e=u==null?void 0:u.filter)==null?void 0:_e.departure_departure_time)==null?void 0:ue.slice(11,16)):_.sortBy==="latest_takeof"?ce((Ce=(Se=u==null?void 0:u.filter)==null?void 0:Se.departure_departure_time)==null?void 0:Ce.slice(11,16))-ce((Ae=(Fe=o==null?void 0:o.filter)==null?void 0:Fe.departure_departure_time)==null?void 0:Ae.slice(11,16)):_.sortBy==="latest_landing"?ce((Oe=($e=u==null?void 0:u.filter)==null?void 0:$e.arrival_departure_time)==null?void 0:Oe.slice(11,16))-ce((Be=(Ee=o==null?void 0:o.filter)==null?void 0:Ee.arrival_departure_time)==null?void 0:Be.slice(11,16)):o.filter.price-u.filter.price}),aa.update(o=>{o.filteredData=r})}G(!1)}},[c,l,t,p,x,g,T,I,_,b,h,j,N,D,i,v]),y.useEffect(()=>{var r;if(((r=t==null?void 0:t.data)==null?void 0:r.length)>0){const{search_parameter:{journey_type:o,non_stop_flight:u,baggage_option:B,booking_class:J,segment:me,travelers_adult:we,travelers_child:fe,travelers_child_age:ke,travelers_infants:_e,travelers_infants_age:ue,preferred_carrier:Se,supplier_uid:Ce,fare_type:Fe,fare_corporate_code:Ae,travelers_ptc:$e,fare_option:Oe,fare_account_code:Ee,partner_id:Be}}=t.data[0],ea=window.location.origin;sa.update(k=>{k.search_option=E?"calendar":"standard",k.partner_id=Be,k.fare_type=Fe,k.fare_corporate_code=Ae,k.fare_account_code=Ee,k.travelers_ptc=$e,k.fare_option=Oe,k.journey_type=o,k.non_stop_flight=u,k.baggage_option=B,k.booking_class=J,k.travelers_adult=Number(we)||0,k.travelers_child=Number(fe)||0,k.travelers_child_age=ke.slice(0,Number(fe))||[],k.travelers_infants=Number(_e)||0,k.travelers_infants_age=(ue==null?void 0:ue.slice(0,Number(_e)))||[],me.forEach((R,oe)=>{k.segment[oe]={...R,departure_airport_type:R.departure_airport_type,departure_airport:R.departure_airport_type==="AIRPORT"?t.airports[R.departure_airport]:Object.values(t.airports).find(W=>W.city_code===R.departure_airport),arrival_airport_type:R.arrival_airport_type,arrival_airport:R.arrival_airport_type==="AIRPORT"?t.airports[R.arrival_airport]:Object.values(t.airports).find(W=>W.city_code===R.arrival_airport)}}),k.flight_count=me.length>2?me.length:2,k.supplier_uid=Ce}),ts.get(`${ea}/airlines_list.json`).then(k=>{const R=Object.keys(k.data.data).map(oe=>{const{iata_code:W,airline_name:ne}=k.data.data[oe];return{label:`${ne} (${W})`,value:W}});sa.update(oe=>{oe.preferred_carrier=Se.map(W=>R.find(ne=>ne.value===W))||[]})})}},[t,E]);const{isActive:m}=Ze.useState();if(Y)throw Y;return e.jsxs("main",{className:"container min-h-screen pt-20 mb-12",children:[e.jsx(Ct,{children:e.jsxs("title",{children:["Flight Search",O?" - "+O:""]})}),!j&&(t!=null&&t.filter_data)?((z=H==null?void 0:H.flight)==null?void 0:z.search_box)==="2"?e.jsx(hs,{}):((U=H==null?void 0:H.flight)==null?void 0:U.search_box)==="3"?e.jsx(fs,{}):e.jsx(_s,{}):e.jsx(Cs,{}),((de=(K=(Q=t==null?void 0:t.data)==null?void 0:Q.at(0))==null?void 0:K.search_parameter)==null?void 0:de.journey_type)!=="MultiCity"&&((pe=t==null?void 0:t.data)==null?void 0:pe.length)>0&&e.jsx(Us,{search_parameter:(re=t==null?void 0:t.data[0])==null?void 0:re.search_parameter,calendarSearch:v,setCalendarSearch:M,isCalenderSearch:t==null?void 0:t.isCalenderSearch}),!Z&&(t==null?void 0:t.filter_data)&&se&&e.jsx("div",{className:"mb-4 overflow-hidden border rounded-md shadow bg-base-200 border-warning animate-pulse",children:e.jsxs("div",{className:"relative px-3 py-2 bg-warning/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"py-1 text-warning",children:e.jsx(ws,{className:"text-xl"})}),e.jsx("div",{children:e.jsx("p",{className:"text-xs font-normal",children:se})})]}),e.jsx("button",{onClick:()=>q(null),className:"absolute top-1 right-1 btn btn-ghost btn-circle btn-sm !bg-transparent",children:e.jsx(na,{})})]})}),!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-5 mb-5 lg:grid-cols-4",children:[!j&&(t!=null&&t.filter_data)?((ee=H==null?void 0:H.flight)==null?void 0:ee.search_filter)==="3"?e.jsx(Nt,{filterData:t.filter_data,additionalData:{date:(w=(L=t.data[0])==null?void 0:L.search_parameter)==null?void 0:w.departure_date[0],departure_from:(Ne=(f=t.data[0])==null?void 0:f.search_parameter)==null?void 0:Ne.departure_airport[0],arrival_to:($=(Ie=(he=t.data[0])==null?void 0:he.search_parameter)==null?void 0:Ie.arrival_airport)==null?void 0:$.at(-1),total_fight:(s==null?void 0:s.length)||0,journey_type:(Le=(ae=t.data[0])==null?void 0:ae.search_parameter)==null?void 0:Le.journey_type,tracking_id:F,supplier_uid:(qe=(Pe=t.data[0])==null?void 0:Pe.search_parameter)==null?void 0:qe.supplier_uid}}):((Re=H==null?void 0:H.flight)==null?void 0:Re.search_filter)==="2"?e.jsx(js,{filterData:t.filter_data,additionalData:{date:(Ve=(We=t.data[0])==null?void 0:We.search_parameter)==null?void 0:Ve.departure_date[0],departure_from:(Ge=(Ue=t.data[0])==null?void 0:Ue.search_parameter)==null?void 0:Ge.departure_airport[0],arrival_to:(la=(Ke=(Qe=t.data[0])==null?void 0:Qe.search_parameter)==null?void 0:Ke.arrival_airport)==null?void 0:la.at(-1),total_fight:(s==null?void 0:s.length)||0,journey_type:(ca=(oa=t.data[0])==null?void 0:oa.search_parameter)==null?void 0:ca.journey_type,tracking_id:F}}):e.jsx(bs,{filterData:t.filter_data,additionalData:{date:(pa=(da=t.data[0])==null?void 0:da.search_parameter)==null?void 0:pa.departure_date[0],departure_from:(ua=(ma=t.data[0])==null?void 0:ma.search_parameter)==null?void 0:ua.departure_airport[0],arrival_to:(fa=(ha=(xa=t.data[0])==null?void 0:xa.search_parameter)==null?void 0:ha.arrival_airport)==null?void 0:fa.at(-1),total_fight:(s==null?void 0:s.length)||0,journey_type:(ja=(_a=t.data[0])==null?void 0:_a.search_parameter)==null?void 0:ja.journey_type,tracking_id:F}}):e.jsx(Fs,{}),e.jsxs("section",{className:"lg:col-span-3",children:[!j&&(t!=null&&t.filter_data)?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{filterData:t.filter_data,currency:t==null?void 0:t.currency,search_parameter:(ba=t==null?void 0:t.data[0])==null?void 0:ba.search_parameter}),e.jsx(Gs,{filterData:t.filter_data})]}):e.jsx("div",{className:"h-20 mb-5 skeleton-box"}),j?e.jsx(As,{}):e.jsx(gs,{})]})]}),e.jsx("div",{className:te("fixed bottom-0 left-0 right-0 bg-base-200 shadow-[0_-10px_15px_-3px_rgb(0_0_0_/_0.1),_0_-4px_6px_-4px_rgb(0_0_0_/_0.1)] duration-200 transition-all",m?"translate-y-0":"translate-y-full"),children:e.jsxs("div",{className:"container flex items-center justify-end gap-4 py-4",children:[e.jsxs("button",{onClick:()=>{Ft("multiple_flight_share",s==null?void 0:s.at(0)),Ze.update(r=>{r.isActive=!1})},className:"h-10 min-h-0 font-normal text-white normal-case rounded-md btn btn-warning",children:[e.jsx(ss,{})," Share"]}),e.jsxs("button",{onClick:()=>Ze.update(r=>{r.isActive=!1}),className:"h-10 min-h-0 font-normal normal-case rounded-md hover:!text-white btn btn-warning btn-outline",children:[e.jsx(At,{})," Cancel"]})]})}),e.jsx(Ps,{})]})]})};export{fr as default};
