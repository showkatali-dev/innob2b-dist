import{o as G,e as v,m as Q,q as a,a5 as W,T as f}from"./index-dadb706a.js";import{aL as Z,d as $,e as w,o as z,c as J,ad as S,aA as X}from"./App-f576335e.js";import{D as E}from"./DropDownSelectCheckout-c70f1d2e.js";import{T as o}from"./TextInputCheckout-73110e1a.js";import{I as N}from"./InputContainerCheckout-c8c7b861.js";import{R as Y}from"./RadioInputCheckout-ed906aad.js";import{D as R}from"./DateInputCheckout-00187239.js";import{C as ee}from"./CountryWithCodeSelect-d44f80a5.js";import{P as ae}from"./PhoneNumberSelect-7080e424.js";import"./SingleSelect-261b8859.js";import"./InputDate-ba6520d0.js";import"./index-fbf9101c.js";const be=()=>{var j;const{site_title:x,component_version:u}=G.useState(),{team_member_id:m}=Z(),[s,t]=v.useState({user_access_level:"",email:"",fullname:"",isd_code:"",mobile:"",dob:"",gender:"Male",address:"",city:"",state:"",postal_code:"",country:"",status:"",expire_user:"",passwd:"",passwd2:""}),{axiosInstance:p}=$(),{user_data:{login_key:i,member_id:d}}=Q.useState(),{isLoading:q,error:_}=w({queryKey:["TEAM_MEMBER_PROFILE",i,d,m],queryFn:async()=>{var r;const e=await p.post("/user/team-member-profile",{login_key:i,member_id:d,team_member_id:m});if(((r=e==null?void 0:e.data)==null?void 0:r.status)==="success"){const{user_access_level:n,email:c,fullname:l,isd_code:A,mobile:P,dob:I,gender:U,address:k,city:L,state:T,postal_code:B,expire_user:H,country:K,status:O}=e.data.data;return t({...s,user_access_level:n||"",email:c||"",fullname:l||"",isd_code:A||"",mobile:P||"",dob:I||"",gender:U||"Male",address:k||"",city:L||"",state:T||"",postal_code:B||"",expire_user:H||"",country:K||"",status:O||""}),{status:"success"}}}}),{data:C={},isLoading:F,error:g}=w({queryKey:["USER_ACCESS_LEVEL",i,d],queryFn:async()=>(await p.post("/user/team-access-level",{login_key:i,member_id:d})).data}),[h,y]=v.useState(!1),D=z(),V=async e=>{var r,n;e.preventDefault(),y(!0);try{const c={...s,team_member_id:m,login_key:i,member_id:d},l=await p.post("/user/team-member-profile-update",c);((r=l==null?void 0:l.data)==null?void 0:r.status)==="success"?(f("success","Success!",l.data.reason),t({user_access_level:"",email:"",fullname:"",isd_code:"",mobile:"",dob:"",gender:"Male",address:"",city:"",state:"",postal_code:"",country:"",expire_user:"",status:"",passwd:"",passwd2:""}),D("/settings/team")):f("error","Update Failed",((n=l==null?void 0:l.data)==null?void 0:n.reason)||"Something went wrong")}catch(c){f("error","Update Failed",c.message)}finally{y(!1)}};if(_)throw _;if(g)throw g;const{user_access_level:M}=C,b=(j=u==null?void 0:u.general)==null?void 0:j.team;return a.jsxs(a.Fragment,{children:[a.jsx(W,{children:a.jsxs("title",{children:["Updated ",b==="2"?"Team Member":"User"," Profile",x?" - "+x:""]})}),a.jsx("div",{className:J("mb-8 sm:col-span-3 lg:col-span-4",b==="3"&&"bg-base-200 p-5"),children:!F&&!q?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-1",children:a.jsxs("h5",{className:"py-3 text-lg font-medium",children:["Update ",b==="2"?"Team Member":"User"," Profile"]})}),a.jsxs("form",{onSubmit:V,className:"mb-8",children:[a.jsx("div",{className:"mb-4 border-l-4 border-l-[#1D376A] p-2 bg-base-300",children:a.jsx("h1",{className:"text-sm uppercase tracking-wider text-[#1D376A] font-medium",children:"Account Info"})}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsx(E,{label:"Select User Type",isRequired:!0,options:M.map(e=>({label:e.title,value:e.code})),action:e=>{var r;return t({...s,user_access_level:((r=e[0])==null?void 0:r.value)||""})},defaultValue:s.user_access_level,placeholder:"Select"}),a.jsx(E,{label:"Select Status",isRequired:!0,options:[{label:"Active",value:"active"},{label:"Disable",value:"disable"}],defaultValue:s.status,action:e=>{var r;return t({...s,status:((r=e[0])==null?void 0:r.value)||""})},placeholder:"Select"}),a.jsx(o,{label:"Email Address",type:"email",readOnly:!0,defaultValue:s.email,placeholder:"Enter Email Address"}),a.jsx(N,{label:"Mobile Number",isRequired:!0,defaultValue:String(s.isd_code||"")+String(s.mobile||""),action:e=>t({...s,isd_code:(e==null?void 0:e.isd_code)||"",mobile:(e==null?void 0:e.mobile)||""}),placeholder:"Enter Mobile Number",Input:ae}),a.jsx(o,{label:"Password",type:"password",isRequired:!1,defaultValue:s.passwd,action:e=>t({...s,passwd:e.target.value}),placeholder:"Enter Password"}),a.jsx(o,{label:"Confirm Password",type:"password",isRequired:!1,defaultValue:s.passwd2,action:e=>t({...s,passwd2:e.target.value}),placeholder:"Enter Confirm Password"}),a.jsx(R,{label:"Expire Date",isRequired:!1,defaultValue:s.expire_user,action:e=>t({...s,expire_user:e}),placeholder:"Select Expire Date"})]}),a.jsx("div",{className:"my-4 border-l-4 border-l-[#1D376A] p-2 bg-base-300",children:a.jsx("h1",{className:"text-sm uppercase tracking-wider text-[#1D376A] font-medium",children:"Personal Info"})}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:[a.jsx(o,{label:"Full Name",isRequired:!0,defaultValue:s.fullname,action:e=>t({...s,fullname:e.target.value}),placeholder:"Enter Full Name"}),a.jsx(Y,{label:"Gender",isRequired:!0,defaultValue:s.gender,action:e=>t({...s,gender:e.target.value}),options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]}),a.jsx(R,{label:"Date of Birth",isRequired:!0,defaultValue:s.dob,action:e=>t({...s,dob:e}),placeholder:"Select Date of birth"}),a.jsx(o,{label:"Address",isRequired:!0,defaultValue:s.address,action:e=>t({...s,address:e.target.value}),placeholder:"Enter Address"}),a.jsx(o,{label:"City",isRequired:!0,defaultValue:s.city,action:e=>t({...s,city:e.target.value}),placeholder:"Enter City"}),a.jsx(o,{label:"State",isRequired:!0,defaultValue:s.state,action:e=>t({...s,state:e.target.value}),placeholder:"Enter State"}),a.jsx(N,{label:"Country",isRequired:!0,defaultValue:s.country,action:e=>{var r;return t({...s,country:((r=e[0])==null?void 0:r.value)||""})},placeholder:"Select Country",Input:ee}),a.jsx(o,{label:"Postal Code",isRequired:!0,defaultValue:s.postal_code,action:e=>t({...s,postal_code:e.target.value}),placeholder:"Enter Zip or Postal Code"})]}),a.jsx("button",{type:"submit",className:`h-10 min-h-0 mt-4 normal-case border-transparent rounded-md btn bg-primary/70 btn-primary ${h?"pointer-events-none":""}`,children:h?a.jsxs(a.Fragment,{children:[a.jsx(S,{className:"mr-2 animate-spin"})," Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(X,{})," Update"]})})]})]}):a.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl",children:[a.jsx(S,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]})})]})};export{be as default};
