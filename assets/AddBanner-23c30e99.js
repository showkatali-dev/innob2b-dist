import{m as S,e as c,l as A,u as F,o as e,a6 as B,U as p,bb as w}from"./index-dd20920c.js";import{s as I}from"./index.esm-64083ebb.js";import{a as C,b as E,x as T,n as k}from"./App-4a5e8587.js";import{F as R}from"./FileInputBoxForSettings-0d4bfed3.js";const U=()=>{const{site_title:o,component_version:x}=S.useState(),{general:r}=x||{},[s,i]=c.useState({banner_position:"banner-slide",title:"",summery:"",status:"active",link:""}),[h,g]=c.useState(null),{axiosInstance:d}=C(),{user_data:{login_key:j,member_id:u}}=A.useState(),v=F(),N=E(),y=async a=>{var n;const t=await w(a);if(t){const l=await d.post("/secure?pathName=/tools/upload-cdn",{...t,member_id:u,category:"partner-banner"});if(((n=l.data)==null?void 0:n.status)==="success")return l.data.ObjectURL}},[_,m]=c.useState(!1),f=async a=>{var t;a.preventDefault(),m(!0);try{const n=await y(h),l={...s,login_key:j,member_id:u,ads_image_url:n,link:n},b=await d.post("/secure?pathName=/partner/partner-ads-add",l);((t=b.data)==null?void 0:t.status)==="success"&&(p("success","Success!",b.data.reason),v.invalidateQueries(["PARTNER_ADDS_LIST"]),N("/settings/manage-banner"))}catch(n){console.error(n),p("error","Failed!",n.message)}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs("title",{children:["Add Banner",o?" - "+o:""]})}),e.jsxs("form",{onSubmit:f,className:T("mb-8 sm:col-span-3 lg:col-span-4",(r==null?void 0:r.team)==="2"&&"bg-base-200 p-5"),children:[e.jsx("div",{className:"flex flex-col justify-between gap-4 mb-2 md:items-center md:flex-row",children:e.jsx("div",{className:"py-3 mb-1",children:e.jsx("h5",{className:"text-lg font-medium",children:"Add Banner Image"})})}),e.jsxs("div",{className:"grid gap-5 mb-5 sm:grid-cols-3",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Banner Type"}),e.jsxs("select",{className:"sb-input",value:s==null?void 0:s.banner_position,onChange:a=>i({...s,banner_position:a.target.value}),children:[e.jsx("option",{value:"banner-slide",children:"Banner Slide"}),e.jsx("option",{value:"banner-big",children:"Big Banner"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Banner Title"}),e.jsx("input",{className:"sb-input",value:s==null?void 0:s.title,onChange:a=>i({...s,title:a.target.value}),placeholder:"Enter Banner Title"})]}),e.jsx(R,{label:"Banner Image",action:a=>g(a.target.files[0]),isLinkActive:!1,accept:"image/*"}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Status"}),e.jsxs("select",{className:"sb-input",value:s==null?void 0:s.status,onChange:a=>i({...s,status:a.target.value}),children:[e.jsx("option",{value:"disable",children:"Disable"}),e.jsx("option",{value:"active",children:"Active"})]})]}),e.jsxs("div",{className:"sm:col-span-3 sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Summary Description"}),e.jsx("textarea",{className:"sb-input !min-h-16",value:s==null?void 0:s.summery,onChange:a=>i({...s,summery:a.target.value}),placeholder:"Enter Summary Description"})]})]}),e.jsx("button",{type:"submit",className:"h-10 min-h-0 rounded btn btn-primary h10 w-36 btn-outline",children:_?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"animate-spin"})," Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{})," Add"]})})]})]})};export{U as default};
