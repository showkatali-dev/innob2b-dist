import{q as e,a2 as y,aN as g,e as m,ab as f,o as w,P as v,aO as D}from"./index-5c0e37d6.js";import{P as d,u as x}from"./App-1de86f53.js";import{F as R}from"./index-9a93c7ae.js";const _=({occupancy:i,index:s,storeName:u})=>{const{t:o}=x(),l=u==="hotel_search_options"?y:g;return e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium",children:o("adults")}),e.jsxs("p",{className:"text-xs",children:[">12 ",o("years")]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{i.adult>1&&l.update(n=>{n.occupancies[s].adult=i.adult-1})},type:"button",disabled:i.adult===1,className:"rounded minusBtn btn btn-xs btn-primary",children:"-"}),e.jsx("span",{className:"value",children:i.adult}),e.jsx("button",{onClick:()=>i.adult<6&&l.update(n=>{n.occupancies[s].adult=i.adult+1}),type:"button",className:"rounded plusBtn btn btn-xs btn-primary",children:"+"})]})]})};_.propTypes={occupancy:d.object.isRequired,index:d.number.isRequired,storeName:d.string.isRequired};const N=({occupancy:i,index:s,storeName:u})=>{const o=u==="hotel_search_options"?y:g,l=i.child||0,n=i.child_age||[],{t}=x();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3 child-container",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium",children:t("children")}),e.jsxs("p",{className:"text-xs",children:["0-12 ",t("years")]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{l>0&&o.update(r=>{r.occupancies[s].child=l-1,r.occupancies[s].child_age.pop()})},type:"button",className:"rounded minusBtn btn btn-xs btn-primary",disabled:l===0,children:"-"}),e.jsx("span",{className:"value",children:l}),e.jsx("button",{onClick:()=>{i.child<6&&o.update(r=>{r.occupancies[s].child=l+1,r.occupancies[s].child_age.push(10)})},type:"button",className:"rounded plusBtn btn btn-xs btn-primary",children:"+"})]})]}),n.length>0&&e.jsxs("div",{className:"w-full mb-2",children:[e.jsx("h6",{className:"mb-2 text-xs font-medium",children:t("children_age")}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map((r,a)=>e.jsxs("select",{className:"select select-xs select-bordered rounded bg-transparent w-full focus:outline-0 font-normal !text-xs",defaultValue:r,onChange:c=>o.update(p=>{p.occupancies[s].child_age[a]=c.target.value}),children:[e.jsxs("option",{value:"17",children:["17 ",t("years_old")]}),e.jsxs("option",{value:"16",children:["16 ",t("years_old")]}),e.jsxs("option",{value:"15",children:["15 ",t("years_old")]}),e.jsxs("option",{value:"14",children:["14 ",t("years_old")]}),e.jsxs("option",{value:"13",children:["13 ",t("years_old")]}),e.jsxs("option",{value:"12",children:["12 ",t("years_old")]}),e.jsxs("option",{value:"11",children:["11 ",t("years_old")]}),e.jsxs("option",{value:"10",children:["10 ",t("years_old")]}),e.jsxs("option",{value:"9",children:["9 ",t("years_old")]}),e.jsxs("option",{value:"8",children:["8 ",t("years_old")]}),e.jsxs("option",{value:"7",children:["7 ",t("years_old")]}),e.jsxs("option",{value:"6",children:["6 ",t("years_old")]}),e.jsxs("option",{value:"5",children:["5 ",t("years_old")]}),e.jsxs("option",{value:"4",children:["4 ",t("years_old")]}),e.jsxs("option",{value:"3",children:["3 ",t("years_old")]}),e.jsxs("option",{value:"2",children:["2 ",t("years_old")]}),e.jsxs("option",{value:"1",children:["1 ",t("years_old")]}),e.jsx("option",{value:"0",children:t("below_1_year")})]},a))})]})]})};N.propTypes={occupancy:d.object.isRequired,index:d.number.isRequired,storeName:d.string.isRequired};const q=({storeName:i})=>{const s=i==="hotel_search_options"?y:g,[u,o]=m.useState(!1),l=m.useRef(),{occupancies:n}=s.useState(),t=n.reduce((a,c)=>(a.adult+=c.adult,a.child+=c.child,a),{adult:0,child:0});m.useEffect(()=>{const a=c=>{l.current&&!l.current.contains(c.target)&&c.target.classList.contains("removeBtn")===!1&&o(!1)};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[]);const{t:r}=x();return e.jsxs("div",{ref:l,className:`relative passengerContainer group sb-input-container ${u?"active":""}`,children:[e.jsx("label",{className:"sb-label",children:r("travelers")}),e.jsx("input",{autoComplete:"off",onClick:()=>o(!0),type:"text",className:"sb-input",value:`${t.adult+t.child} guest(s) in ${n.length} room`,readOnly:!0}),e.jsxs("div",{className:"absolute top-full right-0 z-10 min-w-full py-1 origin-['50%_0'] border rounded mt-0.5 shadow-xl w-max max-w-[360px] lists bg-base-200 transition-all scale-90 -translate-y-8 opacity-0 pointer-events-none group-[.active]:pointer-events-auto group-[.active]:scale-100 group-[.active]:translate-y-0 group-[.active]:opacity-100 text-sm",style:{transition:"all .2s cubic-bezier(.5,0,0,1.25), opacity .15s ease-out"},children:[e.jsx("div",{className:"flex flex-col px-5 py-2 divide-y",children:n.map((a,c)=>e.jsxs("div",{className:"pt-3 rounded-none collapse",children:[e.jsx("input",{type:"radio",name:"occupancy",defaultChecked:c+1===n.length,className:"min-h-0"}),e.jsxs("div",{className:"flex items-center justify-between min-h-0 gap-4 p-0 mb-2 collapse-title",children:[e.jsxs("h6",{className:"font-medium room",children:[r("room")," ",c+1]}),e.jsx("button",{type:"button",onClick:()=>s.update(p=>{p.occupancies=p.occupancies.filter(j=>j.id!==a.id)}),className:"link text-sm !no-underline link-error disabled:cursor-auto disabled:opacity-0 removeBtn z-[2]",disabled:n.length<2,children:r("remove")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 p-0 collapse-content",children:[e.jsx(_,{storeName:i,occupancy:a,index:c}),e.jsx(N,{storeName:i,occupancy:a,index:c})]})]},a.id))}),e.jsx("hr",{className:"mb-2"}),e.jsxs("div",{className:"flex gap-2 px-2",children:[e.jsx("button",{onClick:()=>n.length<9&&s.update(a=>{a.occupancies.push({id:f(),adult:1,child:0,child_age:[]})}),className:"flex-1 h-10 min-h-0 normal-case rounded btn btn-primary btn-outline whitespace-nowrap",children:r("add_room")}),e.jsx("button",{onClick:()=>o(!1),type:"button",className:"flex-1 h-10 min-h-0 normal-case rounded btn btn-primary",children:r("apply")})]})]})]})};q.propTypes={storeName:d.string.isRequired};const Y=f(),S=({className:i,defaultValue:s,minDate:u,action:o,...l})=>{const[n,t]=m.useState(Y),[r,a]=m.useState(null),{system_config:c}=w.useState(),{default_date_format:p}=c||{};m.useEffect(()=>{(s==null?void 0:s.length)===2&&s[1]!=="Invalid date"&&t(f())},[s]);const j=h=>{h.length===1?a(h[0]):h.length===2&&a(null),o(h.map(b=>v(b).format("YYYY-MM-DD")))};return m.createElement(R,{...l,key:n,options:{minDate:u||null,maxDate:r?v(r).add(29,"days").toDate():null,defaultDate:s,disableMobile:!0,altInput:!0,altFormat:p||"F j, Y",mode:"range"},onChange:j,render:({defaultValue:h,value:b,...k},C)=>e.jsx("input",{autoComplete:"off",className:i,defaultValue:h,ref:C,value:b,placeholder:`${p||"F j, Y"} to ${p||"F j, Y"}`,...k})})},F=({label:i,defaultValue:s,minDate:u,action:o})=>{const{t:l}=x();return e.jsxs("div",{className:"sb-input-container ",children:[e.jsxs("label",{className:"sb-label",children:[i," ",(s==null?void 0:s.length)>1&&(s==null?void 0:s.every(n=>!!n&&n!=="Invalid date"))&&e.jsxs("span",{className:"text-xs text-neutral",children:["(",D(...s.map(n=>v(n).format("YYYY-MM-DD")))," ",l("night"),")"]})]}),e.jsx(S,{className:"sb-input",defaultValue:s,minDate:u,type:"text",action:o})]})};F.propTypes={label:d.string.isRequired,defaultValue:d.array,minDate:d.string.isRequired,action:d.func.isRequired};export{S as I,q as O,F as S};
