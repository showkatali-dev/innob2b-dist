import{o as e,m as k,O as T,G as b,e as A,l as B,Q as M,a0 as G,X,Y as J}from"./index.js";import{P as S,au as H,a6 as D,av as F,b as L,c as O,ac as $,r as W,s as Z,G as ee,aw as K,ax as te,ay as se,az as ae,aA as ne,aB as q,aC as re}from"./App.js";import{I as le}from"./InputDate.js";import{P as ie}from"./PhoneNumberSelect.js";import{N as ce}from"./NoResult.js";import"./shortcut-buttons-flatpickr.min.js";import"./index.esm4.js";const v=({Icon:i,label:a,value:t})=>e.jsxs("div",{className:"p-5 space-y-4 duration-150 border cursor-pointer border-neutral/20 rounded-xl hover:bg-primary hover:text-white bg-base-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"w-7 h-7 grid place-content-center rounded-full text-neutral bg-[#EFE5FB] text-lg",children:e.jsx(i,{})}),e.jsx("div",{className:"flex items-center justify-between gap-6",children:e.jsx("h1",{className:"text-lg font-semibold whitespace-nowrap",children:t})})]}),e.jsx("p",{className:"text-sm opacity-90",children:a})]});v.propTypes={Icon:S.elementType.isRequired,label:S.string.isRequired,value:S.any.isRequired};const U=({data:i})=>{const{system_config:a}=k.useState();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"flex-1 px-4 py-3 rounded-md bg-primary/10",children:e.jsxs("h6",{className:"text-sm font-medium",children:[e.jsx(H,{})," Latest Ledger History"]})}),e.jsxs(D,{to:"/finance/ledger",className:"btn btn-primary bg-[#7a7fdc22] !text-primary hover:!text-white normal-case border-0",children:[e.jsx(H,{})," View ledger"]})]}),e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Sl"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Trs Type"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Date & Time"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Trx Amount"})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,l)=>e.jsxs("tr",{children:[e.jsx("th",{className:"border text-start",children:l+1}),e.jsx("td",{className:"uppercase",children:t.trx_type}),e.jsx("td",{children:T(new Date(t.timestamp*1e3)).format(`ddd, ${a.default_date_format_print} hh:mm A`)}),e.jsxs("td",{children:[b(t.default_currency)," ",t.trx_amount]})]},t.Id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",className:"py-2 text-sm text-center text-error",children:"no data available"})})})]})})]})};U.propTypes={data:S.array.isRequired};const Q=({data:i})=>{const{system_config:a}=k.useState();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"flex-1 px-4 py-3 rounded-md bg-primary/10",children:e.jsxs("h6",{className:"text-sm font-medium",children:[e.jsx(F,{})," Latest Invoices"]})}),e.jsxs(D,{to:"/finance/invoice",className:"btn btn-primary bg-[#7a7fdc22] !text-primary hover:!text-white normal-case border-0",children:[e.jsx(F,{})," View Invoices"]})]}),e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Sl"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Invoice ID"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Date & Time"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Invoice Amount"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Status"})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,l)=>e.jsxs("tr",{children:[e.jsx("th",{className:"border text-start",children:l+1}),e.jsx("td",{className:"uppercase",children:t.invoice_id}),e.jsx("td",{children:T(new Date(t.timestamp*1e3)).format(`ddd, ${a.default_date_format_print} hh:mm A`)}),e.jsxs("td",{children:[b(t.default_currency)," ",t.invoice_amount]}),e.jsx("td",{children:t.status})]},t.Id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",className:"py-2 text-sm text-center text-error",children:"no data available"})})})]})})]})};Q.propTypes={data:S.array.isRequired};const V=({data:i})=>{const{system_config:a}=k.useState();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"flex-1 px-4 py-3 rounded-md bg-primary/10",children:e.jsxs("h6",{className:"text-sm font-medium",children:[e.jsx(F,{})," Latest Refunds History"]})}),e.jsxs(D,{to:"/finance/refunds",className:"btn btn-primary bg-[#7a7fdc22] !text-primary hover:!text-white normal-case border-0",children:[e.jsx(F,{})," View Refunds"]})]}),e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Sl"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Ref. Id"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Date & Time"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Requested"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Refund"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Status"})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,l)=>e.jsxs("tr",{children:[e.jsx("th",{className:"border text-start",children:l+1}),e.jsx("td",{className:"uppercase",children:t.ref_id}),e.jsx("td",{children:T(new Date(t.timestamp*1e3)).format(`${a.default_date_format_print} hh:mmA`)}),e.jsxs("td",{children:[b(t.default_currency)," ",t.req_amount]}),e.jsxs("td",{children:[b(t.default_currency)," ",t.ref_amount]}),e.jsx("td",{children:e.jsx("span",{className:"text-[10px] bg-[#ffb55322] p-1 rounded text-[#ffb553]",children:t.payment_status})})]},t.Id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",className:"py-2 text-sm text-center text-error",children:"no data available"})})})]})})]})};V.propTypes={data:S.array.isRequired};const Y=({data:i})=>{const{system_config:a}=k.useState();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"flex-1 px-4 py-3 rounded-md bg-primary/10",children:e.jsxs("h6",{className:"text-sm font-medium",children:[e.jsx(F,{})," Latest Payment History"]})}),e.jsxs(D,{to:"/finance/payments",className:"btn btn-primary bg-[#7a7fdc22] !text-primary hover:!text-white normal-case border-0",children:[e.jsx(F,{})," View Payments"]})]}),e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Sl"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Payment Type"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Payment Time"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Payment Amount"}),e.jsx("th",{className:"text-sm text-start bg-neutral/10 text-base-content",children:"Status"})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,l)=>e.jsxs("tr",{children:[e.jsx("th",{className:"border text-start",children:l+1}),e.jsx("td",{className:"uppercase",children:t.payment_type}),e.jsx("td",{children:T(new Date(t.timestamp*1e3)).format(`${a.default_date_format_print} hh:mmA`)}),e.jsx("td",{children:b(t.default_currency)+t.payment_amount}),e.jsx("td",{children:e.jsx("span",{className:"text-[10px] bg-[#ffb55322] p-1 rounded text-[#ffb553]",children:t.payment_status})})]},t.Id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",className:"py-2 text-sm text-center text-error",children:"no data available"})})})]})})]})};Y.propTypes={data:S.array.isRequired};const de=()=>{const[i,a]=A.useState(!1),[t,l]=A.useState({payment_type:"CASH",trx_date:"",trx_amount:"",booking_reference_id:"",trx_notes:"",payment_attachment:null}),{axiosInstance:j}=L(),{user_data:{login_key:x,member_id:u}}=B.useState(),{data:y=[]}=O({queryKey:["OFFLINE_PAYMENT_OPTIONS",x,u],enabled:!!x&&!!u,queryFn:async()=>{var r;const s=await j.post("/finance/offline-payment-info",{login_key:x,member_id:u});if(((r=s.data)==null?void 0:r.status)==="success")return s.data.data}}),N=async()=>{var r,m,f,g;a(!0);let s=null;try{if(t.payment_attachment){const n=new FormData;n.append("documents_image_url",t.payment_attachment),n.append("member_id",u),n.append("image_type","file"),n.append("category","payment-slip");const p=await j.post("/tools/upload-cdn",n);((r=p==null?void 0:p.data)==null?void 0:r.status)==="success"&&(s=p.data.ObjectURL)}const d=await j.post("/finance/payment-request-submit",{...t,payment_attachment:s,login_key:x,member_id:u});if(((m=d==null?void 0:d.data)==null?void 0:m.status)==="success")document.getElementById("add_payment_modal").close(),M("success","Submitted!",(f=d==null?void 0:d.data)==null?void 0:f.reason);else throw new Error(((g=d.data)==null?void 0:g.reason)||"Payment request failed!")}catch(d){M("error","Failed",d.message)}finally{a(!1)}},c=A.useMemo(()=>y.filter(s=>t.payment_type==="MFS"&&s.payment_type==="MFS"||t.payment_type!=="MFS"&&s.payment_type==="BANK"),[y,t.payment_type]);return A.useEffect(()=>{["BANK-CHEQUE","BANK-CASH","BANK-TRANSFER","MFS"].includes(t.payment_type)?l(s=>{var r,m;return{...s,trx_notes:`${(r=c==null?void 0:c.at(0))==null?void 0:r.bank_name}-${(m=c==null?void 0:c.at(0))==null?void 0:m.account_number}`}}):l(s=>({...s,trx_notes:""}))},[t.payment_type,c]),e.jsx("dialog",{id:"add_payment_modal",className:"!z-20 modal",children:e.jsxs("div",{className:"max-w-xl p-0 rounded-md modal-box",children:[e.jsx("div",{className:"sticky top-0 left-0 px-4 pt-2 pb-1 bg-primary-focus",children:e.jsxs("form",{method:"dialog",className:"flex justify-between px-2 py-1 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Add Payment - Credit Entry"}),e.jsx("button",{className:"text-white btn btn-sm btn-circle btn-ghost",children:"✕"})]})}),e.jsx("div",{className:"max-h-[60vh] h-full overflow-auto",children:e.jsxs("div",{className:"px-4 py-2 space-y-5",children:[e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Payment Type"}),e.jsxs("select",{className:"h-10 min-h-0 text-sm rounded select select-bordered focus:outline-none",value:t.payment_type,onChange:s=>l({...t,payment_type:s.target.value}),children:[e.jsx("option",{value:"CASH",children:"Cash Payment"}),e.jsx("option",{value:"BANK-CHEQUE",children:"Bank Cheque Deposit"}),e.jsx("option",{value:"BANK-CASH",children:"Bank Cash Deposit"}),e.jsx("option",{value:"BANK-TRANSFER",children:"Bank Transfer "}),e.jsx("option",{value:"MFS",children:"Mobile Financial Service"}),e.jsx("option",{value:"OTHER",children:"Others Type"})]})]}),["BANK-CHEQUE","BANK-CASH","BANK-TRANSFER","MFS"].includes(t.payment_type)&&e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Offline Payment Type"}),e.jsx("select",{className:"h-10 min-h-0 text-sm capitalize rounded select select-bordered focus:outline-none",value:t.trx_notes,onChange:s=>l({...t,trx_notes:s.target.value}),children:c==null?void 0:c.map(s=>e.jsxs("option",{value:`${s==null?void 0:s.bank_name}-${s==null?void 0:s.account_number}`,children:[s==null?void 0:s.bank_name,"-",s==null?void 0:s.account_number]},s==null?void 0:s.bank_name))})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Transaction Date"}),e.jsx(le,{className:"w-full h-10 min-h-0 text-sm rounded input input-bordered focus:outline-none",defaultValue:t.trx_date,action:s=>l({...t,trx_date:s}),isStatic:!0,showMonths:1})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Payment Amount"}),e.jsx("input",{autoComplete:"off",type:"text",value:t.trx_amount,onChange:s=>l({...t,trx_amount:s.target.value}),className:"h-10 min-h-0 text-sm rounded input input-bordered focus:outline-none"})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Reference Number"}),e.jsx("input",{autoComplete:"off",type:"text",value:t.booking_reference_id,onChange:s=>l({...t,booking_reference_id:s.target.value}),className:"h-10 min-h-0 text-sm rounded input input-bordered focus:outline-none"})]}),["BANK-CHEQUE","BANK-CASH","BANK-TRANSFER","MFS"].includes(t.payment_type)===!1&&e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Reference Notes"}),e.jsx("textarea",{value:t.trx_notes,onChange:s=>l({...t,trx_notes:s.target.value}),className:"p-2 text-sm rounded min-h-16 input input-bordered focus:outline-none"})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Payment Slip"}),e.jsx("input",{autoComplete:"off",type:"file",className:"h-10 min-h-0 text-sm rounded file-input file-input-bordered focus:outline-none",onChange:s=>l({...t,payment_attachment:s.target.files[0]})})]})]})}),e.jsxs("div",{className:"sticky bottom-0 left-0 flex justify-end w-full gap-2 px-4 pt-1 pb-4 bg-base-100",children:[e.jsx("hr",{className:"mb-2"}),e.jsx("button",{onClick:N,className:`h-10 min-h-0 normal-case btn btn-primary ${i?"pointer-events-none":""}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 animate-spin"})," Processing..."]}):"Add Payment"}),e.jsx("button",{onClick:()=>document.getElementById("add_payment_modal").close(),className:"h-10 min-h-0 normal-case btn bg-neutral/20 text-neutral hover:bg-neutral/20",children:"Close"})]})]})})},oe=()=>{var d;const{system_config:i}=k.useState(),{checkout_url:a}=i||{},[t,l]=A.useState(!1),{member_id:j,fullname:x,email:u,partner_id:y,default_currency:N,isd_code:c,mobile:s}=((d=B.useState())==null?void 0:d.user_data)||{},[r,m]=A.useState({isd_code:c,contact_number:s,service_details:"",name:x,email:u,amount:""}),f=W(),g=async n=>{var E,P;if(n.preventDefault(),t)return;l(!0);const{name:p,email:C,isd_code:I,contact_number:o,amount:h,service_details:w}=r,R={name:p,email:C,member_id:j,ftm_partner_id:y,isd_code:I,contact_number:o,service_details:w,collection_type:"deposit",amount:h,currency:N,tracking_id:G().slice(0,8),redirect_url:origin+"/online-payment/status"};try{const _=await Z.post(`${a}/request`,R);if(document.getElementById("deposit_modal").close(),((E=_.data)==null?void 0:E.status)==="success"){const{pay_tracking_id:z}=_.data;f(`/online-payment?pay_tracking_id=${z}`,{replace:!0})}else throw new Error(((P=_==null?void 0:_.data)==null?void 0:P.reason)||"Request failed!")}catch(_){M("error","Failed!",_.message)}finally{l(!1)}};return e.jsx("dialog",{id:"deposit_modal",className:"modal",children:e.jsxs("form",{onSubmit:g,className:"max-w-3xl p-4 modal-box",children:[e.jsx("h3",{className:"pb-2 text-lg font-semibold",children:"Pay a Deposit"}),e.jsx("hr",{className:"mb-4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-4 gap-x-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-neutral",children:"Enter your name."}),e.jsx("input",{autoComplete:"off",type:"text",name:"name",className:"w-full h-10 text-sm rounded input input-bordered min-h-8 focus:outline-0 focus:border-neutral/30 ",value:r.name,onChange:n=>m({...r,name:n.target.value}),required:!0,placeholder:"Name"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-neutral",children:"Enter Your Email."}),e.jsx("input",{autoComplete:"off",type:"text",name:"receiver_id",className:"w-full h-10 text-sm rounded input input-bordered min-h-8 focus:outline-0 focus:border-neutral/30 ",value:r.email,onChange:n=>m({...r,email:n.target.value}),required:!0,placeholder:"Email"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-neutral",children:"Mobile"}),e.jsx(ie,{placeholder:"Enter Mobile Number",className:"!h-10 !text-sm !bg-transparent !rounded input !input-bordered focus:outline-0 min-h-8 !w-full",defaultValue:String(r.isd_code||"")+String(r.contact_number||""),action:n=>m({...r,isd_code:n==null?void 0:n.isd_code,contact_number:n==null?void 0:n.mobile})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-neutral",children:"Input Amount."}),e.jsxs("div",{className:"w-full join",children:[e.jsx("span",{className:"flex items-center px-4 border rounded-l bg-neutral/10 text-neutral join-item border-neutral/20",children:N}),e.jsx("input",{autoComplete:"off",type:"text",name:"amount",className:"flex-1 w-full h-10 text-sm rounded input input-bordered min-h-8 focus:outline-0 focus:border-neutral/30 hide_arrow_key join-item",value:r.amount||"",onChange:n=>m({...r,amount:n.target.value}),required:!0,placeholder:"Amount"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-neutral",children:"Service Details."}),e.jsx("textarea",{type:"text",name:"service_details",className:"w-full text-sm rounded textarea textarea-bordered min-h-16 focus:outline-0 focus:border-neutral/30",required:!0,value:r.service_details||"",onChange:n=>m({...r,service_details:n.target.value}),placeholder:"Service Details",maxLength:249})]})]}),e.jsx("hr",{className:"mt-3"}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{type:"submit",className:`normal-case btn btn-success btn-sm btn-outline ${t?"pointer-events-none":""}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 animate-spin"})," Processing..."]}):"Submit"}),e.jsx("button",{type:"button",onClick:()=>document.getElementById("deposit_modal").close(),className:"normal-case btn btn-sm btn-outline text-neutral/70 hover:bg-neutral/70 border-neutral/70 hover:border-neutral/70",children:"Close"})]})]})})},me=()=>{var j;const{axiosInstance:i}=L(),{login_key:a,member_id:t}=((j=B.useState())==null?void 0:j.user_data)||{},{data:l=[]}=O({queryKey:["OFFLINE_PAYMENT_OPTIONS",a,t],enabled:!!a&&!!t,queryFn:async()=>{var u;const x=await i.post("/finance/offline-payment-info",{login_key:a,member_id:t});if(((u=x.data)==null?void 0:u.status)==="success")return x.data.data}});return e.jsx("dialog",{id:"offline_payment_modal",className:"!z-20 modal",children:e.jsxs("div",{className:"max-w-xl p-0 pb-4 rounded-md modal-box",children:[e.jsx("div",{className:"sticky top-0 left-0 px-4 py-2 bg-primary-focus",children:e.jsxs("form",{method:"dialog",className:"flex justify-between px-2 py-1 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Offline Payment Information"}),e.jsx("button",{className:"text-white btn btn-sm btn-circle btn-ghost",children:"✕"})]})}),e.jsx("div",{className:"max-h-[60vh] h-full overflow-auto",children:l.length>0?e.jsx("div",{className:"grid gap-6 p-4",children:l.map(x=>{const{payment_type:u,currency:y,bank_logo:N,bank_name:c,bank_address:s,country:r,beneficiary_name:m,account_number:f,account_type:g,routing:d,swift_code:n,institution_number:p,transit_number:C,sort_code:I,fees:o,payment_contacts:h,instructions:w}=x;return e.jsxs("div",{className:"p-4 overflow-hidden bg-white rounded-lg shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]",children:[e.jsxs("h2",{className:"mb-2 text-xl font-semibold",children:[u," Payment"]}),e.jsxs("grid",{className:"grid gap-2",children:[e.jsx("div",{className:"flex",children:e.jsx("img",{src:N,alt:"Bank Logo",className:"h-12"})}),e.jsxs("div",{className:"text-sm",children:[c&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Bank Name:"})," ",c]}),f&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Account Number:"})," ",f]}),g&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Account Type:"})," ",g]}),r&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Country:"})," ",r]}),m&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Beneficiary Name:"})," ",m]}),s&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Bank Address:"})," ",s]}),y&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Currency:"})," ",y]}),d&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Routing:"})," ",d]}),n&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Swift Code:"})," ",n]}),p&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Institution Number:"})," ",p]}),C&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Transit Number:"})," ",C]}),I&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Sort Code:"})," ",I]}),(Number(o==null?void 0:o.charges_ratio)>0||Number(o==null?void 0:o.charges_fixed)>0)&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Fees: "}),Number(o==null?void 0:o.charges_ratio)>0&&`Charges Ratio ${o.charges_ratio}, `,Number(o==null?void 0:o.charges_fixed)>0&&`Charges Fixed ${o.charges_fixed}`]}),w&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Instructions:"})," ",w]}),((h==null?void 0:h.phone)||(h==null?void 0:h.email))&&e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"After Payment Contact Information:"})," ",h.phone&&`Phone: ${h.phone},`," ",h.email&&`Email: 
                    ${h.email}`]})]})]})]},f)})}):e.jsx(ce,{height:"500px",btn:!0,emoji:"smile",text:"No result found!"})})]})})},ye=()=>{var w,R,E,P;const{site_title:i,component_version:a,system_config:t}=k.useState(),{axiosInstance:l}=L(),{user_data:{member_id:j,login_key:x}}=B.useState(),{data:u,isLoading:y,error:N}=O({queryKey:["FINANCE_SUMMARY",j,x],queryFn:async()=>(await l.post("/finance/summery",{member_id:j,login_key:x})).data});if(y)return e.jsx(X,{});if(N)throw N;const{default_currency:c,dashboard:{total_sales_amount:s,monthly_sales_amount:r,monthly_transactions:m,total_due_invoices:f,total_pending_refund:g,available_balance:d,total_credit_amount:n,total_due_amount:p},partner_transaction:C,partner_invoices:I,partner_refunds:o,partner_payment:h}=u;return e.jsxs("main",{className:"container min-h-screen pt-20",children:[e.jsx(J,{children:e.jsxs("title",{children:["Finance",i?" - "+i:""]})}),e.jsx("h1",{className:"mb-8 text-3xl font-semibold",children:"Financial Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6",children:[((w=a==null?void 0:a.general)==null?void 0:w.finance)==="1"&&e.jsx(v,{Icon:ee,label:"Available Balance",value:b(c)+" "+d}),e.jsx(v,{Icon:K,label:"Total Sales",value:b(c)+" "+s}),e.jsx(v,{Icon:K,label:"Sales",value:b(c)+" "+r}),e.jsx(v,{Icon:te,label:"Transactions",value:m}),e.jsx(v,{Icon:se,label:"Due Invoices",value:f}),e.jsx(v,{Icon:ae,label:"Refund under process",value:g}),((R=a==null?void 0:a.general)==null?void 0:R.finance)==="2"&&e.jsx(v,{Icon:ne,label:"point (coming soon)",value:"Loyalty"})]}),((E=a==null?void 0:a.general)==null?void 0:E.finance)==="1"&&e.jsxs("div",{className:"flex items-center justify-end gap-4 mb-8",children:[e.jsx("button",{onClick:()=>document.getElementById("offline_payment_modal").showModal(),className:"text-white normal-case btn btn-info",children:"Offline Payment Information"}),e.jsx("button",{onClick:()=>document.getElementById("add_payment_modal").showModal(),className:"normal-case btn btn-primary",children:"Submit payment"})]}),((P=a==null?void 0:a.general)==null?void 0:P.finance)==="2"&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-8 lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-3 p-5 mb-8 border shadow-sm border-neutral/20 rounded-xl bg-base-200",children:[e.jsxs("div",{className:"flex items-center justify-between gap-5 mb-3",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-medium text-neutral",children:["Spend ",e.jsx(q,{})]}),e.jsx("h3",{className:"text-2xl font-semibold",children:b(c)+" "+s})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-medium text-neutral",children:["Available (",e.jsx("span",{className:"text-[10px]",children:"Including"})," ","Credit Limit) ",e.jsx(q,{})]}),e.jsx("h3",{className:"text-2xl font-semibold",children:b(c)+" "+d})]})]}),e.jsx("progress",{className:"w-full h-3 mb-3 progress progress-primary",value:"5",max:"100"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 px-4 py-3 rounded-md bg-primary/10",children:e.jsxs("h6",{className:"font-medium whitespace-nowrap",children:["Credit limit:"," ",b(c)+" "+n," ",e.jsxs("span",{className:"text-xs bg-sky-500 text-white rounded py-0.5 px-1",children:[e.jsx(re,{}),"Info"]})]})}),e.jsxs("button",{className:"normal-case btn btn-primary",children:[e.jsx(H,{})," Credit Request"]})]})]}),e.jsxs("div",{className:"flex flex-col justify-between gap-3 p-5 mb-8 border shadow-sm border-neutral/20 rounded-xl bg-base-200",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm font-medium text-neutral",children:["Total Due ",e.jsx(q,{})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:b(c)+" "+p}),Number(p)>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"p-1 text-xs uppercase border-2 border-primary bg-primary/10 text-primary",children:"Outstanding"}),e.jsx("button",{className:"normal-case btn bg-sky-100 text-sky-500 hover:bg-sky-200 hover:text-sky-600",children:"Pay with card"})]}):null]})]}),e.jsx("div",{className:"px-4 py-2 rounded-md bg-primary/10",children:e.jsx("h6",{className:"font-medium whitespace-nowrap",children:"Pay Due Date : 2023-11-30"})}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("button",{onClick:()=>document.getElementById("offline_payment_modal").showModal(),className:"text-white normal-case btn btn-info",children:"Offline Payment Information"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>document.getElementById("add_payment_modal").showModal(),className:"normal-case btn btn-primary",children:"Submit payment"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 mb-8 lg:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsx(U,{data:C}),e.jsx(Q,{data:I}),e.jsx(V,{data:o}),e.jsx(Y,{data:h})]}),e.jsx(de,{}),e.jsx(oe,{}),e.jsx(me,{})]})};export{ye as default};
