import{o as K,e as V,u as M,m as Y,q as e,a5 as $,T as y}from"./index-40b4770e.js";import{d as G,e as J,c as X,a3 as Z,ad as A,aA as ee}from"./App-ab507ef2.js";import{T as i}from"./TextInputCheckout-9f1b4211.js";import{F as m}from"./FileInputBoxForSettings-52b6fed4.js";import{f as ae}from"./index.esm-ce81629e.js";const ne=()=>{var k,F,w,P,S,I,B,C;const{site_title:v,component_version:L}=K.useState(),{general:f}=L||{},[a,t]=V.useState({isInitialized:!1,brand_name:"",slogan:"",primary_contact_number:"",website:"",email_address:"",customer_support_email:"",priavcy_link:"",terms_link:"",logo_size:{},partner_from_email_address:"",partner_from_email_full_name:""}),U=M(),{axiosInstance:x}=G(),{user_data:{login_key:b,member_id:p}}=Y.useState(),{data:h={},isLoading:D,error:z,refetch:O}=J({queryKey:["PARTNER_PROFILE",b,p],queryFn:async()=>{var d,_;const s=await x.post("/settings/partner-profile",{login_key:b,member_id:p});if(((d=s==null?void 0:s.data)==null?void 0:d.status)==="success"){const{brand_name:r,slogan:j,b_primary_contact_number:l,website:c,email_address:g,customer_support_email:u,priavcy_link:o,terms_link:n,brand_color:T,brand_text_color:q,logo_size:Q,partner_from_email_address:W,partner_from_email_full_name:H}=s.data.brand_profile;return t({...a,isInitialized:!0,brand_name:r||"",slogan:j||"",primary_contact_number:l||"",website:c||"",email_address:g||"",customer_support_email:u||"",priavcy_link:o||"",terms_link:n||"",brand_color:T||"",brand_text_color:q||"",logo_size:Q||{},partner_from_email_address:W||"",partner_from_email_full_name:H||""}),s.data}else throw{...s,message:((_=s.data)==null?void 0:_.reason)||"Request failed!"}}}),[N,E]=V.useState(!1),R=async s=>{var d,_;s.preventDefault(),E(!0);try{const r={};await Promise.all(Object.entries(a.logo_size).map(async([c,g])=>{var u;if(typeof g=="string")r[c]=g;else{const o=new FormData;o.append("documents_image_url",g),o.append("member_id",p),o.append("image_type","file"),o.append("category","partner-brand-logo");try{const n=await x.post("/tools/upload-cdn",o);((u=n==null?void 0:n.data)==null?void 0:u.status)==="success"?r[c]=n.data.ObjectURL:r[c]=""}catch(n){console.error("Error uploading image:",n.message),r[c]=""}}}));const j={...a,logo_size:r,login_key:b,member_id:p},l=await x.post("/settings/partner-brand-profile-update",j);((d=l==null?void 0:l.data)==null?void 0:d.status)==="success"?(y("success","Success!",l.data.reason),O(),U.invalidateQueries(["USER_INFO"])):y("error","Update Failed",((_=l==null?void 0:l.data)==null?void 0:_.reason)||"Something went wrong")}catch(r){console.error(r),y("error","Update Failed",r.message)}finally{E(!1)}};if(z)throw z;return e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsxs("title",{children:["Branding Profile",v?" - "+v:""]})}),e.jsx("div",{className:X("mb-8 sm:col-span-3 lg:col-span-4",(f==null?void 0:f.team)==="3"&&"bg-base-200 p-5"),children:!D&&a.isInitialized?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-3 mb-1",children:[e.jsx("h5",{className:"text-lg font-medium",children:(k=h==null?void 0:h.partner_profile)==null?void 0:k.legal_name}),e.jsx("p",{className:"text-sm text-neutral",children:"Branding Profile"})]}),e.jsxs("form",{onSubmit:R,className:"mb-8",children:[e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsx(i,{label:"Brand Name",defaultValue:a.brand_name,action:s=>t({...a,brand_name:s.target.value}),placeholder:"Enter Brand Name"}),e.jsx(i,{label:"Description - Slogan",defaultValue:a.slogan,action:s=>t({...a,slogan:s.target.value}),placeholder:"Enter Description - Slogan"}),e.jsx(i,{label:"Primary Contact Number",defaultValue:a.primary_contact_number,action:s=>t({...a,primary_contact_number:s.target.value}),placeholder:"Enter Primary Contact Number"}),e.jsx(i,{label:"Primary Website",defaultValue:a.website,action:s=>t({...a,website:s.target.value}),placeholder:"Enter Primary Website"}),e.jsx(i,{label:"Booking Notification Email Address",type:"email",defaultValue:a.email_address,action:s=>t({...a,email_address:s.target.value}),placeholder:"Enter Primary Email Address"}),e.jsx(i,{label:"Customer Support Email",type:"email",defaultValue:a.customer_support_email,action:s=>t({...a,customer_support_email:s.target.value}),placeholder:"Enter Customer Support Email"}),e.jsx(i,{label:"Privacy Link",defaultValue:a.priavcy_link,action:s=>t({...a,priavcy_link:s.target.value}),placeholder:"Enter Privacy Link"}),e.jsx(i,{label:"Terms & Conditions Link",defaultValue:a.terms_link,action:s=>t({...a,terms_link:s.target.value}),placeholder:"Enter Terms & Conditions Link"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Branding Email"}),e.jsx(Z,{button:e.jsx("button",{className:"text-lg text-info",children:e.jsx(ae,{})}),children:e.jsx("div",{className:"px-3 py-3",children:e.jsx("p",{className:"text-sm",children:"Your customer will receive booking and other emails from this email address."})})})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsx(i,{label:"From Email Brand Name",defaultValue:a.partner_from_email_full_name,action:s=>t({...a,partner_from_email_full_name:s.target.value}),placeholder:"Enter From Email Brand Name"}),e.jsx(i,{label:"From Email Address",defaultValue:a.partner_from_email_address,readOnly:!0})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"mb-4 text-lg font-medium",children:"Branding Images"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsx(m,{label:"Large banner image (1440 * 448)",accept:"image/*",link:(F=a.logo_size)==null?void 0:F["1400_448"],action:s=>t({...a,logo_size:{...a.logo_size,"1400_448":s.target.files[0]}})}),e.jsx(m,{label:"Small logo (224 x 224)",accept:"image/*",link:(w=a.logo_size)==null?void 0:w["224_224"],action:s=>t({...a,logo_size:{...a.logo_size,"224_224":s.target.files[0]}})}),e.jsx(m,{label:"App icon image ( 1024 x 1024)",accept:"image/*",link:(P=a.logo_size)==null?void 0:P["1024_1024"],action:s=>t({...a,logo_size:{...a.logo_size,"1024_1024":s.target.files[0]}})}),e.jsx(m,{label:"Account Image (400 x 400)",accept:"image/*",link:(S=a.logo_size)==null?void 0:S["400_400"],action:s=>t({...a,logo_size:{...a.logo_size,"400_400":s.target.files[0]}})}),e.jsx(m,{label:"Square Profile image ( 512 x 512)",accept:"image/*",link:(I=a.logo_size)==null?void 0:I["512_512"],action:s=>t({...a,logo_size:{...a.logo_size,"512_512":s.target.files[0]}})}),e.jsx(m,{label:"Transparent Background Wide logo (1706 x 256)",accept:"image/*",link:(B=a.logo_size)==null?void 0:B["1706_256"],action:s=>t({...a,logo_size:{...a.logo_size,"1706_256":s.target.files[0]}})}),e.jsx(m,{label:"Fav Icon ",accept:"image/*",link:(C=a.logo_size)==null?void 0:C.favicon,action:s=>t({...a,logo_size:{...a.logo_size,favicon:s.target.files[0]}})})]})]}),e.jsx("button",{type:"submit",className:`h-10 min-h-0 mt-4 normal-case border-transparent rounded-md btn bg-primary/70 btn-primary ${N?"pointer-events-none":""}`,children:N?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 animate-spin"})," Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{})," Update"]})})]})]}):e.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl min-h-[400px]",children:[e.jsx(A,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]})})]})};export{ne as default};
