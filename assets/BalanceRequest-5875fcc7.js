import{m as b,e as _,l as N,o as e,a6 as v,U as y}from"./index-3f51aa04.js";import{a as C,ap as S}from"./App-7d2219c6.js";import{I as w}from"./InputDate-4bfbb72f.js";import"./shortcut-buttons-flatpickr.min-7f1fff53.js";const k=()=>{const{site_title:r}=b.useState(),[l,m]=_.useState(!1),[t,s]=_.useState({payment_type:"CASH",trx_date:"",trx_amount:"",booking_reference_id:"",trx_notes:"",payment_attachment:null}),{axiosInstance:c}=C(),{user_data:{login_key:j,member_id:u}}=N.useState(),g=async a=>{var p,x,h,f;a.preventDefault(),m(!0);let d=null;try{if(t.payment_attachment){const o=new FormData;o.append("documents_image_url",t.payment_attachment),o.append("member_id",u),o.append("image_type","file"),o.append("category","payment-slip");const i=await c.post("/tools/upload-cdn",o);((p=i==null?void 0:i.data)==null?void 0:p.status)==="success"&&(d=i.data.ObjectURL)}const n=await c.post("/finance/payment-request-submit",{...t,payment_attachment:d,login_key:j,member_id:u});if(((x=n==null?void 0:n.data)==null?void 0:x.status)==="success")y("success","Submitted!",(h=n==null?void 0:n.data)==null?void 0:h.reason),s({payment_type:"CASH",trx_date:"",trx_amount:"",booking_reference_id:"",trx_notes:"",payment_attachment:null});else throw new Error((f=n.data)==null?void 0:f.reason)}catch(n){y("error","Failed",n.message)}finally{m(!1)}};return e.jsxs("main",{className:"container min-h-screen pt-20 mb-8",children:[e.jsx(v,{children:e.jsxs("title",{children:["Balance Request",r?" - "+r:""]})}),e.jsxs("form",{onSubmit:g,className:"w-full pt-2",children:[e.jsx("h3",{className:"pb-2 text-lg font-semibold",children:"Balance Request"}),e.jsx("hr",{className:"mb-4"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-y-4 gap-x-8",children:[e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Payment Type"}),e.jsxs("select",{className:"h-10 min-h-0 text-sm rounded select select-bordered focus:outline-none",value:t.payment_type,onChange:a=>s({...t,payment_type:a.target.value}),children:[e.jsx("option",{value:"CASH",children:"Cash Payment"}),e.jsx("option",{value:"BANK-CHEQUE",children:"Bank Cheque Deposit"}),e.jsx("option",{value:"BANK-CASH",children:"Bank Cash Deposit"}),e.jsx("option",{value:"BANK-TRANSFER",children:"Bank Transfer "}),e.jsx("option",{value:"MFS",children:"Mobile Financial Service"}),e.jsx("option",{value:"OTHER",children:"Others Type"})]})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Transaction Date"}),e.jsx(w,{className:"w-full h-10 min-h-0 text-sm rounded input input-bordered focus:outline-none",defaultValue:t.trx_date,action:a=>s({...t,trx_date:a}),isStatic:!0,showMonths:1})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Payment Amount"}),e.jsx("input",{autoComplete:"off",type:"text",value:t.trx_amount,onChange:a=>s({...t,trx_amount:a.target.value}),className:"h-10 min-h-0 text-sm rounded input input-bordered focus:outline-none"})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Reference Number"}),e.jsx("input",{autoComplete:"off",type:"text",value:t.booking_reference_id,onChange:a=>s({...t,booking_reference_id:a.target.value}),className:"h-10 min-h-0 text-sm rounded input input-bordered focus:outline-none"})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Reference Notes"}),e.jsx("textarea",{value:t.trx_notes,onChange:a=>s({...t,trx_notes:a.target.value}),className:"p-2 text-sm rounded min-h-16 input input-bordered focus:outline-none"})]}),e.jsxs("div",{className:"gap-2 text-sm form-control",children:[e.jsx("label",{children:"Payment Slip"}),e.jsx("input",{autoComplete:"off",type:"file",className:"h-10 min-h-0 text-sm rounded file-input file-input-bordered focus:outline-none",onChange:a=>s({...t,payment_attachment:a.target.files[0]})})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"submit",className:`normal-case btn btn-primary rounded-md min-w-[160px] shadow shadow-primary/30 min-h-0 h-10 ${l?"pointer-events-none":""}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 animate-spin"})," Processing..."]}):"Submit Payment Request"})})]})]})};export{k as default};
