import{o as C,e as h,P as i,q as e,a4 as M,a5 as w}from"./index-0b0e509a.js";import{d as B,n as I,e as L,o as A,c,L as m,dz as T}from"./App-f4418714.js";import{B as P}from"./BookingList2-015ceca7.js";import{I as b}from"./InputDateRange-f29caef7.js";import{G as R}from"./index.esm-2ea9f3a1.js";import"./index.esm-ea538e87.js";import"./index.esm-7fbd1f2c.js";import"./index-61f3cffe.js";const F=[{label:"Any",value:"any"},{label:"Flight",value:"FLIGHT"},{label:"Hotel",value:"HOTEL"}],G=[{label:"Any",value:"any"},{label:"Hold",value:"hold"},{label:"Confirm",value:"confirm"},{label:"Failed",value:"failed"},{label:"Cancel",value:"cancel"},{label:"Initiated",value:"initiated"},{label:"Pending",value:"pending"}],Q=()=>{const{site_title:u}=C.useState(),{axiosInstance:f}=B(),[s]=I(),[t,n]=h.useState({member_id:"all",service_type:"any",generated_date_start:"",generated_date_end:"",book_date_start:"",book_date_end:"",booking_status:"any"}),l={member_id:"all",service_type:s.get("service_type")||"any",generated_date_start:s.get("generated_date_start")||i().subtract(1,"month").format("YYYY-MM-DD"),generated_date_end:s.get("generated_date_end")||i().format("YYYY-MM-DD"),book_date_start:s.get("book_date_start")||"",book_date_end:s.get("book_date_end")||"",booking_status:s.get("booking_status")||"any",supplier_confirmation_id:s.get("supplier_confirmation_id")||"",primary_guest_name:s.get("primary_guest_name")||"",primary_guest_contact_no:s.get("primary_guest_contact_no")||""},{data:j,error:_,isLoading:y}=L(["MY_BOOKINGS",l],async()=>{var r,d,x;const a=await f.post("/secure?pathName=/booking-list-master",l);if(((r=a.data)==null?void 0:r.status)==="success")return n(l),a.data.data=(d=a.data.data)==null?void 0:d.map((D,S)=>({...D,index:S+1})),a.data;throw{...a,message:((x=a.data)==null?void 0:x.reason)||"Request failed!"}}),v=A(),N=async a=>{a.preventDefault();const r=new URLSearchParams(Object.entries(t).filter(([,d])=>!!d)).toString();v(`/my-bookings?${r}`)},p=(a,r)=>{n({service_type:"any",generated_date_start:"",generated_date_end:"",book_date_start:"",book_date_end:"",booking_status:"any",[a]:r})},[g,k]=h.useState(!1);if(y)return e.jsx(M,{});if(_)throw _;const{data:o,supplier_data:Y}=j||{};return e.jsx("div",{className:"pb-8 bg-base-200",children:e.jsxs("main",{className:"min-h-screen pt-20",children:[e.jsx(w,{children:e.jsxs("title",{children:["Bookings",u?" - "+u:""]})}),e.jsx("div",{className:"px-4 md:px-8 lg:px-12",children:e.jsxs("div",{className:"relative p-2 border rounded-md border-base-content/50",children:[e.jsx("div",{className:"absolute z-20 right-6 w-fit top-12",onClick:a=>a.stopPropagation(),children:e.jsx("div",{className:c("rounded-md collapse bg-base-200"),open:g,children:e.jsx("div",{className:"p-0 origin-top collapse-content !pb-0",children:e.jsxs("form",{onSubmit:N,className:"relative p-4 border rounded-md sam-box border-base-content/50",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-x-3 gap-y-2 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("label",{className:"input-container",children:[e.jsx("span",{className:"input-label",children:"Service Type"}),e.jsx("select",{className:"field",value:t.service_type,onChange:a=>n({...t,service_type:a.target.value}),children:F.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("label",{className:"input-label",children:"Booking Created"}),e.jsx(b,{className:"field",action:a=>{a[0]&&a[1]?n({...t,generated_date_start:i(a[0]).format("YYYY-MM-DD"),generated_date_end:i(a[1]).format("YYYY-MM-DD")}):n({...t,generated_date_start:"",generated_date_end:""})},defaultValue:t.generated_date_start&&t.generated_date_end?[t.generated_date_start,t.generated_date_end]:null,placeholder:"Select Booking Created Dates"})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("label",{className:"input-label",children:"Stay Between / Departure & Arrival"}),e.jsx(b,{className:"field",action:a=>{a[0]&&a[1]?n({...t,book_date_start:i(a[0]).format("YYYY-MM-DD"),book_date_end:i(a[1]).format("YYYY-MM-DD")}):n({...t,book_date_start:"",book_date_end:""})},defaultValue:t.book_date_start&&t.book_date_end?[t.book_date_start,t.book_date_end]:null,placeholder:"Select"})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("label",{className:"input-label",children:"Auto Cancel Date Between"}),e.jsx(b,{className:"field",action:a=>console.log(a),placeholder:"Select"})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("span",{className:"input-label",children:"Booking ID"}),e.jsx("input",{type:"text",className:"field",placeholder:"Type Booking ID",value:t.booking_id,onChange:a=>p("booking_id",a.target.value)})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("span",{className:"input-label",children:"PNR/Confirmation/Supplier ID"}),e.jsx("input",{type:"text",className:"field",placeholder:"Type Supplier Confirmation ID",value:t.supplier_confirmation_id,onChange:a=>p("supplier_confirmation_id",a.target.value)})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("span",{className:"input-label",children:"Lead Guest Name"}),e.jsx("input",{type:"text",className:"field",placeholder:"Type Guest Name",value:t.primary_guest_name,onChange:a=>p("primary_guest_name",a.target.value)})]}),e.jsxs("label",{className:"input-container",children:[e.jsx("span",{className:"input-label",children:"Booking Status"}),e.jsx("select",{className:"field",value:t.booking_status,onChange:a=>n({...t,booking_status:a.target.value}),children:G.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[e.jsxs("button",{type:"button",onClick:()=>n({member_id:"all",service_type:"any",generated_date_start:"",generated_date_end:"",book_date_start:"",book_date_end:"",booking_status:"any"}),className:"flex flex-col items-center justify-center min-h-0 bg-transparent rounded h-7 input input-xs input-bordered w-fit text-[10px] duration-300 hover:scale-125",children:[e.jsx(R,{className:"mr-0.5 text-xs"})," ",e.jsx("span",{className:"text-[8px]",children:"Reset"})]}),e.jsx("button",{type:"submit",className:"font-normal normal-case rounded-md btn btn-xs btn-warning hover:scale-125 h-7",children:"Search"})]})]})})})}),e.jsxs("div",{className:"flex gap-6 mb-4",children:[e.jsxs("div",{className:"flex-1 px-1 border-b border-b-base-content/50 tabs tabs-bordered",children:[e.jsx(m,{to:"/my-bookings?service_type=any",className:c("tab border-b-[3px] border-b-transparent !outline-0 h-auto py-1.5 text-[13px] leading-tight duration-200 font-medium",l.service_type==="any"&&"tab-active !border-b-primary"),children:e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("img",{src:"/icons/hotel-plane.png",alt:"",className:"w-5"}),e.jsx("span",{children:"All Journey"})]})}),e.jsx(m,{to:"/my-bookings?service_type=flight",className:c("tab border-b-[3px] border-b-transparent !outline-0 h-auto py-1.5 text-[13px] leading-tight duration-200 font-medium",l.service_type==="flight"&&"tab-active !border-b-primary"),children:e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("img",{src:"/icons/flight10.png",alt:"",className:"w-5"}),e.jsx("span",{children:"Flight"})]})}),e.jsx(m,{to:"/my-bookings?service_type=hotel",className:c("tab border-b-[3px] border-b-transparent !outline-0 h-auto py-1.5 text-[13px] leading-tight duration-200 font-medium",l.service_type==="hotel"&&"tab-active !border-b-primary"),children:e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("img",{src:"/icons/hotel.png",alt:"",className:"w-5"}),e.jsx("span",{children:"Hotel"})]})})]}),e.jsxs("button",{onClick:()=>k(!g),className:"normal-case rounded btn btn-primary btn-xs h-7",children:[e.jsx(T,{className:"text-lg"})," Advanced Search"]})]}),(o==null?void 0:o.length)>0?e.jsx(P,{booking_lists:o,supplier_data:Y}):e.jsx("p",{className:"py-10 text-center text-error",children:"No result found"})]})})]})})};export{Q as default};
