import{m as we,l as _e,e as Ce,o as e,G as W,I as X,aV as ke,aW as Re,ae as Z,aQ as Se,U as Be}from"./index-f242fedc.js";import{f as v}from"./index.esm-72bbcee1.js";import{a as Oe,b as Pe,bR as Te,ag as f,K as ee,O as se,cM as He,cN as te,ao as ae,cO as Ie,bg as Me,cP as Ae,x as Fe,$ as qe}from"./App-89f3291c.js";import{k as S,e as Ee,l as le,m as Ve}from"./index.esm-883b6be4.js";import{H as $e}from"./index.esm-2ac2329d.js";import{w as De}from"./sweetalert2-react-content.es-990af157.js";import{H as Le}from"./HotelImageSlider-b77f1aa9.js";const ze=({room:l})=>{var _;const{title:u,images:o,amenities:i,description:j,paid_amenities:x}=l||{},c=(_=o==null?void 0:o.filter(r=>!!r))==null?void 0:_.map((r,g)=>({picture_id:g,url:r||"/no_image.jpg",title:u}));return e.jsxs("div",{className:"!text-start",children:[e.jsx("div",{className:"p-3 px-4 text-base font-semibold bg-secondary/10 text-primary",children:"Room Details"}),e.jsxs("div",{className:"max-h-[80vh] overflow-y-auto py-3",children:[(c==null?void 0:c.length)>0&&e.jsx("div",{className:"relative mb-3",children:e.jsx(Le,{images:c})}),e.jsxs("div",{className:"px-4",children:[e.jsx("h1",{className:"mb-3 text-base font-semibold",children:u}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 mb-3 text-xs inner-html",dangerouslySetInnerHTML:{__html:j}}),e.jsx("hr",{className:"mb-3"})]}),e.jsx("h2",{className:"mb-2 text-sm font-semibold",children:"Amenities:"}),e.jsx("ul",{className:"grid grid-cols-2 gap-x-3 gap-y-2 text-[13px] list-disc list-inside text-start text-neutral",children:i==null?void 0:i.map(r=>e.jsx("li",{className:"list-item",children:r},r))}),(x==null?void 0:x.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-3"}),e.jsx("h2",{className:"mb-2 text-sm font-semibold",children:"Paid Amenities:"}),e.jsx("ul",{className:"grid grid-cols-2 gap-x-3 gap-y-2 text-[13px] list-disc list-inside text-start text-neutral mb-6",children:x==null?void 0:x.map(r=>e.jsx("li",{className:"list-item",children:r},r))})]})]})]})]})},Ye=({rooms:l,index:u})=>{var A,F,q,E,V,$,D,L,z,Y,G,J,K,Q,U;const o=l==null?void 0:l.data[u],{system_config:i,supplier_option:j,component_version:x}=we.useState(),{user_data:c}=_e.useState(),[_,r]=Ce.useState(!1),{name:g,room_content:re,meal_option:d,occupancies:m,info:N,price:n,rate_type:T,rate_comments:C,cancellation_policies:h}=o,{policies:p,tracking_id:ne,room_tracking_id:oe,sell_total_price:ce,currency:ie,supplier:H,total_amount:xe,hold_possible:de}=l.summery,{supplier_uid:me}=H||{},{show_supplier_option:pe}=j||{},{bed_type:y,room_size:I,views:B,description:O,room_pic:k,additional_images:P,amenities:he,paid_amenities:ue}=re||{},{supplier_sales_comission:je}=((F=(A=o==null?void 0:o.price)==null?void 0:A.supplier)==null?void 0:F.price_breakdown)||{},be={hotel_name:g,hotel_image:k,currency:ie,sell_price:ce,total_amount:xe,supplier:H,supplier_sales_comission:je},{axiosInstance:fe}=Oe(),ge=Pe(),Ne=async()=>{var s,t;r(!0);try{const a=await fe.post("/hotel/validate",{tracking_id:ne,room_tracking_id:oe});if(((s=a.data)==null?void 0:s.status)==="success"){const{booking_tracking_id:w}=a.data;ge(`/hotel/checkout?booking_tracking_id=${w}`)}else throw new Error(((t=a.data)==null?void 0:t.reason)||"Request failed!")}catch(a){console.error(a),Be("error","Request failed!",a.message)}finally{r(!1)}},{amenities:ye}=o||{},b=(q=x==null?void 0:x.hotel)==null?void 0:q.room_details,M=De(qe),ve=()=>{const s={title:g,images:(P==null?void 0:P.map(t=>t==null?void 0:t.url))||[k],amenities:[...ye.map(t=>t==null?void 0:t.title)||[],...he||[],...(y==null?void 0:y.map(t=>{var a;return(a=t==null?void 0:t.configuration)==null?void 0:a.map(w=>w==null?void 0:w.type)}))||[]],description:O,paid_amenities:ue};M.fire({html:e.jsx(ze,{room:s}),showConfirmButton:!1,showCloseButton:!0,customClass:{popup:"w-full max-w-xl !overflow-hidden",htmlContainer:"!m-0",closeButton:"text-red-500"}})},R=y==null?void 0:y.reduce((s,t)=>(t!=null&&t.description&&s.some(a=>(a==null?void 0:a.description)===(t==null?void 0:t.description))===!1&&s.push(t),s),[]);return e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 align-top border-0 border-t border-neutral/10 min-w-[200px]",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[((E=n==null?void 0:n.promo_tag)==null?void 0:E.description)&&e.jsxs("div",{className:"relative flex px-2 py-1 pr-6 text-xs font-light text-white bg-gradient-to-r from-secondary-focus to-secondary -left-3 w-fit !line-clamp-1",children:[n.promo_tag.description,e.jsx("span",{className:"absolute top-0 right-0 h-0 border-y-[12px] border-x-[12px] border-transparent border-r-white"})]}),k&&e.jsx("img",{src:k||"/no_image.jpg",alt:g,className:"h-[80px] min-w-[80px] object-cover object-center rounded"}),e.jsxs("h5",{className:"text-[15px] font-medium",children:[m==null?void 0:m.total_room," X ",g]}),e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[I&&e.jsxs("span",{className:"text-[10px] flex items-center px-1 py-0.5 font-medium rounded bg-secondary/10 text-secondary w-fit gap-1",children:[e.jsx(Te,{})," ",e.jsxs("span",{children:[I," m",e.jsx("sup",{children:"2"})]})]}),e.jsx(f,{button:e.jsxs("div",{className:"text-[10px] flex items-center px-1 py-0.5 font-medium rounded bg-secondary/10 text-secondary w-fit gap-0.5",children:[e.jsx("span",{className:"mr-1",children:"Sleeps:"}),Number(m.adult)>0&&[...Array(Number(m.adult))].map((s,t)=>e.jsx(ee,{},t)),Number(m.child)>0&&[...Array(Number(m.child))].map((s,t)=>e.jsx(se,{},t))]}),children:e.jsxs("div",{className:"flex flex-col gap-1 px-3 py-2 text-xs",children:[e.jsxs("div",{className:"text-primary",children:[e.jsx(ee,{})," Adult: ",m.adult]}),e.jsxs("div",{className:"text-secondary",children:[e.jsx(se,{})," Child: ",m.child]})]})})]}),b!=="2"&&(N==null?void 0:N.available_room)>0&&e.jsxs("span",{className:"text-[10px] flex items-center px-1 py-0.5 font-medium rounded bg-error/10 text-error w-fit gap-1",children:[e.jsx(He,{})," Only ",N==null?void 0:N.available_room," rooms left"]}),b!=="2"&&((D=($=(V=n==null?void 0:n.sell)==null?void 0:V.price_breakdown)==null?void 0:$.payable_at_property)==null?void 0:D.length)>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("p",{className:"mb-1 text-[10px] font-semibold text-error",children:[e.jsx(S,{})," Payable at Check-in"]}),e.jsx(f,{button:e.jsx("button",{className:"text-lg text-neutral",children:e.jsx(v,{})}),children:e.jsx("div",{className:"px-3 py-3",children:n.sell.price_breakdown.payable_at_property.map((s,t)=>e.jsxs("p",{className:"mb-1 text-xs font-semibold text-error",children:[e.jsx(S,{})," ",s==null?void 0:s.title,":"," ",W(s==null?void 0:s.currency),s==null?void 0:s.amount]},t))})})]}),b!=="2"&&((L=h==null?void 0:h.policy_breakdown)==null?void 0:L.some(s=>s==null?void 0:s.details))&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("p",{className:"mb-1 text-[10px] font-semibold text-warning",children:[e.jsx(te,{})," Cancellation Policy"]}),e.jsx(f,{button:e.jsx("button",{className:"text-lg text-neutral",children:e.jsx(v,{})}),children:e.jsx("div",{className:"px-3 py-3",children:h.policy_breakdown.map((s,t)=>e.jsx("p",{className:"mb-1 text-xs font-semibold text-warning",children:s==null?void 0:s.details},t))})})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>ve(),className:"px-1 text-xs font-bold text-primary bg-base-200",children:["Room Amenities ",e.jsx(ae,{})]})})]})}),e.jsxs("td",{className:"p-3 border-0 border-t border-l border-neutral/10 min-w-[150px]",children:[e.jsxs("ul",{className:"flex flex-col gap-1 text-xs",children:[(R==null?void 0:R.length)>0&&e.jsxs("li",{className:"align-middle list-item text-secondary",children:[e.jsx(Ee,{className:"text-xl"})," ",R.map(s=>s.description).join("/")]}),(!d||(d==null?void 0:d.some(s=>(s==null?void 0:s.included)==="yes"))===!1)&&T&&e.jsxs("li",{className:"align-middle list-item text-secondary",children:[e.jsx(X,{path:ke,size:.8})," ",T]}),(d==null?void 0:d.length)>0&&(d==null?void 0:d.map((s,t)=>e.jsxs("li",{className:"align-middle list-item text-secondary",children:[e.jsx(X,{path:Re,size:.8})," ",s.title]},t))),B==null?void 0:B.map((s,t)=>s&&e.jsxs("li",{className:"align-middle list-item text-secondary",children:[e.jsx($e,{className:"mr-1"})," ",s]},t))]}),O&&e.jsx("div",{className:"mt-2 text-xs text-neutral line-clamp-[2] inner-html",dangerouslySetInnerHTML:{__html:O}}),!!C&&e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"bg-yellow-500 h-4 text-[10px] leading-tight flex w-fit px-1 items-center justify-center relative text-white float-start",children:[e.jsx("p",{children:"Note"}),e.jsx("div",{className:"absolute left-full top-0 h-0 w-0 border-[8px] border-transparent border-l-yellow-500"})]}),e.jsx("p",{className:"text-xs text-neutral indent-4 line-clamp-2 inner-html",dangerouslySetInnerHTML:{__html:Z(C)}})]}),C.length>30&&e.jsx(f,{button:e.jsx("button",{className:"text-lg text-neutral",children:e.jsx(v,{})}),position:"left",children:e.jsx("div",{className:"px-2 py-3 text-xs text-neutral",children:e.jsx("p",{className:" inner-html",dangerouslySetInnerHTML:{__html:Z(C)}})})})]})]}),u===0&&e.jsx("td",{rowSpan:l.data.length,className:"p-3 text-center border-0 border-t border-l border-neutral/10",children:e.jsxs("div",{className:"flex flex-col w-fit",children:[["supernsn","administrator"].includes(c==null?void 0:c.user_access_level)&&e.jsx("button",{onClick:()=>M.fire({html:e.jsx("div",{className:"text-start max-h-[90vh] overflow-auto hide_scrollbar",children:e.jsx("pre",{children:JSON.stringify(l,null,2)})}),showConfirmButton:!1,showCloseButton:!0,customClass:{popup:"w-full max-w-5xl mb-1",closeButton:"text-red-500"}}),className:"mb-1 normal-case rounded hover:bg-transparent text-info btn btn-xs btn-ghost",children:e.jsx(Ie,{className:"text-xl"})}),e.jsxs("div",{className:"flex items-center gap-1 mb-2 w-fit",children:[e.jsx(Me,{price_data:be}),["supernsn","administrator"].includes(c==null?void 0:c.user_access_level)&&pe==="YES"&&e.jsx("div",{className:"text-[10px] bg-neutral/5 text-neutral rounded py-[1px] px-1 w-fit",children:(Y=(z=j==null?void 0:j.data)==null?void 0:z.find(s=>(s==null?void 0:s.supplier_uid)===me))==null?void 0:Y.title})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 sm:flex-row",children:[(i==null?void 0:i.show_cart_quotes)==="YES"&&e.jsx("button",{onClick:()=>Se.update(s=>{s.modal={active:"quotes",data:l}}),className:"font-normal normal-case rounded addToCartBtn btn btn-primary btn-outline btn-sm flex-nowrap",children:e.jsx(Ae,{})}),e.jsx("button",{onClick:Ne,className:"flex-1 font-normal normal-case rounded btn btn-sm btn-primary flex-nowrap",children:_?e.jsx(e.Fragment,{children:"Validating..."}):e.jsxs(e.Fragment,{children:["Choose",e.jsx(ae,{})]})})]}),de==="no"&&e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx("p",{className:"text-[10px] font-semibold text-error",children:"Instant Purchase"}),e.jsx(f,{button:e.jsx("button",{className:"leading-tight text-neutral",children:e.jsx(v,{})}),children:e.jsx("div",{className:"p-3 text-xs",children:"Securing this reservation requires immediate payment. Refundable bookings allow cancellation with a full credit, subject to the hotel's policy, which may result in a potential delay of over 21 business days or more."})})]}),b==="2"&&(p==null?void 0:p.summery)!=="non-refundable"&&((G=h==null?void 0:h.policy_breakdown)==null?void 0:G.some(s=>s==null?void 0:s.details))&&e.jsxs("div",{className:"flex items-center -mb-2 gap-x-3",children:[e.jsxs("p",{className:"text-[10px] font-semibold text-secondary",children:[e.jsx(te,{})," Refundable"]}),e.jsx(f,{button:e.jsx("button",{className:"leading-tight text-neutral",children:e.jsx(v,{})}),children:e.jsx("ul",{className:"px-3 py-3 pl-8 list-disc",children:h.policy_breakdown.map((s,t)=>e.jsx("list",{className:Fe("mb-1 text-xs font-semibold list-item",(s==null?void 0:s.summery)==="refundable"?"text-success":(s==null?void 0:s.summery)==="non-refundable"?"text-error":"text-warning"),children:s==null?void 0:s.details},t))})})]}),b==="2"&&(p==null?void 0:p.summery)==="non-refundable"&&e.jsxs("p",{className:"text-[10px] font-medium text-error leading-tight",children:[e.jsx(le,{})," Non-Refundable"]}),b==="2"&&((Q=(K=(J=n==null?void 0:n.sell)==null?void 0:J.price_breakdown)==null?void 0:K.payable_at_property)==null?void 0:Q.length)>0&&e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsxs("p",{className:"text-[10px] font-semibold text-error",children:[e.jsx(S,{})," Payable at Check-in"]}),e.jsx(f,{button:e.jsx("button",{className:"leading-tight text-neutral",children:e.jsx(v,{})}),children:e.jsx("div",{className:"px-3 py-3",children:n.sell.price_breakdown.payable_at_property.map((s,t)=>e.jsxs("p",{className:"text-xs font-semibold text-error",children:[e.jsx(S,{})," ",s==null?void 0:s.title,":"," ",W(s==null?void 0:s.currency),s==null?void 0:s.amount]},t))})})]}),b!=="2"&&e.jsx("p",{className:`text-[10px] mb-1 font-medium ${p.summery==="non-refundable"?"text-error":"text-secondary"}`,children:p.summery==="non-refundable"?e.jsxs(e.Fragment,{children:[e.jsx(le,{})," Non-Refundable"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{})," Refundable until"," ",(U=p.auto_cancel)==null?void 0:U.slice(0,10)]})})]})]})})]})},Ze=({room:l})=>{const{data:u}=l||{};return u.map((o,i)=>e.jsx(Ye,{rooms:l,index:i},`${o.room_number}_${i}`))};export{Ze as R,Ye as S,ze as a};
