import{m as D,e as S,l as F,o as e,a6 as T,Q as w}from"./index-dd20920c.js";import{c as A,a as I,w as L,aV as R}from"./App-4a5e8587.js";import{I as B}from"./InputDateRange-fa0e3896.js";import"./shortcut-buttons-flatpickr.min-94a01fe8.js";const C=()=>{var m;const{site_title:c}=D.useState(),[t,h]=A(),[n,u]=S.useState(null),b=t.get("trx_type")||"any",p=t.get("booking_reference_id")||"",o=t.get("trx_amount")||null,i=t.get("trx_date"),r=t.get("limit_data")||10,{axiosInstance:j}=I(),{member_id:d,login_key:x}=((m=F.useState())==null?void 0:m.user_data)||{},{data:l,isLoading:_}=L({queryKey:["BOOKING_LEDGER",b,p,o,i,d,x,r],queryFn:async()=>{var a;const s=await j.post("/secure?pathName=/finance/history-ledger",{member_id:d,login_key:x,trx_amount:o,trx_date:i,limit_data:r});if(((a=s.data)==null?void 0:a.status)==="success")return s.data.data}}),g=s=>{s.preventDefault();const a=s.target,N=a.trx_type.value,f=a.booking_reference_id.value,y=a.trx_amount.value,v=(n==null?void 0:n.length)>1?n.join(" to "):null,k=a.limit_data.value;h({trx_type:N,booking_reference_id:f,trx_amount:y,trx_date:v,limit_data:k})};return e.jsxs("main",{className:"container min-h-screen pt-20",children:[e.jsx(T,{children:e.jsxs("title",{children:["Ledger History",c?" - "+c:""]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("form",{onSubmit:g,className:"relative p-4 mb-16 shadow-md sm:px-6 bg-base-200 rounded-b-2xl rounded-2xl",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Ledger History"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 mb-5 sm:mb-8 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"transaction-dates",className:"sb-label",children:"Transaction Dates"}),e.jsx(B,{className:"sb-input",defaultValue:n,action:s=>u(s),placeholder:"Select Transaction Dates"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"transaction-type",className:"sb-label",children:"Transaction Type"}),e.jsxs("select",{id:"transaction-type",name:"trx_type",className:"sb-input",children:[e.jsx("option",{value:"any",selected:!0,children:"All"}),e.jsx("option",{value:"credit",children:"Credit"}),e.jsx("option",{value:"debit",children:"Debit"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"booking-reference-id",className:"sb-label",children:"Booking Reference Id"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",id:"booking-reference-id",name:"booking_reference_id",placeholder:"Booking Reference Id"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"transaction-amount",className:"sb-label",children:"Transaction Amount"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",id:"transaction-amount",name:"trx_amount",placeholder:"Type Transaction Amount"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"invoice-status",className:"sb-label",children:"Show Data Limit"}),e.jsxs("select",{id:"invoice-status",className:"sb-input",name:"limit_data",defaultValue:r,children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"500",children:"500"}),e.jsx("option",{value:"1000",children:"1000"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-lg min-h-0 h-12 btn-primary sm:absolute static top-full left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:active:!-translate-x-1/2 sm:active:!-translate-y-1/2 sm:active:scale-95 !animate-none normal-case flex-nowrap font-normal max-sm:w-full",children:_?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"animate-spin"})," Loading..."]}):"Search"})]}),e.jsx("div",{className:"w-full mb-8 overflow-x-auto",children:e.jsxs("table",{className:"table text-sm rounded-none bg-base-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary text-primary-content",children:[e.jsx("th",{className:"text-sm border",children:"Date"}),e.jsx("th",{className:"text-sm border",children:"Type"}),e.jsx("th",{className:"text-sm border",children:"Reference"}),e.jsx("th",{className:"text-sm border",children:"Booking Ref"}),e.jsx("th",{className:"text-sm border",children:"Transaction Amount"}),e.jsx("th",{className:"text-sm border",children:"Balance"}),e.jsx("th",{className:"text-sm border",children:"Payment Attachment"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border",children:e.jsx("p",{children:w((s==null?void 0:s.timestamp)*1e3).format("DD MMM YYYY hh:mmA")})}),e.jsx("td",{className:"border",children:s==null?void 0:s.trx_type}),e.jsx("td",{className:"border",children:e.jsx("p",{children:s==null?void 0:s.trx_id})}),e.jsx("td",{className:"text-xs border",children:e.jsx("p",{children:s==null?void 0:s.booking_reference_id})}),e.jsx("td",{className:"text-xs border",children:s==null?void 0:s.trx_amount}),e.jsx("td",{className:"text-xs border",children:s==null?void 0:s.balance}),e.jsx("td",{className:"text-xs border",children:(s==null?void 0:s.payment_attachment)&&e.jsx("a",{href:s==null?void 0:s.payment_attachment,target:"_blank",className:"text-xs underline text-primary",children:"Attachment"})})]},s==null?void 0:s.Id))})]})})]})]})};export{C as default};
