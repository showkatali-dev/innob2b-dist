import{P as o,u as j,j as e,h as y,bS as g,r as h,v as f,N as D,s as S,b as v,bT as q}from"./index.js";import{F as Y,S as E}from"./shortcut-buttons-flatpickr.min.js";const N=({occupancy:i,index:s,storeName:u})=>{const{t:c}=j(),l=u==="hotel_search_options"?y:g;return e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium",children:c("adults")}),e.jsxs("p",{className:"text-xs",children:[">12 ",c("years")]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{i.adult>1&&l.update(n=>{n.occupancies[s].adult=i.adult-1})},type:"button",disabled:i.adult===1,className:"rounded minusBtn btn btn-xs btn-primary",children:"-"}),e.jsx("span",{className:"value",children:i.adult}),e.jsx("button",{onClick:()=>i.adult<6&&l.update(n=>{n.occupancies[s].adult=i.adult+1}),type:"button",className:"rounded plusBtn btn btn-xs btn-primary",children:"+"})]})]})};N.propTypes={occupancy:o.object.isRequired,index:o.number.isRequired,storeName:o.string.isRequired};const _=({occupancy:i,index:s,storeName:u})=>{const c=u==="hotel_search_options"?y:g,l=i.child||0,n=i.child_age||[],{t}=j();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3 child-container",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium",children:t("children")}),e.jsxs("p",{className:"text-xs",children:["0-12 ",t("years")]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{l>0&&c.update(r=>{r.occupancies[s].child=l-1,r.occupancies[s].child_age.pop()})},type:"button",className:"rounded minusBtn btn btn-xs btn-primary",disabled:l===0,children:"-"}),e.jsx("span",{className:"value",children:l}),e.jsx("button",{onClick:()=>{i.child<6&&c.update(r=>{r.occupancies[s].child=l+1,r.occupancies[s].child_age.push(12)})},type:"button",className:"rounded plusBtn btn btn-xs btn-primary",children:"+"})]})]}),n.length>0&&e.jsxs("div",{className:"w-full mb-2",children:[e.jsx("h6",{className:"mb-2 text-xs font-medium",children:t("children_age")}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map((r,a)=>e.jsxs("select",{className:"select select-xs select-bordered rounded bg-transparent w-full focus:outline-0 font-normal !text-xs",defaultValue:r,onChange:d=>c.update(m=>{m.occupancies[s].child_age[a]=d.target.value}),children:[e.jsxs("option",{value:"17",children:["17 ",t("years_old")]}),e.jsxs("option",{value:"16",children:["16 ",t("years_old")]}),e.jsxs("option",{value:"15",children:["15 ",t("years_old")]}),e.jsxs("option",{value:"14",children:["14 ",t("years_old")]}),e.jsxs("option",{value:"13",children:["13 ",t("years_old")]}),e.jsxs("option",{value:"12",children:["12 ",t("years_old")]}),e.jsxs("option",{value:"11",children:["11 ",t("years_old")]}),e.jsxs("option",{value:"10",children:["10 ",t("years_old")]}),e.jsxs("option",{value:"9",children:["9 ",t("years_old")]}),e.jsxs("option",{value:"8",children:["8 ",t("years_old")]}),e.jsxs("option",{value:"7",children:["7 ",t("years_old")]}),e.jsxs("option",{value:"6",children:["6 ",t("years_old")]}),e.jsxs("option",{value:"5",children:["5 ",t("years_old")]}),e.jsxs("option",{value:"4",children:["4 ",t("years_old")]}),e.jsxs("option",{value:"3",children:["3 ",t("years_old")]}),e.jsxs("option",{value:"2",children:["2 ",t("years_old")]}),e.jsxs("option",{value:"1",children:["1 ",t("years_old")]}),e.jsx("option",{value:"0",children:t("below_1_year")})]},a))})]})]})};_.propTypes={occupancy:o.object.isRequired,index:o.number.isRequired,storeName:o.string.isRequired};const F=({storeName:i})=>{const s=i==="hotel_search_options"?y:g,[u,c]=h.useState(!1),l=h.useRef(),{occupancies:n}=s.useState(),t=n.reduce((a,d)=>(a.adult+=d.adult,a.child+=d.child,a),{adult:0,child:0});h.useEffect(()=>{const a=d=>{l.current&&!l.current.contains(d.target)&&d.target.classList.contains("removeBtn")===!1&&c(!1)};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[]);const{t:r}=j();return e.jsxs("div",{ref:l,className:`relative passengerContainer group sb-input-container ${u?"active":""}`,children:[e.jsx("label",{className:"sb-label",children:r("travelers")}),e.jsx("input",{autoComplete:"off",onClick:()=>c(!0),type:"text",className:"sb-input",value:`${t.adult+t.child} guest(s) in ${n.length} room`,readOnly:!0}),e.jsxs("div",{className:"absolute top-full right-0 z-10 min-w-full py-1 origin-['50%_0'] border rounded mt-0.5 shadow-xl w-max max-w-[360px] lists bg-base-200 transition-all scale-90 -translate-y-8 opacity-0 pointer-events-none group-[.active]:pointer-events-auto group-[.active]:scale-100 group-[.active]:translate-y-0 group-[.active]:opacity-100 text-sm",style:{transition:"all .2s cubic-bezier(.5,0,0,1.25), opacity .15s ease-out"},children:[e.jsx("div",{className:"flex flex-col px-5 py-2 divide-y",children:n.map((a,d)=>e.jsxs("div",{className:"pt-3 rounded-none collapse",children:[e.jsx("input",{type:"radio",name:"occupancy",defaultChecked:d+1===n.length,className:"min-h-0"}),e.jsxs("div",{className:"flex items-center justify-between min-h-0 gap-4 p-0 mb-2 collapse-title",children:[e.jsxs("h6",{className:"font-medium room",children:[r("room")," ",d+1]}),e.jsx("button",{type:"button",onClick:()=>s.update(m=>{m.occupancies=m.occupancies.filter(b=>b.id!==a.id)}),className:"link text-sm !no-underline link-error disabled:cursor-auto disabled:opacity-0 removeBtn z-[2]",disabled:n.length<2,children:r("remove")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 p-0 collapse-content",children:[e.jsx(N,{storeName:i,occupancy:a,index:d}),e.jsx(_,{storeName:i,occupancy:a,index:d})]})]},a.id))}),e.jsx("hr",{className:"mb-2"}),e.jsxs("div",{className:"flex gap-2 px-2",children:[e.jsx("button",{onClick:()=>n.length<9&&s.update(a=>{a.occupancies.push({id:f(),adult:1,child:0,child_age:[]})}),className:"flex-1 h-10 min-h-0 normal-case rounded btn btn-primary btn-outline whitespace-nowrap",children:r("add_room")}),e.jsx("button",{onClick:()=>c(!1),type:"button",className:"flex-1 h-10 min-h-0 normal-case rounded btn btn-primary",children:r("apply")})]})]})]})};F.propTypes={storeName:o.string.isRequired};const T=f(),k=({className:i,defaultValue:s,minDate:u,action:c,...l})=>{const[n,t]=h.useState(T),[r,a]=h.useState(null),d=D.useMediaQuery({query:"(max-width: 640px)"}),{system_config:m}=S.useState(),{default_date_format:b}=m||{};h.useEffect(()=>{(s==null?void 0:s.length)===2&&s[1]!=="Invalid date"&&t(f())},[s]);const C=p=>{p.length===1?a(p[0]):p.length===2&&a(null),c(p.map(x=>v(x).format("YYYY-MM-DD")))};return h.createElement(Y,{...l,key:n,options:{minDate:u||null,maxDate:r?v(r).add(29,"days").toDate():null,showMonths:d?1:2,defaultDate:s,disableMobile:!0,altInput:!0,altFormat:b||"F j, Y",mode:"range",plugins:[E({button:{label:"Clear"},onClick:function(p,x){x.clear(),x.close()}})]},onChange:C,render:({defaultValue:p,value:x,...R},w)=>e.jsx("input",{autoComplete:"off",className:i,defaultValue:p,ref:w,value:x,placeholder:`${b||"F j, Y"} to ${b||"F j, Y"}`,...R})})};k.propTypes={className:o.string.isRequired,defaultValue:o.array,minDate:o.string,action:o.func.isRequired};const B=({label:i,defaultValue:s,minDate:u,action:c})=>{const{t:l}=j();return e.jsxs("div",{className:"sb-input-container ",children:[e.jsxs("label",{className:"sb-label",children:[i," ",(s==null?void 0:s.length)>1&&(s==null?void 0:s.every(n=>!!n&&n!=="Invalid date"))&&e.jsxs("span",{className:"text-xs text-neutral",children:["(",q(...s.map(n=>v(n).format("YYYY-MM-DD")))," ",l("night"),")"]})]}),e.jsx(k,{className:"sb-input",defaultValue:s,minDate:u,type:"text",action:c})]})};B.propTypes={label:o.string.isRequired,defaultValue:o.array,minDate:o.string.isRequired,action:o.func.isRequired};export{k as I,F as O,B as S};
