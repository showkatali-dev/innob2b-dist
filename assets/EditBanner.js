import{m as w,l as E,e as u,u as A,o as e,Y as I,Q as h,b7 as C}from"./index.js";import{aE as T,b as U,c as L,r as R,U as k,ac as H}from"./App.js";import{r as P}from"./index.esm.js";import{F as Q}from"./FileInputBoxForSettings.js";const Y=()=>{var g;const{site_title:p}=w.useState(),{banner_id:x}=T(),{axiosInstance:d}=U(),{login_key:o,member_id:r}=((g=E.useState())==null?void 0:g.user_data)||{},[j,b]=u.useState(!1),{data:c,isLoading:N}=L({queryKey:["PARTNER_ADDS_LIST",o,r],queryFn:async()=>{var n;const a=await d.post("/secure?pathName=/partner/partner-ads-list",{login_key:o,member_id:r});if(((n=a.data)==null?void 0:n.status)==="success")return a.data.data}}),[s,i]=u.useState({});u.useEffect(()=>{i(c==null?void 0:c.find(a=>(a==null?void 0:a.banner_id)===x))},[c,x]);const[v,y]=u.useState(null),_=async a=>{var l;const n=await C(a);if(n){const t=await d.post("/secure?pathName=/tools/upload-cdn",{...n,member_id:r,category:"partner-banner"});if(((l=t.data)==null?void 0:l.status)==="success")return t.data.ObjectURL}},f=A(),F=R(),S=async a=>{var n,l;a.preventDefault(),b(!0);try{const t=await _(v),B={...s,login_key:o,member_id:r,ads_image_url:t||(s==null?void 0:s.ads_image_url),link:t||(s==null?void 0:s.ads_image_url)},m=await d.post("/secure?pathName=/partner/partner-ads-update",B);if(((n=m.data)==null?void 0:n.status)==="success")h("success","Success!",m.data.reason),f.invalidateQueries(["PARTNER_ADDS_LIST"]),F("/settings/manage-banner");else throw new Error((l=m.data)==null?void 0:l.reason)}catch(t){console.error(t),h("error","Failed!",t.message)}finally{b(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs("title",{children:["Manage Banner",p?" - "+p:""]})}),e.jsx("div",{className:"mb-8 sm:col-span-3 lg:col-span-4",children:N?e.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl",children:[e.jsx(H,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]}):e.jsx(e.Fragment,{children:s?e.jsxs("form",{onSubmit:S,className:"mb-5 sm:col-span-3 lg:col-span-4",children:[e.jsx("div",{className:"flex flex-col justify-between gap-4 mb-2 md:items-center md:flex-row",children:e.jsx("div",{className:"py-3 mb-1",children:e.jsx("h5",{className:"text-lg font-medium",children:"Update Banner Image"})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Banner Type"}),e.jsxs("select",{className:"sb-input",value:s==null?void 0:s.banner_position,onChange:a=>i({...s,banner_position:a.target.value}),children:[e.jsx("option",{value:"banner-slide",children:"Banner Slide"}),e.jsx("option",{value:"banner-big",children:"Big Banner"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Banner Title"}),e.jsx("input",{className:"sb-input",value:s==null?void 0:s.title,onChange:a=>i({...s,title:a.target.value}),placeholder:"Enter Banner Title"})]}),e.jsx(Q,{label:"Banner Image",action:a=>y(a.target.files[0]),isLinkActive:!0,link:s==null?void 0:s.ads_image_url,accept:"image/*"}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Status"}),e.jsxs("select",{className:"sb-input",value:s==null?void 0:s.status,onChange:a=>i({...s,status:a.target.value}),children:[e.jsx("option",{value:"disable",children:"Disable"}),e.jsx("option",{value:"active",children:"Active"})]})]}),e.jsxs("div",{className:"col-span-3 sb-input-container",children:[e.jsx("label",{className:"sb-label",children:"Summary Description"}),e.jsx("textarea",{className:"sb-input !min-h-16",value:s==null?void 0:s.summery,onChange:a=>i({...s,summery:a.target.value}),placeholder:"Enter Summary Description"})]})]}),e.jsx("button",{type:"submit",className:"h-10 min-h-0 rounded btn btn-primary h10 w-36 btn-outline",children:j?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"animate-spin"})," Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{})," Update"]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:"No banner found"})})})]})};export{Y as default};
