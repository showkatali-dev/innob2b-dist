import{o as N,e as g,m as v,q as e,a5 as y,H as R}from"./index-a3ec2d78.js";import{n as S,d as q,e as F,aK as I}from"./App-87fdd66a.js";import{I as k}from"./InputDateRange-aae32b46.js";import"./index-a9492ef6.js";const H=()=>{const{site_title:i}=N.useState(),[n,f]=S(),[r,b]=g.useState(null),l=n.get("refund_status")||"any",d=n.get("refund_trx_id")||"",u=n.get("refund_request_date")||"",c=n.get("booking_reference_id")||"",o=n.get("limit_data")||10,{axiosInstance:j}=q(),{user_data:{login_key:x,member_id:h}}=v.useState(),{data:a=[],isLoading:m}=F({queryKey:["REFUNDS_HISTORY",l,d,u,c,o,h,x],queryFn:async()=>{var t;const s=await j.post("/secure?pathName=/finance/history-refunds",{refund_status:l,refund_trx_id:d,refund_request_date:u,booking_reference_id:c,limit_data:o,member_id:h,login_key:x});if(((t=s.data)==null?void 0:t.status)==="success")return s.data.data}}),p=s=>{s.preventDefault();const t=s.target,_={refund_request_date:(r==null?void 0:r.length)>1?r.join(" to "):null,limit_data:t.limit_data.value,booking_reference_id:t.reference_id.value,refund_status:t.refund_status.value,refund_trx_id:t.refund_trx_id.value};f(_)};return e.jsxs("main",{className:"container min-h-screen pt-20",children:[e.jsx(y,{children:e.jsxs("title",{children:["Home",i?" - "+i:""]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("form",{onSubmit:p,className:"relative p-4 mb-16 shadow-md sm:px-6 bg-base-200 rounded-b-2xl rounded-2xl",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Refund Request List"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 mb-5 sm:mb-8 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"refund-request-date",className:"sb-label",children:"Refund Requested Date"}),e.jsx(k,{className:"sb-input",placeholder:"Select Refund Requested Date",defaultValue:r,action:b})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"refund-trx-id",className:"sb-label",children:"Refund Trx Id"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",name:"refund_trx_id",defaultValue:d,placeholder:"Enter Refund Trx Id"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"booking-reference-id",className:"sb-label",children:"Booking Reference Id"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",name:"reference_id",defaultValue:c,placeholder:"Enter Booking Reference Id"})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"refund-status",className:"sb-label",children:"Refund Status"}),e.jsxs("select",{id:"refund-status",className:"sb-input",name:"refund_status",defaultValue:l,children:[e.jsx("option",{value:"All",selected:!0,children:"All"}),e.jsx("option",{value:"Requested",children:"Requested"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"invoice-status",className:"sb-label",children:"Show Data Limit"}),e.jsxs("select",{id:"invoice-status",className:"sb-input",name:"limit_data",defaultValue:o,children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"500",children:"500"}),e.jsx("option",{value:"1000",children:"1000"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-lg min-h-0 h-12 btn-primary sm:absolute static top-full left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:active:!-translate-x-1/2 sm:active:!-translate-y-1/2 sm:active:scale-95 !animate-none normal-case flex-nowrap font-normal max-sm:w-full",children:m?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 animate-spin"})," Processing..."]}):e.jsx(e.Fragment,{children:"Search"})})]}),e.jsxs("div",{className:"w-full mb-8 max-lg:overflow-x-auto",children:[!m&&(a==null?void 0:a.length)===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("h5",{className:"text-lg font-semibold",children:"No results"}),e.jsx("p",{className:"text-sm text-neutral",children:"Please use the search box for your desired data range"})]}),(a==null?void 0:a.length)>0&&e.jsxs("table",{className:"table text-sm rounded-none bg-base-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary text-primary-content",children:[e.jsx("th",{className:"text-sm border",children:"Refund Trx Id"}),e.jsx("th",{className:"text-sm border",children:"Entry"}),e.jsx("th",{className:"text-sm border",children:"Refund Date"}),e.jsx("th",{className:"text-sm border",children:"Booking Ref."}),e.jsx("th",{className:"text-sm border",children:"Status"}),e.jsx("th",{className:"text-sm border",children:"Refund Amount"}),e.jsx("th",{className:"text-sm border",children:"Reference Notes"})]})}),e.jsx("tbody",{children:a==null?void 0:a.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border",children:s==null?void 0:s.refund_trx_id}),e.jsx("td",{className:"border text-primary",children:s==null?void 0:s.entry_n}),e.jsx("td",{className:"border",children:s==null?void 0:s.refund_date}),e.jsx("td",{className:"text-xs border",children:s==null?void 0:s.booking_reference_id}),e.jsx("td",{className:"text-xs border",children:e.jsx("span",{className:"text-[10px] bg-[#ffb55322] p-1 rounded text-[#ffb553] capitalize",children:s==null?void 0:s.refund_status})}),e.jsxs("td",{className:"text-xs border",children:[R(s==null?void 0:s.default_currency)," ",s==null?void 0:s.refund_amount]}),e.jsx("td",{className:"text-xs border",children:e.jsx("p",{children:s==null?void 0:s.refund_notes})})]},s==null?void 0:s.Id))})]})]})]})]})};export{H as default};
