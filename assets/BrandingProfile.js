import{m as W,e as V,u as H,l as K,o as t,Y as M,Q as h}from"./index.js";import{a as Y,b as $,aa as C,aq as G}from"./App.js";import{T as l}from"./TextInputCheckout.js";import{F as m}from"./FileInputBoxForSettings.js";const ae=()=>{var k,N,F,w,P,S,I,B;const{site_title:y}=W.useState(),[e,s]=V.useState({isInitialized:!1,brand_name:"",slogan:"",primary_contact_number:"",website:"",email_address:"",customer_support_email:"",priavcy_link:"",terms_link:"",logo_size:{},partner_from_email_address:"",partner_from_email_full_name:""}),L=H(),{axiosInstance:f}=Y(),{user_data:{login_key:b,member_id:p}}=K.useState(),{data:x={},isLoading:U,error:z,refetch:A}=$({queryKey:["PARTNER_PROFILE",b,p],queryFn:async()=>{var d,_;const a=await f.post("/settings/partner-profile",{login_key:b,member_id:p});if(((d=a==null?void 0:a.data)==null?void 0:d.status)==="success"){const{brand_name:r,slogan:j,b_primary_contact_number:i,website:c,email_address:g,customer_support_email:u,priavcy_link:n,terms_link:o,brand_color:R,brand_text_color:q,logo_size:T,partner_from_email_address:O,partner_from_email_full_name:Q}=a.data.brand_profile;return s({...e,isInitialized:!0,brand_name:r||"",slogan:j||"",primary_contact_number:i||"",website:c||"",email_address:g||"",customer_support_email:u||"",priavcy_link:n||"",terms_link:o||"",brand_color:R||"",brand_text_color:q||"",logo_size:T||{},partner_from_email_address:O||"",partner_from_email_full_name:Q||""}),a.data}else throw{...a,message:((_=a.data)==null?void 0:_.reason)||"Request failed!"}}}),[v,E]=V.useState(!1),D=async a=>{var d,_;a.preventDefault(),E(!0);try{const r={};await Promise.all(Object.entries(e.logo_size).map(async([c,g])=>{var u;if(typeof g=="string")r[c]=g;else{const n=new FormData;n.append("documents_image_url",g),n.append("member_id",p),n.append("image_type","file"),n.append("category","partner-brand-logo");try{const o=await f.post("/tools/upload-cdn",n);((u=o==null?void 0:o.data)==null?void 0:u.status)==="success"?r[c]=o.data.ObjectURL:r[c]=""}catch(o){console.error("Error uploading image:",o.message),r[c]=""}}}));const j={...e,logo_size:r,login_key:b,member_id:p},i=await f.post("/settings/partner-brand-profile-update",j);((d=i==null?void 0:i.data)==null?void 0:d.status)==="success"?(h("success","Success!",i.data.reason),A(),L.invalidateQueries(["USER_INFO"])):h("error","Update Failed",((_=i==null?void 0:i.data)==null?void 0:_.reason)||"Something went wrong")}catch(r){console.error(r),h("error","Update Failed",r.message)}finally{E(!1)}};if(z)throw z;return t.jsxs(t.Fragment,{children:[t.jsx(M,{children:t.jsxs("title",{children:["Branding Profile",y?" - "+y:""]})}),t.jsx("div",{className:"mb-8 sm:col-span-3 lg:col-span-4",children:!U&&e.isInitialized?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"py-3 mb-1",children:[t.jsx("h5",{className:"text-lg font-medium",children:(k=x==null?void 0:x.partner_profile)==null?void 0:k.legal_name}),t.jsx("p",{className:"text-sm text-neutral",children:"Branding Profile"})]}),t.jsxs("form",{onSubmit:D,className:"mb-8",children:[t.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[t.jsx(l,{label:"Brand Name",defaultValue:e.brand_name,action:a=>s({...e,brand_name:a.target.value}),placeholder:"Enter Brand Name"}),t.jsx(l,{label:"Description - Slogan",defaultValue:e.slogan,action:a=>s({...e,slogan:a.target.value}),placeholder:"Enter Description - Slogan"}),t.jsx(l,{label:"From Email Brand Name",defaultValue:e.partner_from_email_full_name,action:a=>s({...e,partner_from_email_full_name:a.target.value}),placeholder:"Enter From Email Brand Name"}),t.jsx(l,{label:"From Email Address",defaultValue:e.partner_from_email_address,readOnly:!0}),t.jsx(l,{label:"Primary Contact Number",defaultValue:e.primary_contact_number,action:a=>s({...e,primary_contact_number:a.target.value}),placeholder:"Enter Primary Contact Number"}),t.jsx(l,{label:"Primary Website",defaultValue:e.website,action:a=>s({...e,website:a.target.value}),placeholder:"Enter Primary Website"}),t.jsx(l,{label:"Booking Notification Email Address",type:"email",defaultValue:e.email_address,action:a=>s({...e,email_address:a.target.value}),placeholder:"Enter Primary Email Address"}),t.jsx(l,{label:"Customer Support Email",type:"email",defaultValue:e.customer_support_email,action:a=>s({...e,customer_support_email:a.target.value}),placeholder:"Enter Customer Support Email"}),t.jsx(l,{label:"Privacy Link",defaultValue:e.priavcy_link,action:a=>s({...e,priavcy_link:a.target.value}),placeholder:"Enter Privacy Link"}),t.jsx(l,{label:"Terms & Conditions Link",defaultValue:e.terms_link,action:a=>s({...e,terms_link:a.target.value}),placeholder:"Enter Terms & Conditions Link"})]}),t.jsxs("div",{className:"mt-8",children:[t.jsx("h2",{className:"mb-4 text-lg font-medium",children:"Branding Images"}),t.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[t.jsx(m,{label:"Large banner image (1440 * 448)",accept:"image/*",link:(N=e.logo_size)==null?void 0:N["1400_448"],action:a=>s({...e,logo_size:{...e.logo_size,"1400_448":a.target.files[0]}})}),t.jsx(m,{label:"Small logo (224 x 224)",accept:"image/*",link:(F=e.logo_size)==null?void 0:F["224_224"],action:a=>s({...e,logo_size:{...e.logo_size,"224_224":a.target.files[0]}})}),t.jsx(m,{label:"App icon image ( 1024 x 1024)",accept:"image/*",link:(w=e.logo_size)==null?void 0:w["1024_1024"],action:a=>s({...e,logo_size:{...e.logo_size,"1024_1024":a.target.files[0]}})}),t.jsx(m,{label:"Account Image (400 x 400)",accept:"image/*",link:(P=e.logo_size)==null?void 0:P["400_400"],action:a=>s({...e,logo_size:{...e.logo_size,"400_400":a.target.files[0]}})}),t.jsx(m,{label:"Square Profile image ( 512 x 512)",accept:"image/*",link:(S=e.logo_size)==null?void 0:S["512_512"],action:a=>s({...e,logo_size:{...e.logo_size,"512_512":a.target.files[0]}})}),t.jsx(m,{label:"Transparent Background Wide logo (1706 x 256)",accept:"image/*",link:(I=e.logo_size)==null?void 0:I["1706_256"],action:a=>s({...e,logo_size:{...e.logo_size,"1706_256":a.target.files[0]}})}),t.jsx(m,{label:"Fav Icon ",accept:"image/*",link:(B=e.logo_size)==null?void 0:B.favicon,action:a=>s({...e,logo_size:{...e.logo_size,favicon:a.target.files[0]}})})]})]}),t.jsx("button",{type:"submit",className:`h-10 min-h-0 mt-4 normal-case border-transparent rounded-md btn bg-primary/70 btn-primary ${v?"pointer-events-none":""}`,children:v?t.jsxs(t.Fragment,{children:[t.jsx(C,{className:"mr-2 animate-spin"})," Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(G,{})," Update"]})})]})]}):t.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl",children:[t.jsx(C,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]})})]})};export{ae as default};
