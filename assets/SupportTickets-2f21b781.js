import{o as u,m as p,q as e,a5 as N}from"./index-a3ec2d78.js";import{d as f,e as b,L as g,ad as k}from"./App-87fdd66a.js";import{S}from"./SupportTicketSidebar-0a14de69.js";const _=()=>{var d;const{site_title:l}=u.useState(),{axiosInstance:o}=f(),{member_id:c}=((d=p.useState())==null?void 0:d.user_data)||{},{data:t,isLoading:m,error:n}=b({queryKey:["SUPPORT_TICKET_LIST",c],queryFn:async()=>{var a,r;const s=await o.post("/support-ticket/list",{member_id:c});if(((a=s.data)==null?void 0:a.status)==="success")return s.data.data;throw{...s,message:((r=s.data)==null?void 0:r.reason)||"Request failed!"}}});if(n)throw n;return e.jsxs("main",{className:"container min-h-screen pt-20",children:[e.jsx(N,{children:e.jsxs("title",{children:["Support Tickets",l?" - "+l:""]})}),e.jsx("h1",{className:"mb-5 text-3xl font-semibold",children:"Support Ticket"}),e.jsx("hr",{className:"border-neutral/20"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-4 lg:grid-cols-5",children:[e.jsx(S,{}),e.jsx("div",{className:"sm:col-span-3 lg:col-span-4",children:m?e.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-xl",children:[e.jsx(k,{className:"mr-2 animate-spin text-primary"})," ","Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col justify-between gap-4 mb-5 md:items-center md:flex-row",children:e.jsxs("div",{className:"py-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Support Ticket List"}),e.jsx("p",{className:"text-sm text-neutral",children:"View or update support ticket"})]})}),e.jsx("div",{className:"overflow-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-sm team",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border",children:"Sl"}),e.jsx("th",{className:"border",children:"Ticket ID"}),e.jsx("th",{className:"border",children:"User Name"}),e.jsx("th",{className:"border",children:"User Email"}),e.jsx("th",{className:"border",children:"Attachment"}),e.jsx("th",{className:"border",children:"Ticket Status"}),e.jsx("th",{className:"border",children:"Action"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)>0?t.map((s,a)=>{const{fullname:r,email:x,attachment_link:h,ticket_status:j,ticket_id:i}=s;return e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:i}),e.jsx("td",{children:r}),e.jsx("td",{children:x}),e.jsx("td",{children:e.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"text-xs underline text-primary",children:"View Attachment"})}),e.jsx("td",{children:j}),e.jsx("td",{children:e.jsx(g,{to:`/support-ticket/${i}`,className:"text-white normal-case rounded btn btn-info btn-xs",children:"View Details"})})]},i)}):e.jsx("tr",{children:e.jsx("td",{className:"py-5 text-center text-error",colSpan:"100%",children:"No Data"})})})]})})})]})})]})]})};export{_ as default};
