import{l as V,m as W,e as l,o as e,a5 as Q,a6 as G,U as p,bb as J}from"./index-f242fedc.js";import{p as X,n as Y}from"./index.esm-72bbcee1.js";import{a as Z,w as ee,N as se,c_ as te,c$ as C,n as ae}from"./App-89f3291c.js";import{d as f}from"./register_form_data-1aa32103.js";import{C as re}from"./CountryWithCodeSelect-b68c8ddb.js";import{P as I}from"./PhoneNumberSelect-8527307e.js";import"./SingleSelect-9930e593.js";const ue=()=>{var F,L,z;const{isLoading:g,user_data:j}=V.useState(),{site_title:S}=W.useState(),[r,N]=l.useState(1),[c,A]=l.useState(f.account),[t,i]=l.useState(f.partner),[u,k]=l.useState(f.license),[y,D]=l.useState(f.business),[n,b]=l.useState(f.contact_person),[_,K]=l.useState(null),[a,v]=l.useState({trade_license_attachment:null,travel_agent_license_attachment:null,id_attachment:null}),[M,P]=l.useState(null),{axiosInstance:w}=Z(),{data:R=[],isLoading:E}=ee({queryKey:["BRANCH_LIST",g],enabled:!g,queryFn:async()=>(await w.post("/partner/branch-data",{validation_key:"12121221121212"})).data}),[q,B]=l.useState(!1);if(g||E)return e.jsx(Q,{});if(j!=null&&j.login_key)return e.jsx(se,{to:"/"});const h=async s=>{var x;if(!s)return;const o=await J(s);if(o){const d=await w.post("/partner/upload-file",{...o,member_id:"1",category:"agent_register"});if(((x=d.data)==null?void 0:x.status)==="success")return d.data.ObjectURL}},T=async()=>{var s,o,x;if(!q){P(null),B(!0);try{const d=await h(_),U=await h(a.trade_license_attachment),H=await h(a.travel_agent_license_attachment),O=await h(a.id_attachment);if(c.password!==c.confirm_password)throw new Error("Password does not match");const $={account:c,partner:{...t,logo:d},license:{...u,trade_license_attachment_url:U,travel_agent_license_attachment_url:H},business:y,contact_person:{...n,id_card_url:O}},m=await w.post("/partner/registration",$);if(((s=m.data)==null?void 0:s.status)==="success")P(((o=m==null?void 0:m.data)==null?void 0:o.reason)||"Agent registered successfully"),N(3);else throw new Error(((x=m==null?void 0:m.data)==null?void 0:x.reason)||"Something wrong happened!")}catch(d){console.error(d),p("error","Failed!",d.message)}finally{B(!1)}}};return e.jsxs("main",{className:"container min-h-screen mt-24 mb-8",children:[e.jsx(G,{children:e.jsxs("title",{children:["Agent Registration",S?" - "+S:""]})}),e.jsxs("div",{className:"relative flex items-center justify-center gap-4 mb-7",children:[r===2&&e.jsx("button",{onClick:()=>N(r-1),className:"absolute left-0 text-3xl text-primary",children:e.jsx(te,{})}),e.jsxs("ul",{className:"steps steps-vertical lg:steps-horizontal min-w-[400px]",children:[e.jsx("li",{"data-content":r>1?"✓":1,className:`step ${r>=1?"step-primary":""}`,children:"Agent Details"}),e.jsx("li",{"data-content":r>2?"✓":2,className:`step ${r>=2?"step-primary":""}`,children:"Contact Details"}),e.jsx("li",{"data-content":"✓",className:`step ${r===3&&"step-primary"}`,children:"Success"})]})]}),e.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),r===2)return T();N(r+1)},autoComplete:"off",className:"p-5 rounded shadow-md bg-base-200",children:[r===1&&e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-xl font-semibold text-transparent bg-gradient-to-r bg-clip-text from-primary-focus to-primary w-fit",children:"Agent Details"}),e.jsxs("div",{className:"gap-2 mb-4 form-control",children:[e.jsxs("div",{className:"text-sm",children:["Agency Logo ",e.jsx("span",{className:"text-error",children:"*"})]}),e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("label",{htmlFor:"logo",className:"flex items-center justify-center px-4 py-3 border border-dashed rounded-lg border-primary text-primary min-w-[200px] cursor-pointer",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(X,{})," ",_?_.name:"Upload Logo"]}),e.jsx("input",{autoComplete:"off",onChange:s=>{if(s.target.files[0].size>512e3){p("warning","Attention!","File size should be less than 500KB"),s.target.value=null;return}K(s.target.files[0])},type:"file",id:"logo",className:"absolute opacity-0 cursor-pointer",required:!0})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"This logo will be displayed on Profiles, Pay Stups."}),e.jsx("p",{className:"text-sm text-neutral",children:"Preferred Image size: 240 x 240 pixels @ 72 DPI, Maximum size of 500KB"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-12 gap-x-8",children:[e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Select Currency ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsxs("select",{className:"h-10 text-sm bg-transparent rounded select select-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:c.branch_id,onChange:s=>A({...c,branch_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Currency"}),R.map(s=>e.jsx("option",{value:s==null?void 0:s.branch_id,children:s==null?void 0:s.currency},s==null?void 0:s.branch_id))]})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Account Email ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"email",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:c.email,onChange:s=>A({...c,email:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Client Registered Name ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:t.legal_name,onChange:s=>i({...t,legal_name:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Client Trade Name (If different from registered Name)"," ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:t.brand_name,required:!0,onChange:s=>i({...t,brand_name:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Business Phone No. ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx(I,{placeholder:"Enter Mobile Number",className:"!h-10 !text-sm !bg-transparent !rounded input !input-bordered !border-base-content/20 focus:outline-0 min-h-8 !w-full",defaultValue:String(t.isd_code||"")+String(t.contact_no||""),action:s=>i({...t,isd_code:s==null?void 0:s.isd_code,contact_no:s==null?void 0:s.mobile}),isRequired:!0})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Address ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:t.address,onChange:s=>i({...t,address:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["City ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:t.city,onChange:s=>i({...t,city:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["State ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:t.state,onChange:s=>i({...t,state:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Postal Code ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:t.postal_code,onChange:s=>i({...t,postal_code:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Website ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:t.website,required:!0,onChange:s=>i({...t,website:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Select Country ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx(re,{className:"h-10 text-sm bg-transparent !rounded input input-bordered !border-base-content/20 !px-2 focus:outline-0 min-h-8 focus:border-primary",defaultValue:t.country,action:s=>{var o;return i({...t,country:((o=s==null?void 0:s.at(0))==null?void 0:o.value)||""})},required:!0})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h1",{className:"mb-4 text-xl font-semibold text-transparent bg-gradient-to-r bg-clip-text from-primary-focus to-primary w-fit",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 mb-5",children:[e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsx("span",{className:"label-text",children:"Website"})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:y.website,onChange:s=>D({...y,website:s.target.value})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"inline-block label",children:e.jsx("span",{className:"label-text",children:"Trade License No."})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:u.trade_license_no,onChange:s=>k({...u,trade_license_no:s.target.value})})]}),e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("div",{className:"text-sm",children:"Trade License Attachment"}),e.jsxs("label",{className:"flex items-center justify-center px-4 py-3 border border-dashed rounded-lg border-primary text-primary min-w-[200px] cursor-pointer",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{})," ",((F=a==null?void 0:a.trade_license_attachment)==null?void 0:F.name)||"Upload"]}),e.jsx("input",{autoComplete:"off",type:"file",onChange:s=>{if(s.target.files[0].size>512e3){p("warning","Attention!","File size should be less than 500KB"),s.target.value=null;return}v({...a,trade_license_attachment:s.target.files[0]})},className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"float-left bg-warning relative w-5 h-4 before:content-['Info'] before:absolute before:left-0 before:top-0 before:inline-flex before:w-full before:h-full before:items-center before:justify-center before:pl-1 before:text-white before:text-[8px] flex after:left-full after:top-0 after:border-8 after:border-base-200 after:border-l-warning after:absolute"}),e.jsx("p",{className:"text-xs text-neutral indent-4",children:"Maximum size of 500KB"})]})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"inline-block label",children:e.jsx("span",{className:"label-text",children:"Travel Agent License No."})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:u.travel_agent_license,onChange:s=>k({...u,travel_agent_license:s.target.value})})]}),e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("div",{className:"text-sm",children:"Travel Agent License Attachment"}),e.jsxs("label",{htmlFor:"vat_attachment",className:"flex items-center justify-center px-4 py-3 border border-dashed rounded-lg border-primary text-primary min-w-[200px] cursor-pointer",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{})," ",((L=a==null?void 0:a.travel_agent_license_attachment)==null?void 0:L.name)||"Upload"]}),e.jsx("input",{autoComplete:"off",type:"file",onChange:s=>{if(s.target.files[0].size>512e3){p("warning","Attention!","File size should be less than 500KB"),s.target.value=null;return}v({...a,travel_agent_license_attachment:s.target.files[0]})},id:"vat_attachment",className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"float-left bg-warning relative w-5 h-4 before:content-['Info'] before:absolute before:left-0 before:top-0 before:inline-flex before:w-full before:h-full before:items-center before:justify-center before:pl-1 before:text-white before:text-[8px] flex after:left-full after:top-0 after:border-8 after:border-base-200 after:border-l-warning after:absolute"}),e.jsx("p",{className:"text-xs text-neutral indent-4",children:"Maximum size of 500KB"})]})]})]})]})]})]}),r===2&&e.jsx("div",{children:e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"mb-4 text-xl font-semibold text-transparent bg-gradient-to-r bg-clip-text from-primary-focus to-primary w-fit",children:"Admin Contact Person Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 gap-x-8",children:[e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Name ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:n.name,required:!0,onChange:s=>b({...n,name:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Designation ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",required:!0,className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:n.designation,onChange:s=>b({...n,designation:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Email Address ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",required:!0,className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:n.email_address,onChange:s=>b({...n,email_address:s.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Contact No. ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx(I,{placeholder:"Enter Mobile Number",className:"!h-10 !text-sm !bg-transparent !rounded input !input-bordered !border-base-content/20 focus:outline-0 min-h-8 !w-full",defaultValue:String(n.isd_code||"")+String(n.contact_no||""),action:s=>b({...n,isd_code:s==null?void 0:s.isd_code,contact_no:s==null?void 0:s.mobile}),isRequired:!0})]}),e.jsxs("div",{className:"gap-2 form-control",children:[e.jsxs("div",{className:"text-sm",children:["National ID/Driving License/Photo Identity Card (Colour Scan copy from Original one) Photocopy not allowed."," "]}),e.jsxs("label",{className:"flex items-center justify-center px-4 py-3 border border-dashed rounded-lg border-primary text-primary min-w-[200px] cursor-pointer",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{})," ",((z=a==null?void 0:a.id_attachment)==null?void 0:z.name)||"Upload"]}),e.jsx("input",{autoComplete:"off",type:"file",onChange:s=>{if(s.target.files[0].size>512e3){p("warning","Attention!","File size should be less than 500KB"),s.target.value=null;return}v({...a,id_attachment:s.target.files[0]})},className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"float-left bg-warning relative w-5 h-4 before:content-['Info'] before:absolute before:left-0 before:top-0 before:inline-flex before:w-full before:h-full before:items-center before:justify-center before:pl-1 before:text-white before:text-[8px] flex after:left-full after:top-0 after:border-8 after:border-base-200 after:border-l-warning after:absolute"}),e.jsx("p",{className:"text-xs text-neutral indent-4",children:"Maximum size of 500KB"})]})]})]})]})}),r===3&&e.jsxs("div",{className:"flex flex-col items-center justify-center w-full gap-4 py-16 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 text-3xl border rounded-full text-success border-success/20",children:e.jsx(Y,{})}),e.jsx("h1",{className:"text-3xl font-semibold ",children:"Success!"}),e.jsx("p",{className:"max-w-lg",children:M})]}),e.jsxs("div",{className:"flex mt-5",children:[r===1&&e.jsx("button",{type:"submit",className:"w-32 h-10 min-h-0 font-normal normal-case rounded btn btn-primary",children:"Next"}),r===2&&e.jsx("button",{type:"submit",className:"w-32 h-10 min-h-0 font-normal normal-case rounded btn btn-primary",children:q?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"mr-1 animate-spin"})," ","Processing..."]}):e.jsx(e.Fragment,{children:"Register"})})]})]})]})};export{ue as default};
