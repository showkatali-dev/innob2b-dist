import{m as p,e as b,o as e,a6 as N,Q as v,ac as _}from"./index-dd20920c.js";import{dd as w}from"./App-4a5e8587.js";const A=()=>{const{site_title:h,system_config:f}=p.useState(),{master_key:o,master_cluster:d}=p.useState(t=>{var r;return(r=t.system_config)==null?void 0:r.pusher})||{},[a,u]=b.useState([]);return b.useEffect(()=>{if(!o||!d)return;const t=new w(o,{cluster:d});return t.subscribe("b2b-apps").bind("customer_activity",s=>{var c,i,n;const l={title:(c=s==null?void 0:s.push_message)==null?void 0:c.title,message:(i=s==null?void 0:s.push_message)==null?void 0:i.message,...(n=s==null?void 0:s.push_message)==null?void 0:n.activity};u(m=>[l,...m])}),()=>t.unsubscribe("b2b-apps")},[o,d]),e.jsxs("main",{className:"container min-h-screen pt-20 mb-8",children:[e.jsx(N,{children:e.jsxs("title",{children:["Live Broadcast Activity Logs",h?" - "+h:""]})}),e.jsxs("div",{className:"mb-8 sm:col-span-3 lg:col-span-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 mb-1",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-lg font-medium",children:"Live Broadcast Activity Logs"}),e.jsx("p",{className:"text-sm text-neutral",children:"All activity logs will show here"})]}),e.jsx("input",{autoComplete:"off",type:"text",name:"search",placeholder:"Search by Name/IP/Country",className:"h-10 min-h-0 text-sm rounded md:w-60 join-item input input-bordered focus:outline-0 focus:ring-1 focus:ring-primary"})]}),e.jsx("div",{className:"min-h-screen mt-4 border-t-4 rounded-lg border-t-primary bg-base-200 shadow-sam",children:e.jsx("div",{className:"w-full mb-8 max-sm:overflow-x-auto",children:e.jsxs("table",{className:"table text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm font-medium uppercase",children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"IP"}),e.jsx("th",{children:"Member"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Message"})]})}),e.jsx("tbody",{children:(a==null?void 0:a.length)>0?a.map((t,r)=>{const{title:s,message:l,ip_address:c,member_name:i,partner_name:n,platform:m,browser:j,country_name:x,country_flag:g,date_time:y}=t||{};return e.jsxs("tr",{className:`cursor-pointer hover:bg-base-100 group ${r===0?"glow-animation":""}`,children:[e.jsx("th",{className:"border-0 border-y group-hover:bg-[#eff5f9] duration-200",children:r+1}),e.jsxs("td",{className:"border-0 border-y group-hover:bg-[#eff5f9] duration-200",children:[e.jsx("p",{children:c}),e.jsx("p",{className:"text-xs",children:v(y).format(`${f.default_date_format_print} H:mm:ss`)}),e.jsxs("p",{className:"text-xs text-neutral",children:[j,"-",m]})]}),e.jsxs("td",{className:"border-0 border-y group-hover:bg-[#eff5f9] duration-200",children:[e.jsx("h1",{children:i}),e.jsx("p",{className:"text-xs",children:n}),x&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/flags/${g}.jpg`,alt:t.ip_location,className:"w-4"}),e.jsx("p",{children:x})]})]}),e.jsx("td",{className:"border-0 border-y group-hover:bg-[#eff5f9] duration-200",children:s}),e.jsx("td",{className:"border-0 border-y group-hover:bg-[#eff5f9] duration-200",children:e.jsx("p",{className:"text-xs min-w-[320px]",children:l})})]},_())}):e.jsx("tr",{children:e.jsx("td",{colSpan:"100%",children:e.jsx("p",{className:"py-6 text-center",children:"No data found"})})})})]})})})]})]})};export{A as default};
