import{q as e,o as p,m as g,a4 as _,a5 as f,H as j}from"./index-5c0e37d6.js";import{d as N,e as m,ae as S,dc as w,n as v,c as P,aa as b}from"./App-1de86f53.js";const k=({member_id:s,tracking_id:t})=>{const{axiosInstance:r}=N(),{data:o,isLoading:n}=m({queryKey:[s,t],queryFn:async()=>{var c;const i={notes:"Issue by Online payment",price_change_accepted:"no",member_id:s,tracking_id:t};return((c=(await r.post("/flight/issue-ticket",i)).data)==null?void 0:c.status)==="success"}});if(n)return e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Please wait while we process your booking"}),e.jsx("div",{className:"text-center",children:e.jsx(S,{className:"text-4xl animate-spin text-warning"})})]});if(o)return e.jsx(w,{to:`/booking-details/flight?tracking_id=${t}`,replace:!0})},F=()=>{const{site_title:s,system_config:t}=p.useState(),{checkout_url:r}=t||{},[o]=v(),{member_id:n}=g.useState(d=>d.user_data)||{},i=o.get("pay_ref_id"),{data:a,isLoading:c}=m({queryKey:["ONLINE_PAYMENT_STATUS",i],queryFn:async()=>(await b.post(`${r}/validation`,{pay_tracking_id:i})).data}),{status:l}=a||{},{gateway_currency:x,gateway_paid_amount:y,tracking_id:u,service_details:h}=(a==null?void 0:a.data)||{};return c?e.jsx(_,{}):e.jsxs("main",{className:"container relative min-h-screen pt-20",children:[e.jsx(f,{children:e.jsxs("title",{children:["Payment",s?" - "+s:""]})}),e.jsx("div",{className:"w-full pt-2",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-3",children:[e.jsxs("h1",{className:P("text-4xl font-semibold capitalize",l==="success"?"text-success":"text-error"),children:[l||"failed","!"]}),e.jsxs("p",{className:"text-lg text-neutral",children:[e.jsx("strong",{children:"Payment Amount:"})," ",j(x)," ",y]}),h==="flight_issue_ticket"&&!!n&&!!u&&e.jsx(k,{member_id:n,tracking_id:u})]})})]})};export{F as default};
