import{m as _,e as f,l as v,o as e,a6 as g,G as P}from"./index-c420ef0b.js";import{c as S,a as k,w as D,aV as F}from"./App-7d589f36.js";import{I as w}from"./InputDateRange-a842dc7f.js";import"./shortcut-buttons-flatpickr.min-77ba4a50.js";const V=()=>{const{site_title:d}=_.useState(),[n,u]=S(),[l,y]=f.useState(null),r=n.get("payment_status")||"all",c=n.get("payment_tracking_id")||"",i=n.get("payment_type")||"all",m=n.get("payment_date")||"",o=n.get("limit_data")||10,{axiosInstance:b}=k(),{user_data:{login_key:x,member_id:h}}=v.useState(),{data:s=[],isLoading:p}=D({queryKey:["PAYMENT_HISTORY",r,c,i,m,o,h,x],queryFn:async()=>{var t;const a=await b.post("/secure?pathName=/finance/history-payments",{payment_status:r,payment_tracking_id:c,payment_type:i,payment_date:m,limit_data:o,member_id:h,login_key:x});if(((t=a.data)==null?void 0:t.status)==="success")return a.data.data}}),j=a=>{a.preventDefault();const t=a.target,N={payment_date:(l==null?void 0:l.length)>1?l.join(" to "):null,limit_data:t.limit_data.value,payment_tracking_id:t.payment_tracking_id.value,payment_status:t.payment_status.value,payment_type:t.payment_type.value};u(N)};return e.jsxs("main",{className:"container min-h-screen pt-20",children:[e.jsx(g,{children:e.jsxs("title",{children:["Payment History",d?" - "+d:""]})}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("form",{onSubmit:j,className:"relative p-4 mb-16 shadow-md sm:px-6 bg-base-200 rounded-b-2xl rounded-2xl",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Payments History"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 mb-4 sm:mb-8 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"payment-date",className:"sb-label",children:"Payment Date"}),e.jsx(w,{className:"sb-input",placeholder:"Select Payment Date",defaultValue:l,action:y})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"payment-status",className:"sb-label",children:"Payment Status"}),e.jsxs("select",{name:"payment_status",className:"sb-input",defaultValue:r,children:[e.jsx("option",{value:"All",selected:!0,children:"All"}),e.jsx("option",{value:"Request",children:"Request"}),e.jsx("option",{value:"Verified",children:"Verified"}),e.jsx("option",{value:"Decline",children:"Decline"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"payment-type",className:"sb-label",children:"Payment Type"}),e.jsxs("select",{name:"payment_type",className:"sb-input",defaultValue:i,children:[e.jsx("option",{value:"All",selected:!0,children:"All"}),e.jsx("option",{value:"Cash Payment",children:"Cash Payment"}),e.jsx("option",{value:"Bank Cheque Deposit",children:"Bank Cheque Deposit"}),e.jsx("option",{value:"Bank Cash Deposit",children:"Bank Cash Deposit"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Mobile Financial Service",children:"Mobile Financial Service"}),e.jsx("option",{value:"Other Type",children:"Other Type"})]})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"payment-reference-id",className:"sb-label",children:"Payment Reference Id"}),e.jsx("input",{autoComplete:"off",className:"sb-input",type:"text",name:"payment_tracking_id",placeholder:"Enter Payment Reference Id",defaultValue:c})]}),e.jsxs("div",{className:"sb-input-container",children:[e.jsx("label",{htmlFor:"invoice-status",className:"sb-label",children:"Show Data Limit"}),e.jsxs("select",{id:"invoice-status",className:"sb-input",name:"limit_data",defaultValue:o,children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"30"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"500",children:"500"}),e.jsx("option",{value:"1000",children:"1000"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-lg min-h-0 h-12 btn-primary sm:absolute static top-full left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:active:!-translate-x-1/2 sm:active:!-translate-y-1/2 sm:active:scale-95 !animate-none normal-case flex-nowrap font-normal max-sm:w-full",children:p?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 animate-spin"})," Processing..."]}):e.jsx(e.Fragment,{children:"Search"})})]}),e.jsxs("div",{className:"w-full mb-8 overflow-x-auto",children:[!p&&(s==null?void 0:s.length)===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("h5",{className:"text-lg font-semibold",children:"No results"}),e.jsx("p",{className:"text-sm text-neutral",children:"Please use the search box for your desired data range"})]}),(s==null?void 0:s.length)>0&&e.jsxs("table",{className:"table text-sm rounded-none bg-base-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary text-primary-content",children:[e.jsx("th",{className:"text-sm border",children:"Payment Trx Id"}),e.jsx("th",{className:"text-sm border",children:"Payment Type"}),e.jsx("th",{className:"text-sm border",children:"Payment Date"}),e.jsx("th",{className:"text-sm border",children:"Payment Ref"}),e.jsx("th",{className:"text-sm border",children:"Status"}),e.jsx("th",{className:"text-sm border",children:"Payment Amount"}),e.jsx("th",{className:"text-sm border",children:"Reference Notes"}),e.jsx("th",{className:"text-sm border",children:"Download"})]})}),e.jsx("tbody",{children:s==null?void 0:s.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border",children:a==null?void 0:a.payment_tracking_id}),e.jsx("td",{className:"border text-primary",children:a==null?void 0:a.payment_type}),e.jsx("td",{className:"border",children:a==null?void 0:a.payment_date}),e.jsx("td",{className:"text-xs border",children:a==null?void 0:a.payment_reference}),e.jsx("td",{className:"text-xs border",children:e.jsx("span",{className:"text-xs text-white badge badge-primary",children:a==null?void 0:a.payment_status})}),e.jsxs("td",{className:"text-xs border",children:[P(a==null?void 0:a.default_currency)," ",a==null?void 0:a.payment_amount]}),e.jsx("td",{className:"text-xs border",children:a==null?void 0:a.reference_notes}),e.jsx("td",{className:"text-xs border",children:(a==null?void 0:a.payment_attachment)&&e.jsx("a",{href:a==null?void 0:a.payment_attachment,className:"no-underline link link-primary",children:"Download"})})]},a==null?void 0:a.Id))})]})]})]})]})};export{V as default};
