import{m as F,o as k,e as P,q as e,a4 as S,a5 as _,I,bp as E,ab as L,T as p}from"./index-5c0e37d6.js";import{W as H,d as z,o as A,dc as B,L as C,er as D,V as M}from"./App-1de86f53.js";import"./autoplay-4ed993c7.js";const O=()=>{const{isLoading:f,user_data:s}=F.useState(),{site_title:n,intro_video:i,intro_banner:h,system_config:t}=k.useState(),{state:a}=H(),b=(a==null?void 0:a.pathname)||"/",[l,c]=P.useState(!1),{axiosInstance:j}=z(),w=A(),v=async d=>{var u,x,g;if(d.preventDefault(),l)return;c(!0);const m=d.target,y=m.email.value,N=window.location.origin;try{const r={random_key:L().slice(0,8),email:y,password_reset_url:`${N}/reset-password`},o=await j.post("/user/password-reset",r);if(((u=o.data)==null?void 0:u.status)==="success")p("success","Success",(x=o.data)==null?void 0:x.reason),m.reset(),w("/login");else throw new Error(((g=o.data)==null?void 0:g.reason)||"Something went wrong")}catch(r){p("error","Failed!",r.message)}finally{c(!1)}};return f?e.jsx(S,{}):s!=null&&s.login_key?e.jsx(B,{to:b}):e.jsxs("div",{style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))",backgroundSize:"cover",backgroundBlendMode:"multiply"},children:[e.jsx(_,{children:e.jsxs("title",{children:["Forgot Password",n?" - "+n:""]})}),i&&e.jsx("video",{id:"background-video",src:i,poster:h,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:"Your browser does not support the video tag."}),e.jsxs("main",{className:"grid min-h-screen mx-auto md:grid-cols-2 lg:grid-cols-3 max-w-screen-2xl",children:[e.jsx("div",{className:"lg:col-span-2"}),e.jsxs("div",{className:"relative flex flex-col items-center justify-center min-h-screen px-8 py-4 md:px-12 bg-base-200/70",children:[e.jsxs(C,{to:"/login",className:"absolute normal-case rounded-full btn btn-ghost btn-sm top-4 left-2 hover:bg-primary/10",children:[e.jsx(D,{})," Back to login"]}),e.jsx("p",{className:"mb-8 font-medium text-center text-neutral",children:"Forgot Password?"}),e.jsxs("form",{onSubmit:v,className:"flex flex-col w-full gap-y-4",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{autoComplete:"off",type:"email",name:"email",className:"flex-1 h-10 pl-10 text-sm rounded-full input bg-[#E9E7FF] focus:outline-0 min-h-8",placeholder:"Login email address"}),e.jsx("span",{className:"absolute inline-flex items-center text-lg left-4 text-primary",children:e.jsx(I,{path:E,size:.8})})]}),e.jsx("button",{type:"submit",className:"normal-case rounded-full btn btn-primary",children:l?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"animate-spin"})," Processing..."]}):"Reset password"})]}),e.jsxs("div",{className:"mt-8 text-sm text-center text-neutral/70",children:["© Copyright ",new Date().getFullYear()," © ",t==null?void 0:t.copyright]})]})]})]})};export{O as default};
