import{ak as d,q as s,o as h,m as g,a5 as p}from"./index-fd8c4774.js";import{V as j,a as y,T as _,b as v}from"./TravelerNationality-78309f1a.js";import{L as b,h as f,n as N,d as S,e as V}from"./App-ad0472c8.js";import{V as w}from"./VisaSearchSkeleton-a67a5192.js";import"./SingleSelect-fad274c1.js";import"./CountryWithCodeSelect-bbdf4330.js";const C=()=>{const{country_code:o,visa_category:c}=d.useState();return s.jsx("div",{className:"relative z-[9] bg-base-200 px-5 pb-5 pt-4 rounded-lg mb-6",children:s.jsxs("div",{className:"grid gap-5 lg:grid-flow-col",children:[s.jsxs("div",{className:"grid grid-flow-row gap-5 sm:col-span-5 sm:grid-cols-3",children:[s.jsx(j,{label:"Country",value:o,action:a=>d.update(e=>{var t;e.country_code=(t=a==null?void 0:a.at(0))==null?void 0:t.value})}),s.jsx(y,{label:"Category",value:c,action:a=>d.update(e=>{var t;e.visa_category=(t=a==null?void 0:a.at(0))==null?void 0:t.value})}),s.jsx(_,{})]}),s.jsx(v,{isStatic:!0})]})})},k=({details:o})=>{var l,n;const{visa_seo_code:c,visa_title:a,primary_photo:e,visa_category_title:t,basic_info:m,starting_price:r}=o;return s.jsx("div",{className:"p-4 rounded-lg bg-base-200",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx("div",{children:s.jsx("img",{src:e||"/no_image.jpg",alt:a,className:"object-cover w-full h-full rounded-md"})}),s.jsxs("div",{className:"flex col-span-3 divide-x",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mb-1 text-lg font-semibold",children:a}),s.jsx("div",{className:"mb-2 border-transparent rounded badge bg-primary text-primary-content",children:t}),s.jsx("p",{className:"text-sm text-neutral inner-html",dangerouslySetInnerHTML:{__html:m}})]}),s.jsxs("div",{className:"flex flex-col justify-center pl-6 w-60 shrink-0",children:[s.jsxs("div",{className:"p-4 rounded-md bg-base-100 text-end",children:[s.jsx("h4",{className:"mb-1 text-sm font-medium",children:"Starting Price"}),s.jsxs("p",{className:"text-xl font-semibold text-primary",children:[(l=r==null?void 0:r.sale)==null?void 0:l.currency," ",(n=r==null?void 0:r.sale)==null?void 0:n.amount]})]}),s.jsxs(b,{to:`/visa/${c}`,className:"w-full h-10 min-h-0 mt-3 normal-case rounded-md btn btn-primary group",children:["View Details"," ",s.jsx(f,{className:"text-lg transition group-hover:translate-x-2"})]})]})]})]})})},P=()=>{const{site_title:o}=h.useState(),[c]=N(),a=c.get("country_code")||"",e=c.get("visa_category")||"",{login_key:t}=g.useState(i=>i.user_data)||{},{axiosInstance:m}=S(),{data:r=[],isLoading:l,error:n}=V({queryKey:["VISA_SEARCH",a,e,t],queryFn:async()=>{var x;d.update(u=>{u.country_code=a,u.visa_category=e});const i=await m.post("/secure?pathName=/service-visa/search",{country_code:a,visa_category:e==="all"?"":e},{headers:{"is-open":t?"no":"yes"}});return((x=i.data)==null?void 0:x.status)==="success"?i.data.data:[]}});if(n)throw n;return s.jsxs("main",{className:"container min-h-screen pt-20 mb-16",children:[s.jsx(p,{children:s.jsxs("title",{children:["Visa Search",o?" - "+o:""]})}),l?s.jsx(w,{}):s.jsxs(s.Fragment,{children:[s.jsx(C,{}),s.jsx("div",{className:"grid gap-5",children:r==null?void 0:r.map(i=>s.jsx(k,{details:i},i==null?void 0:i.visa_seo_code))})]})]})};export{P as default};
