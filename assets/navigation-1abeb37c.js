import{b as Z,n as $,c as H,e as A}from"./navigation-41443d30.js";import{e as D,u as X,l as G,m as Y,Q as ee,o as t,U as L,ak as Q}from"./index-2c93852a.js";import{b as K,E as W}from"./pp-321a84ae.js";import{P as I,a as O,n as z,a5 as te,v as se,aj as ae,b as ne,aV as ie,a4 as re}from"./App-f54f3d1b.js";import{I as J}from"./InputDate-b2bd429d.js";import{S as le}from"./SingleSelect-f17c6056.js";import{P as oe}from"./PhoneNumberSelect-96cff6ed.js";function Te(h){let{swiper:e,extendParams:v,on:x,emit:w}=h;const F=Z();v({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let T,_=H(),m;const n=[];function l(s){let S=0,d=0,i=0,y=0;return"detail"in s&&(d=s.detail),"wheelDelta"in s&&(d=-s.wheelDelta/120),"wheelDeltaY"in s&&(d=-s.wheelDeltaY/120),"wheelDeltaX"in s&&(S=-s.wheelDeltaX/120),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(S=d,d=0),i=S*10,y=d*10,"deltaY"in s&&(y=s.deltaY),"deltaX"in s&&(i=s.deltaX),s.shiftKey&&!i&&(i=y,y=0),(i||y)&&s.deltaMode&&(s.deltaMode===1?(i*=40,y*=40):(i*=800,y*=800)),i&&!S&&(S=i<1?-1:1),y&&!d&&(d=y<1?-1:1),{spinX:S,spinY:d,pixelX:i,pixelY:y}}function u(){e.enabled&&(e.mouseEntered=!0)}function E(){e.enabled&&(e.mouseEntered=!1)}function b(s){return e.params.mousewheel.thresholdDelta&&s.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&H()-_<e.params.mousewheel.thresholdTime?!1:s.delta>=6&&H()-_<60?!0:(s.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),w("scroll",s.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),w("scroll",s.raw)),_=new F.Date().getTime(),!1)}function j(s){const c=e.params.mousewheel;if(s.direction<0){if(e.isEnd&&!e.params.loop&&c.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&c.releaseOnEdges)return!0;return!1}function a(s){let c=s,N=!0;if(!e.enabled||s.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const M=e.params.mousewheel;e.params.cssMode&&c.preventDefault();let S=e.el;e.params.mousewheel.eventsTarget!=="container"&&(S=document.querySelector(e.params.mousewheel.eventsTarget));const d=S&&S.contains(c.target);if(!e.mouseEntered&&!d&&!M.releaseOnEdges)return!0;c.originalEvent&&(c=c.originalEvent);let i=0;const y=e.rtlTranslate?-1:1,g=l(c);if(M.forceToAxis)if(e.isHorizontal())if(Math.abs(g.pixelX)>Math.abs(g.pixelY))i=-g.pixelX*y;else return!0;else if(Math.abs(g.pixelY)>Math.abs(g.pixelX))i=-g.pixelY;else return!0;else i=Math.abs(g.pixelX)>Math.abs(g.pixelY)?-g.pixelX*y:-g.pixelY;if(i===0)return!0;M.invert&&(i=-i);let B=e.getTranslate()+i*M.sensitivity;if(B>=e.minTranslate()&&(B=e.minTranslate()),B<=e.maxTranslate()&&(B=e.maxTranslate()),N=e.params.loop?!0:!(B===e.minTranslate()||B===e.maxTranslate()),N&&e.params.nested&&c.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const r={time:H(),delta:Math.abs(i),direction:Math.sign(i),raw:s};n.length>=2&&n.shift();const C=n.length?n[n.length-1]:void 0;if(n.push(r),C?(r.direction!==C.direction||r.delta>C.delta||r.time>C.time+150)&&b(r):b(r),j(r))return!0}else{const r={time:H(),delta:Math.abs(i),direction:Math.sign(i)},C=m&&r.time<m.time+500&&r.delta<=m.delta&&r.direction===m.direction;if(!C){m=void 0;let P=e.getTranslate()+i*M.sensitivity;const U=e.isBeginning,k=e.isEnd;if(P>=e.minTranslate()&&(P=e.minTranslate()),P<=e.maxTranslate()&&(P=e.maxTranslate()),e.setTransition(0),e.setTranslate(P),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!U&&e.isBeginning||!k&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:r.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(T),T=void 0,n.length>=15&&n.shift();const R=n.length?n[n.length-1]:void 0,q=n[0];if(n.push(r),R&&(r.delta>R.delta||r.direction!==R.direction))n.splice(0);else if(n.length>=15&&r.time-q.time<500&&q.delta-r.delta>=1&&r.delta<=6){const V=i>0?.8:.2;m=r,n.splice(0),T=$(()=>{e.slideToClosest(e.params.speed,!0,void 0,V)},0)}T||(T=$(()=>{m=r,n.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(C||w("scroll",c),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),M.releaseOnEdges&&(P===e.minTranslate()||P===e.maxTranslate()))return!0}}return c.preventDefault?c.preventDefault():c.returnValue=!1,!1}function p(s){let c=e.el;e.params.mousewheel.eventsTarget!=="container"&&(c=document.querySelector(e.params.mousewheel.eventsTarget)),c[s]("mouseenter",u),c[s]("mouseleave",E),c[s]("wheel",a)}function f(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",a),!0):e.mousewheel.enabled?!1:(p("addEventListener"),e.mousewheel.enabled=!0,!0)}function o(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,a),!0):e.mousewheel.enabled?(p("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}x("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&o(),e.params.mousewheel.enabled&&f()}),x("destroy",()=>{e.params.cssMode&&f(),e.mousewheel.enabled&&o()}),Object.assign(e.mousewheel,{enable:f,disable:o})}function _e(h){let{swiper:e,extendParams:v,emit:x,once:w}=h;v({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function F(){if(e.params.cssMode)return;const m=e.getTranslate();e.setTranslate(m),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function T(){if(e.params.cssMode)return;const{touchEventsData:m,touches:n}=e;m.velocities.length===0&&m.velocities.push({position:n[e.isHorizontal()?"startX":"startY"],time:m.touchStartTime}),m.velocities.push({position:n[e.isHorizontal()?"currentX":"currentY"],time:H()})}function _(m){let{currentPos:n}=m;if(e.params.cssMode)return;const{params:l,wrapperEl:u,rtlTranslate:E,snapGrid:b,touchEventsData:j}=e,p=H()-j.touchStartTime;if(n<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(n>-e.maxTranslate()){e.slides.length<b.length?e.slideTo(b.length-1):e.slideTo(e.slides.length-1);return}if(l.freeMode.momentum){if(j.velocities.length>1){const d=j.velocities.pop(),i=j.velocities.pop(),y=d.position-i.position,g=d.time-i.time;e.velocity=y/g,e.velocity/=2,Math.abs(e.velocity)<l.freeMode.minimumVelocity&&(e.velocity=0),(g>150||H()-d.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=l.freeMode.momentumVelocityRatio,j.velocities.length=0;let f=1e3*l.freeMode.momentumRatio;const o=e.velocity*f;let s=e.translate+o;E&&(s=-s);let c=!1,N;const M=Math.abs(e.velocity)*20*l.freeMode.momentumBounceRatio;let S;if(s<e.maxTranslate())l.freeMode.momentumBounce?(s+e.maxTranslate()<-M&&(s=e.maxTranslate()-M),N=e.maxTranslate(),c=!0,j.allowMomentumBounce=!0):s=e.maxTranslate(),l.loop&&l.centeredSlides&&(S=!0);else if(s>e.minTranslate())l.freeMode.momentumBounce?(s-e.minTranslate()>M&&(s=e.minTranslate()+M),N=e.minTranslate(),c=!0,j.allowMomentumBounce=!0):s=e.minTranslate(),l.loop&&l.centeredSlides&&(S=!0);else if(l.freeMode.sticky){let d;for(let i=0;i<b.length;i+=1)if(b[i]>-s){d=i;break}Math.abs(b[d]-s)<Math.abs(b[d-1]-s)||e.swipeDirection==="next"?s=b[d]:s=b[d-1],s=-s}if(S&&w("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(E?f=Math.abs((-s-e.translate)/e.velocity):f=Math.abs((s-e.translate)/e.velocity),l.freeMode.sticky){const d=Math.abs((E?-s:s)-e.translate),i=e.slidesSizesGrid[e.activeIndex];d<i?f=l.speed:d<2*i?f=l.speed*1.5:f=l.speed*2.5}}else if(l.freeMode.sticky){e.slideToClosest();return}l.freeMode.momentumBounce&&c?(e.updateProgress(N),e.setTransition(f),e.setTranslate(s),e.transitionStart(!0,e.swipeDirection),e.animating=!0,A(u,()=>{!e||e.destroyed||!j.allowMomentumBounce||(x("momentumBounce"),e.setTransition(l.speed),setTimeout(()=>{e.setTranslate(N),A(u,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(x("_freeModeNoMomentumRelease"),e.updateProgress(s),e.setTransition(f),e.setTranslate(s),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,A(u,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(s),e.updateActiveIndex(),e.updateSlidesClasses()}else if(l.freeMode.sticky){e.slideToClosest();return}else l.freeMode&&x("_freeModeNoMomentumRelease");(!l.freeMode.momentum||p>=l.longSwipesMs)&&(x("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:F,onTouchMove:T,onTouchEnd:_}})}const ce=["JPG","JPEG","PNG","PDF"],de=({passenger:h,isOpenScanPassportModal:e,setIsOpenScanPassportModal:v})=>{const{title:x,first_name:w,last_name:F,doc_country:T,doc_no:_,dob:m,gender:n,doc_dateofissue:l,doc_dateofexpiry:u,pax_id:E,pax_type:b,tracking_id:j}=h||{},[a,p]=D.useState({title:x,first_name:w,last_name:F,doc_country:T,doc_no:_,dob:m,gender:n,doc_dateofissue:l,doc_dateofexpiry:u}),[f,o]=D.useState(null),[s,c]=D.useState(!1),[N,M]=D.useState(!1),S=X(),{axiosInstance:d}=O(),{member_id:i}=G.useState().user_data||{},{country_code:y}=Y.useState().location_info||{};D.useEffect(()=>{a.doc_country||p({...a,doc_country:y})},[y]),D.useEffect(()=>{(!a.doc_dateofexpiry||a.doc_dateofexpiry==="0000-00-00")&&p(r=>({...r,doc_dateofexpiry:ee().add(1,"year").format("YYYY-MM-DD")}))},[a.doc_dateofexpiry]);const g=async r=>{var C,P,U;c(!0);try{if(r){o(URL.createObjectURL(r));const k=new FormData;k.append("documents_image_url",r),k.append("image_type","file"),k.append("member_id",i),k.append("booking_tracking_id",j),k.append("documents_type","passport"),k.append("pax_id",E);const R=await d.post("/tools/document-scan",k);((C=R==null?void 0:R.data)==null?void 0:C.status)==="success"&&p({...a,...R.data.data,doc_dateofissue:(U=(P=R==null?void 0:R.data)==null?void 0:P.data)==null?void 0:U.doc_issuedate})}}catch(k){console.error(k)}finally{c(!1)}},B=async r=>{var C;if(r.preventDefault(),!(!a||N)){M(!0);try{const P={passenger:[{...a,pax_id:E,pax_type:b}],member_id:i,tracking_id:j,action_type:"doc"},U=await d.post("/flight/update-pax-passport",P);if(v(!1),o(null),((C=U==null?void 0:U.data)==null?void 0:C.status)==="success")L("success","Updated!",U.data.reason),S.invalidateQueries(["FLIGHT_BOOKING_DETAILS",j,i]);else throw new Error(U.data.reason)}catch(P){console.error(P),L("error","Failed!",P.message)}finally{M(!1)}}};return t.jsx("div",{className:"modal",open:e,children:t.jsxs("div",{className:"max-w-4xl modal-box",children:[t.jsx("div",{className:"sticky top-0 z-20 bg-base-200",children:t.jsx("button",{onClick:()=>v(!1),className:"absolute -top-2 -right-2 btn btn-sm btn-circle btn-ghost",children:"✕"})}),t.jsxs("form",{onSubmit:B,children:[t.jsxs("div",{className:"grid gap-8 mb-4 md:grid-cols-2",children:[t.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full bg-center bg-no-repeat bg-contain",style:{backgroundImage:`url("${f||K}")`},children:[t.jsx(W,{handleChange:g,name:"file",label:" Upload or drop your doc right here",types:ce,classes:"!h-full !min-h-[420px] !py-0 !min-w-0 !w-full !max-w-full !items-end !pb-4 scan_passport"}),s&&t.jsx("div",{className:"absolute z-10 bg-center bg-no-repeat bg-contain opacity-100 inset-[1px] bg-base-200",style:{backgroundImage:"url(https://i.pinimg.com/originals/1e/d5/47/1ed547006742581be6daece42fb2fd34.gif)"}})]}),t.jsxs("div",{className:"space-y-3 font-medium",children:[t.jsxs("h5",{className:"mb-4 font-semibold uppercase",children:["For"," ",b==="ADT"?"Adult":b==="CHD"?"Child":"Infant"," ","- Passenger No ",E]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Title"}),t.jsx("input",{autoComplete:"off",type:"text",className:"w-full p-2 text-sm uppercase border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:a==null?void 0:a.title,readOnly:!0})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"First name"}),t.jsx("input",{autoComplete:"off",type:"text",className:"w-full p-2 text-sm uppercase border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:a==null?void 0:a.first_name,readOnly:!0})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Last name"}),t.jsx("input",{autoComplete:"off",type:"text",className:"w-full p-2 text-sm uppercase border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:a==null?void 0:a.last_name,readOnly:!0})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Country"}),t.jsx("input",{autoComplete:"off",type:"text",onChange:r=>p({...a,doc_country:r.target.value}),className:"w-full p-2 text-sm uppercase border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:a==null?void 0:a.doc_country})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Passport number"}),t.jsx("input",{autoComplete:"off",type:"text",onChange:r=>p({...a,doc_no:r.target.value}),className:"w-full p-2 text-sm uppercase border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:a==null?void 0:a.doc_no})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Birth date"}),t.jsx(J,{action:r=>p({...a,dob:r}),className:"w-full p-2 text-sm uppercase border-0 border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0 h-9",defaultValue:a==null?void 0:a.dob})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Birth place"}),t.jsx("input",{autoComplete:"off",type:"text",onChange:r=>p({...a,birth_place:r.target.value}),className:"w-full p-2 text-sm uppercase border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:(a==null?void 0:a.birth_place)||(a==null?void 0:a.doc_country)})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Gender"}),t.jsx(le,{options:[{label:"Male",value:"M"},{label:"Female",value:"F"}],className:"w-full p-2 text-sm !border-0 !border-l-2 !rounded-md bg-neutral/10 !border-primary focus:outline-0 h-9",defaultValue:a==null?void 0:a.gender,action:r=>{var C;return p({...a,gender:(C=r==null?void 0:r.at(0))==null?void 0:C.value})}})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Expiry date"}),t.jsx(J,{action:r=>p({...a,doc_dateofexpiry:r}),className:"w-full p-2 text-sm uppercase border-0 border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0 h-9",defaultValue:a==null?void 0:a.doc_dateofexpiry})]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!a,children:N?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"animate-spin"})," Updating..."]}):"Update"})})]})]})})};de.propTypes={isOpenScanPassportModal:I.bool.isRequired,setIsOpenScanPassportModal:I.func.isRequired,passenger:I.object.isRequired};const me=({passenger:h,isOpenContactModal:e,setIsOpenContactModal:v})=>{const{isd_code:x,contact_no:w,email_address:F,pax_id:T,pax_type:_,tracking_id:m}=h||{},[n,l]=D.useState({isd_code:x,contact_no:w,email_address:F}),[u,E]=D.useState(!1),b=X(),{axiosInstance:j}=O(),{member_id:a}=G.useState().user_data||{},{isd_code:p}=Y.useState().location_info||{};D.useEffect(()=>{n.isd_code||l({...n,isd_code:p})},[p]);const f=async o=>{var s;if(o.preventDefault(),!(!n||u)){E(!0);try{const c={passenger:[{...n,pax_id:T,pax_type:_}],member_id:a,tracking_id:m,action_type:"contact"},N=await j.post("/flight/update-pax-passport",c);if(v(!1),((s=N==null?void 0:N.data)==null?void 0:s.status)==="success")L("success","Updated!",N.data.reason),b.invalidateQueries(["FLIGHT_BOOKING_DETAILS",m,a]);else throw new Error(N.data.reason)}catch(c){console.error(c),L("error","Failed!",c.message)}finally{E(!1)}}};return t.jsx("div",{className:"modal",open:e,children:t.jsxs("div",{className:"max-w-4xl modal-box",children:[t.jsx("div",{className:"sticky top-0 z-20 bg-base-200",children:t.jsx("button",{onClick:()=>v(!1),className:"absolute -top-2 -right-2 btn btn-sm btn-circle btn-ghost",children:"✕"})}),t.jsxs("form",{onSubmit:f,children:[t.jsxs("div",{className:"mb-4 font-medium",children:[t.jsxs("h5",{className:"mb-3 font-semibold",children:["For"," ",_==="ADT"?"Adult":_==="CHD"?"Child":"Infant"," ","- Passenger No ",T]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-44",children:[t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Contact No"}),t.jsx(oe,{placeholder:"Enter Mobile Number",className:"!w-full p-2 text-sm rounded-md !border-transparent !bg-neutral/10 !border-l-primary focus:outline-0",defaultValue:String(n.isd_code||"")+String(n.contact_no||""),action:o=>l({...n,isd_code:(o==null?void 0:o.isd_code)||"",contact_no:(o==null?void 0:o.mobile)||""}),isRequired:!0})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"text-sm capitalize",children:"Email Address"}),t.jsx("input",{autoComplete:"off",type:"text",onChange:o=>l({...n,email_address:o.target.value}),className:"w-full p-2 text-sm border-l-2 rounded-md bg-neutral/10 border-primary focus:outline-0",value:n==null?void 0:n.email_address})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",className:"btn btn-primary",children:u?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"animate-spin"})," Updating..."]}):"Update"})})]})]})})};me.propTypes={isOpenContactModal:I.bool.isRequired,setIsOpenContactModal:I.func.isRequired,passenger:I.object.isRequired};const ue=["JPG","JPEG","PNG","PDF"],pe=({passenger:h,isOpen:e,setIsOpen:v})=>{const[x,w]=D.useState(),[F,T]=D.useState(null),[_,m]=D.useState(!1),[n,l]=D.useState(!1),u=X(),{axiosInstance:E}=O(),{member_id:b}=G.useState().user_data||{},j=async p=>{var f;m(!0);try{if(p){w(URL.createObjectURL(p));const o=new FormData;o.append("documents_image_url",p),o.append("member_id",b),o.append("image_type","file"),o.append("category","profile_picture");const s=await E.post("/tools/upload-cdn",o);if(((f=s==null?void 0:s.data)==null?void 0:f.status)==="success"){const{ObjectURL:c}=s.data;T(c)}}}catch(o){console.error(o)}finally{m(!1)}},a=async p=>{var f;if(p.preventDefault(),!n){l(!0);try{const o={passenger:[{...h,passport_copy:F}],member_id:b,tracking_id:h==null?void 0:h.tracking_id,action_type:"all"},s=await E.post("/flight/update-pax-passport",o);if(v(!1),w(null),((f=s==null?void 0:s.data)==null?void 0:f.status)==="success")L("success","Updated!",s.data.reason),u.invalidateQueries(["FLIGHT_BOOKING_DETAILS",h==null?void 0:h.tracking_id,b]);else throw new Error(s.data.reason)}catch(o){console.error(o),L("error","Failed!",o.message)}finally{l(!1)}}};return t.jsx("div",{className:"modal",open:e,children:t.jsxs("div",{className:"max-w-xl rounded modal-box",children:[t.jsx("div",{className:"sticky top-0 z-20 bg-base-200",children:t.jsx("button",{onClick:()=>v(!1),className:"absolute -top-2 -right-2 btn btn-sm btn-circle btn-ghost",children:"✕"})}),t.jsxs("form",{onSubmit:a,children:[t.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full bg-center bg-no-repeat bg-contain",style:{backgroundImage:`url("${x||K}")`},children:[t.jsx(W,{handleChange:j,name:"file",label:" Upload or drop your doc right here",types:ue,classes:"!h-full !min-h-[420px] !py-0 !min-w-0 !w-full !max-w-full !items-end !pb-4 scan_passport"}),_&&t.jsx("div",{className:"absolute z-10 bg-center bg-no-repeat bg-contain opacity-100 inset-[1px] bg-base-200",style:{backgroundImage:"url(https://i.pinimg.com/originals/1e/d5/47/1ed547006742581be6daece42fb2fd34.gif)"}})]}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsx("button",{type:"submit",className:"min-h-0 font-normal rounded btn btn-primary h-11",disabled:!F,children:n?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"animate-spin"})," Updating..."]}):"Update"})})]})]})})},fe=({passenger:h})=>{const[e,v]=D.useState(!1);return t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[t.jsxs("button",{onClick:()=>v(!0),className:"text-white normal-case rounded btn btn-info btn-xs",children:[t.jsx(te,{className:"text-base"})," Upload Passport"]}),t.jsx(pe,{isOpen:e,setIsOpen:v,passenger:h})]})};fe.propTypes={passenger:I.object.isRequired};const he=({isActive:h,setIsActive:e,tracking_id:v,primary_customer_data:x})=>{var a,p,f;const{system_config:w}=Y.useState(),{title:F,first_name:T,last_name:_}=(x==null?void 0:x.customer)||{},m=F+" "+T+" "+_,{email_address:n}=(x==null?void 0:x.contact)||{},[l,u]=D.useState(!1),{member_id:E}=((a=G.useState())==null?void 0:a.user_data)||{},{axiosInstance:b}=O(),j=async o=>{var d,i,y;if(o.preventDefault(),l)return;u(!0);const s=o.target,c=s.platform_type.value,N=s.receiver_id.value,M=s.name.value,S={member_id:E,tracking_id:v,platform_type:c,receiver_id:N,name:M};try{const g=await b.post("/finance/partner-customer-send-invoice",S);if(e(!1),((d=g.data)==null?void 0:d.status)==="success")L("success","Sent!",(i=g.data)==null?void 0:i.reason);else throw new Error(((y=g.data)==null?void 0:y.reason)||"Something happen wrong. Sending Failed!")}catch(g){console.error(g),L("error","Sending Failed!",g.message)}finally{u(!1)}};return t.jsx("div",{className:"modal",open:h,children:t.jsxs("form",{onSubmit:j,className:"max-w-md p-0 rounded-md modal-box bg-base-200",children:[t.jsxs("div",{className:"sticky top-0 flex items-start justify-between px-4 py-2 text-white rounded-t-md bg-primary-focus",children:[t.jsx("h3",{className:"text-lg font-medium",children:"Send Customer Invoice"}),t.jsx("button",{type:"button",onClick:()=>e(!1),className:"btn btn-sm btn-circle btn-ghost",children:t.jsx(se,{})})]}),t.jsx("div",{className:"px-5 max-h-[70vh] h-full overflow-auto",children:t.jsxs("div",{className:"grid gap-4 py-3",children:[t.jsxs("label",{htmlFor:"",className:"gap-2 form-control",children:[t.jsx("span",{className:"text-sm",children:"Enter Platform Type"}),t.jsx("select",{type:"text",className:"h-10 min-h-0 capitalize bg-transparent rounded select select-bordered select-primary focus:outline-none",name:"platform_type",children:(f=(p=w==null?void 0:w.support_send_alert_platform_type)==null?void 0:p.data)==null?void 0:f.map(o=>t.jsx("option",{value:o,children:o},o))})]}),t.jsxs("label",{htmlFor:"",className:"gap-2 form-control",children:[t.jsx("span",{className:"text-sm",children:"Enter Receiver ID"}),t.jsx("input",{autoComplete:"off",type:"text",className:"h-10 min-h-0 bg-transparent rounded input input-bordered input-primary focus:outline-none",name:"receiver_id",defaultValue:n})]}),t.jsxs("label",{htmlFor:"",className:"gap-2 form-control",children:[t.jsx("span",{className:"text-sm",children:"Enter Receiver Name"}),t.jsx("input",{autoComplete:"off",type:"text",className:"h-10 min-h-0 bg-transparent rounded input input-bordered input-primary focus:outline-none",name:"name",defaultValue:m})]})]})}),t.jsxs("div",{className:"flex justify-end gap-3 px-4 py-2 mt-2 border-t bg-base-300",children:[t.jsx("button",{type:"submit",className:"h-10 min-h-0 normal-case btn btn-primary",children:l?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"animate-spin"})," Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ae,{})," Send"]})}),t.jsx("button",{type:"button",onClick:()=>e(!1),className:"h-10 min-h-0 normal-case bg-white btn hover:bg-white border-primary hover:border-primary",children:"Close"})]})]})})};he.propTypes={isActive:I.bool.isRequired,setIsActive:I.func.isRequired,tracking_id:I.string,primary_customer_data:I.object};const be=({booking_details:h})=>{const{search_parameter:e}=(h==null?void 0:h.flight)||{},[v,x]=D.useState(!1),{axiosInstance:w}=O(),F=ne(),T=async()=>{var _,m,n,l;if(!v){x(!0);try{const u=await w.post("/flight/search",e);if(((_=u==null?void 0:u.data)==null?void 0:_.status)==="success")Q.update(()=>Q._getInitialState()),F(`/flight/search?tracking_id=${u.data.tracking_id}`,{replace:!1});else throw new Error(((m=u==null?void 0:u.data)==null?void 0:m.reason)||((l=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:l.message))}catch(u){console.error(u),L("error","Failed!",u.message)}}};return t.jsx("button",{onClick:T,className:"h-10 min-h-0 font-normal normal-case rounded btn btn-outline btn-primary flex-nowrap whitespace-nowrap border-neutral/30",children:v?t.jsxs(t.Fragment,{children:[t.jsx(ie,{className:"animate-spin"})," Searching..."]}):t.jsxs(t.Fragment,{children:[t.jsx(re,{className:"text-lg"})," Search Again"]})})};be.propTypes={booking_details:I.object.isRequired};export{Te as M,be as R,de as S,me as U,fe as a,he as b,_e as f};
