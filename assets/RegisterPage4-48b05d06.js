import{m as D,o as K,e as n,q as e,a4 as V,a5 as O,T as k,bd as T}from"./index-0b0e509a.js";import{d as U,e as Q,dc as W,de as G,V as J}from"./App-f4418714.js";import{d as i}from"./register_form_data-1aa32103.js";import{C as X}from"./CountryWithCodeSelect-1ab5e752.js";import{P as Y}from"./PhoneNumberSelect-cd716ec0.js";import{o as Z}from"./index.esm-ea538e87.js";import"./SingleSelect-bb241bd1.js";const le=()=>{var S;const{isLoading:b,user_data:g}=D.useState(),{site_title:_}=K.useState(),[o,N]=n.useState(i.account),[s,c]=n.useState(i.partner),[d,F]=n.useState(i.license),A=i.business,[m,h]=n.useState(i.contact_person),q=i.contact_finance,P=i.contact_reservation,[r,E]=n.useState({trade_license_attachment:null,tax_attachment:null,vat_attachment:null,travel_agent_license_attachment:null,id_attachment:null}),[y,w]=n.useState(null),{axiosInstance:j}=U(),{isLoading:I}=Q({queryKey:["BRANCH_LIST",b],enabled:!b,queryFn:async()=>{var a;const t=await j.post("/partner/branch-data",{validation_key:"12121221121212"});return N({...o,branch_id:(a=t.data[0])==null?void 0:a.branch_id}),t.data}}),[v,C]=n.useState(!1);if(n.useEffect(()=>{c(t=>({...t,isd_code:"971"})),h(t=>({...t,isd_code:"971"}))},[]),b||I)return e.jsx(V,{});if(g!=null&&g.login_key)return e.jsx(W,{to:"/"});const u=async t=>{var x;const a=await T(t);if(a){const p=await j.post("/partner/upload-file",{...a,member_id:"1",category:"agent_register"});if(((x=p.data)==null?void 0:x.status)==="success")return p.data.ObjectURL}},L=async t=>{var a,x,p;if(t.preventDefault(),!v){w(null),C(!0);try{const f=await u(r.trade_license_attachment),B=await u(r.tax_attachment),R=await u(r.vat_attachment),M=await u(r.travel_agent_license_attachment),H=await u(r.id_attachment);if(o.password!==o.confirm_password)throw new Error("Password does not match");if(!(s!=null&&s.contact_no))throw new Error("Please fill out Phone Number");const z={account:o,partner:{...s},license:{...d,trade_license_attachment_url:f,tax_attachment_url:B,vat_attachment_url:R,travel_agent_license_attachment_url:M},business:A,contact_person:{...m,id_card_url:H},contact_finance:q,contact_reservation:P},l=await j.post("/partner/registration",z);if(((a=l.data)==null?void 0:a.status)==="success")w(((x=l==null?void 0:l.data)==null?void 0:x.reason)||"Agent registered successfully");else throw new Error(((p=l==null?void 0:l.data)==null?void 0:p.reason)||"Something wrong happened!")}catch(f){console.error(f),k("error","Failed!",f.message)}finally{C(!1)}}};return e.jsxs("main",{className:"container min-h-screen mt-20 mb-8",children:[e.jsx(O,{children:e.jsxs("title",{children:["Agent Registration",_?" - "+_:""]})}),e.jsx("form",{onSubmit:L,autoComplete:"off",className:"p-5 rounded-lg bg-base-200",children:y?e.jsxs("div",{className:"flex flex-col items-center justify-center w-full gap-4 py-16 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 text-3xl border rounded-full text-success border-success/20",children:e.jsx(Z,{})}),e.jsx("h1",{className:"text-3xl font-semibold ",children:"Success!"}),e.jsx("p",{className:"max-w-lg",children:y})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-xl font-semibold text-transparent bg-gradient-to-r bg-clip-text from-primary-focus to-primary w-fit",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-12 gap-x-8",children:[e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Agency/Company Name ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:s.legal_name,onChange:t=>c({...s,legal_name:t.target.value,brand_name:t.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Full Name ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:m.name,required:!0,onChange:t=>h({...m,name:t.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Email Address ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"email",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",value:o.email,onChange:t=>{N({...o,email:t.target.value}),h({...m,email_address:t.target.value})}})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Phone No. ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx(Y,{placeholder:"Enter Mobile Number",className:"!h-10 !text-sm !bg-transparent !rounded input !input-bordered !border-base-content/20 focus:outline-0 min-h-8 !w-full",defaultValue:String(s.isd_code||"")+String(s.contact_no||""),action:t=>{c({...s,isd_code:t==null?void 0:t.isd_code,contact_no:t==null?void 0:t.mobile}),h({...m,isd_code:t==null?void 0:t.isd_code,contact_no:t==null?void 0:t.mobile})},required:!0})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Full Address ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:s.address,onChange:t=>c({...s,address:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["City ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:s.city,onChange:t=>c({...s,city:t.target.value})})]}),e.jsxs("label",{className:"form-control",children:[e.jsx("div",{className:"inline-block label",children:e.jsxs("span",{className:"label-text",children:["Country ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx(X,{className:"h-10 text-sm bg-transparent !rounded input input-bordered !border-base-content/20 !px-2 focus:outline-0 min-h-8 focus:border-primary",defaultValue:s.country,action:t=>{var a;return c({...s,country:((a=t==null?void 0:t.at(0))==null?void 0:a.value)||""})},required:!0})]})]})]}),e.jsx("div",{className:"mt-5",children:e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-xl font-semibold text-transparent bg-gradient-to-r bg-clip-text from-primary-focus to-primary w-fit",children:"Required Documents"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{className:"gap-2 form-control",children:[e.jsx("div",{className:"text-sm",children:"Commercial License"}),e.jsxs("label",{className:"flex items-center justify-center px-4 py-3 border border-dashed rounded-lg border-primary text-primary min-w-[200px] cursor-pointer",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{})," ",((S=r==null?void 0:r.trade_license_attachment)==null?void 0:S.name)||"Upload"]}),e.jsx("input",{autoComplete:"off",type:"file",onChange:t=>{if(t.target.files[0].size>512e3){k("warning","Attention!","File size should be less than 500KB"),t.target.value=null;return}E({...r,trade_license_attachment:t.target.files[0]})},accept:"image/png, image/jpg, image/jpeg, application/pdf",className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"float-left bg-warning relative w-5 h-4 before:content-['Info'] before:absolute before:left-0 before:top-0 before:inline-flex before:w-full before:h-full before:items-center before:justify-center before:pl-1 before:text-white before:text-[8px] flex after:left-full after:top-0 after:border-8 after:border-base-200 after:border-l-warning after:absolute"}),e.jsx("p",{className:"text-xs text-neutral indent-4",children:"Maximum size of 500KB"})]})]}),e.jsxs("label",{className:"gap-2 form-control",children:[e.jsx("div",{className:"text-sm",children:"Emirates ID"}),e.jsx("input",{autoComplete:"off",type:"text",className:"h-10 text-sm bg-transparent rounded input input-bordered focus:outline-0 min-h-8 focus:border-primary",required:!0,value:d==null?void 0:d.trade_license_no,onChange:t=>F({...d,trade_license_no:t.target.value})})]})]})]})})]}),e.jsxs("div",{className:"flex justify-between mt-5",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",className:"rounded checkbox checkbox-sm checkbox-primary",required:!0}),e.jsx("span",{className:"text-sm",children:"I agree with sharing the above mentioned information"})]}),e.jsx("button",{type:"submit",className:"w-32 h-10 min-h-0 font-normal normal-case rounded btn btn-primary",children:v?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-1 animate-spin"})," ","Processing..."]}):e.jsx(e.Fragment,{children:"Submit"})})]})]})})]})};export{le as default};
